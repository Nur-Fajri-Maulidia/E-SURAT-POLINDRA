var Vn=Object.defineProperty;var Bn=(n,t,e)=>t in n?Vn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var qt=(n,t,e)=>(Bn(n,typeof t!="symbol"?t+"":t,e),e),we=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var r=(n,t,e)=>(we(n,t,"read from private field"),e?e.call(n):t.get(n)),q=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},lt=(n,t,e,i)=>(we(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e);var ne=(n,t,e,i)=>({set _(s){lt(n,t,s,e)},get _(){return r(n,t,i)}}),nt=(n,t,e)=>(we(n,t,"access private method"),e);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(n,t){return n.concat([t+"-"+start,t+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(n,t){return n.concat([t,t+"-"+start,t+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(n){return n?(n.nodeName||"").toLowerCase():null}function getWindow(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function isElement$1(n){var t=getWindow(n).Element;return n instanceof t||n instanceof Element}function isHTMLElement(n){var t=getWindow(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function isShadowRoot(n){if(typeof ShadowRoot>"u")return!1;var t=getWindow(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function applyStyles(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},a=t.elements[e];!isHTMLElement(a)||!getNodeName(a)||(Object.assign(a.style,i),Object.keys(s).forEach(function(o){var N=s[o];N===!1?a.removeAttribute(o):a.setAttribute(o,N===!0?"":N)}))})}function effect$2(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],a=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),N=o.reduce(function(y,_){return y[_]="",y},{});!isHTMLElement(s)||!getNodeName(s)||(Object.assign(s.style,N),Object.keys(a).forEach(function(y){s.removeAttribute(y)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(n){return n.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),s=1,a=1;t&&isHTMLElement(n)&&(s=n.offsetWidth>0&&round(i.width)/n.offsetWidth||1,a=n.offsetHeight>0&&round(i.height)/n.offsetHeight||1);var o=isElement$1(n)?getWindow(n):window,N=o.visualViewport,y=!isLayoutViewport()&&e,_=(i.left+(y&&N?N.offsetLeft:0))/s,l=(i.top+(y&&N?N.offsetTop:0))/a,D=i.width/s,I=i.height/a;return{width:D,height:I,top:l,right:_+D,bottom:l+I,left:_,x:_,y:l}}function getLayoutRect(n){var t=getBoundingClientRect(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function contains(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&isShadowRoot(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function getComputedStyle$1(n){return getWindow(n).getComputedStyle(n)}function isTableElement(n){return["table","td","th"].indexOf(getNodeName(n))>=0}function getDocumentElement(n){return((isElement$1(n)?n.ownerDocument:n.document)||window.document).documentElement}function getParentNode(n){return getNodeName(n)==="html"?n:n.assignedSlot||n.parentNode||(isShadowRoot(n)?n.host:null)||getDocumentElement(n)}function getTrueOffsetParent(n){return!isHTMLElement(n)||getComputedStyle$1(n).position==="fixed"?null:n.offsetParent}function getContainingBlock(n){var t=/firefox/i.test(getUAString()),e=/Trident/i.test(getUAString());if(e&&isHTMLElement(n)){var i=getComputedStyle$1(n);if(i.position==="fixed")return null}var s=getParentNode(n);for(isShadowRoot(s)&&(s=s.host);isHTMLElement(s)&&["html","body"].indexOf(getNodeName(s))<0;){var a=getComputedStyle$1(s);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return s;s=s.parentNode}return null}function getOffsetParent(n){for(var t=getWindow(n),e=getTrueOffsetParent(n);e&&isTableElement(e)&&getComputedStyle$1(e).position==="static";)e=getTrueOffsetParent(e);return e&&(getNodeName(e)==="html"||getNodeName(e)==="body"&&getComputedStyle$1(e).position==="static")?t:e||getContainingBlock(n)||t}function getMainAxisFromPlacement(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function within(n,t,e){return max(n,min(t,e))}function withinMaxClamp(n,t,e){var i=within(n,t,e);return i>e?e:i}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(n){return Object.assign({},getFreshSideObject(),n)}function expandToHashMap(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var toPaddingObject=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,mergePaddingObject(typeof t!="number"?t:expandToHashMap(t,basePlacements))};function arrow(n){var t,e=n.state,i=n.name,s=n.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,N=getBasePlacement(e.placement),y=getMainAxisFromPlacement(N),_=[left,right].indexOf(N)>=0,l=_?"height":"width";if(!(!a||!o)){var D=toPaddingObject(s.padding,e),I=getLayoutRect(a),C=y==="y"?top:left,A=y==="y"?bottom:right,b=e.rects.reference[l]+e.rects.reference[y]-o[y]-e.rects.popper[l],E=o[y]-e.rects.reference[y],O=getOffsetParent(a),x=O?y==="y"?O.clientHeight||0:O.clientWidth||0:0,M=b/2-E/2,S=D[C],u=x-I[l]-D[A],p=x/2-I[l]/2+M,k=within(S,p,u),w=y;e.modifiersData[i]=(t={},t[w]=k,t.centerOffset=k-p,t)}}function effect$1(n){var t=n.state,e=n.options,i=e.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||contains(t.elements.popper,s)&&(t.elements.arrow=s))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(n){return n.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(n,t){var e=n.x,i=n.y,s=t.devicePixelRatio||1;return{x:round(e*s)/s||0,y:round(i*s)/s||0}}function mapToStyles(n){var t,e=n.popper,i=n.popperRect,s=n.placement,a=n.variation,o=n.offsets,N=n.position,y=n.gpuAcceleration,_=n.adaptive,l=n.roundOffsets,D=n.isFixed,I=o.x,C=I===void 0?0:I,A=o.y,b=A===void 0?0:A,E=typeof l=="function"?l({x:C,y:b}):{x:C,y:b};C=E.x,b=E.y;var O=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),M=left,S=top,u=window;if(_){var p=getOffsetParent(e),k="clientHeight",w="clientWidth";if(p===getWindow(e)&&(p=getDocumentElement(e),getComputedStyle$1(p).position!=="static"&&N==="absolute"&&(k="scrollHeight",w="scrollWidth")),p=p,s===top||(s===left||s===right)&&a===end){S=bottom;var h=D&&p===u&&u.visualViewport?u.visualViewport.height:p[k];b-=h-i.height,b*=y?1:-1}if(s===left||(s===top||s===bottom)&&a===end){M=right;var g=D&&p===u&&u.visualViewport?u.visualViewport.width:p[w];C-=g-i.width,C*=y?1:-1}}var f=Object.assign({position:N},_&&unsetSides),B=l===!0?roundOffsetsByDPR({x:C,y:b},getWindow(e)):{x:C,y:b};if(C=B.x,b=B.y,y){var U;return Object.assign({},f,(U={},U[S]=x?"0":"",U[M]=O?"0":"",U.transform=(u.devicePixelRatio||1)<=1?"translate("+C+"px, "+b+"px)":"translate3d("+C+"px, "+b+"px, 0)",U))}return Object.assign({},f,(t={},t[S]=x?b+"px":"",t[M]=O?C+"px":"",t.transform="",t))}function computeStyles(n){var t=n.state,e=n.options,i=e.gpuAcceleration,s=i===void 0?!0:i,a=e.adaptive,o=a===void 0?!0:a,N=e.roundOffsets,y=N===void 0?!0:N,_={placement:getBasePlacement(t.placement),variation:getVariation(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mapToStyles(Object.assign({},_,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:y})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mapToStyles(Object.assign({},_,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:y})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(n){var t=n.state,e=n.instance,i=n.options,s=i.scroll,a=s===void 0?!0:s,o=i.resize,N=o===void 0?!0:o,y=getWindow(t.elements.popper),_=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&_.forEach(function(l){l.addEventListener("scroll",e.update,passive)}),N&&y.addEventListener("resize",e.update,passive),function(){a&&_.forEach(function(l){l.removeEventListener("scroll",e.update,passive)}),N&&y.removeEventListener("resize",e.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(n){return n.replace(/left|right|bottom|top/g,function(t){return hash$1[t]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(n){return n.replace(/start|end/g,function(t){return hash[t]})}function getWindowScroll(n){var t=getWindow(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function getWindowScrollBarX(n){return getBoundingClientRect(getDocumentElement(n)).left+getWindowScroll(n).scrollLeft}function getViewportRect(n,t){var e=getWindow(n),i=getDocumentElement(n),s=e.visualViewport,a=i.clientWidth,o=i.clientHeight,N=0,y=0;if(s){a=s.width,o=s.height;var _=isLayoutViewport();(_||!_&&t==="fixed")&&(N=s.offsetLeft,y=s.offsetTop)}return{width:a,height:o,x:N+getWindowScrollBarX(n),y}}function getDocumentRect(n){var t,e=getDocumentElement(n),i=getWindowScroll(n),s=(t=n.ownerDocument)==null?void 0:t.body,a=max(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=max(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),N=-i.scrollLeft+getWindowScrollBarX(n),y=-i.scrollTop;return getComputedStyle$1(s||e).direction==="rtl"&&(N+=max(e.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:N,y}}function isScrollParent(n){var t=getComputedStyle$1(n),e=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function getScrollParent(n){return["html","body","#document"].indexOf(getNodeName(n))>=0?n.ownerDocument.body:isHTMLElement(n)&&isScrollParent(n)?n:getScrollParent(getParentNode(n))}function listScrollParents(n,t){var e;t===void 0&&(t=[]);var i=getScrollParent(n),s=i===((e=n.ownerDocument)==null?void 0:e.body),a=getWindow(i),o=s?[a].concat(a.visualViewport||[],isScrollParent(i)?i:[]):i,N=t.concat(o);return s?N:N.concat(listScrollParents(getParentNode(o)))}function rectToClientRect(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function getInnerBoundingClientRect(n,t){var e=getBoundingClientRect(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function getClientRectFromMixedType(n,t,e){return t===viewport?rectToClientRect(getViewportRect(n,e)):isElement$1(t)?getInnerBoundingClientRect(t,e):rectToClientRect(getDocumentRect(getDocumentElement(n)))}function getClippingParents(n){var t=listScrollParents(getParentNode(n)),e=["absolute","fixed"].indexOf(getComputedStyle$1(n).position)>=0,i=e&&isHTMLElement(n)?getOffsetParent(n):n;return isElement$1(i)?t.filter(function(s){return isElement$1(s)&&contains(s,i)&&getNodeName(s)!=="body"}):[]}function getClippingRect(n,t,e,i){var s=t==="clippingParents"?getClippingParents(n):[].concat(t),a=[].concat(s,[e]),o=a[0],N=a.reduce(function(y,_){var l=getClientRectFromMixedType(n,_,i);return y.top=max(l.top,y.top),y.right=min(l.right,y.right),y.bottom=min(l.bottom,y.bottom),y.left=max(l.left,y.left),y},getClientRectFromMixedType(n,o,i));return N.width=N.right-N.left,N.height=N.bottom-N.top,N.x=N.left,N.y=N.top,N}function computeOffsets(n){var t=n.reference,e=n.element,i=n.placement,s=i?getBasePlacement(i):null,a=i?getVariation(i):null,o=t.x+t.width/2-e.width/2,N=t.y+t.height/2-e.height/2,y;switch(s){case top:y={x:o,y:t.y-e.height};break;case bottom:y={x:o,y:t.y+t.height};break;case right:y={x:t.x+t.width,y:N};break;case left:y={x:t.x-e.width,y:N};break;default:y={x:t.x,y:t.y}}var _=s?getMainAxisFromPlacement(s):null;if(_!=null){var l=_==="y"?"height":"width";switch(a){case start:y[_]=y[_]-(t[l]/2-e[l]/2);break;case end:y[_]=y[_]+(t[l]/2-e[l]/2);break}}return y}function detectOverflow(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=i===void 0?n.placement:i,a=e.strategy,o=a===void 0?n.strategy:a,N=e.boundary,y=N===void 0?clippingParents:N,_=e.rootBoundary,l=_===void 0?viewport:_,D=e.elementContext,I=D===void 0?popper:D,C=e.altBoundary,A=C===void 0?!1:C,b=e.padding,E=b===void 0?0:b,O=mergePaddingObject(typeof E!="number"?E:expandToHashMap(E,basePlacements)),x=I===popper?reference:popper,M=n.rects.popper,S=n.elements[A?x:I],u=getClippingRect(isElement$1(S)?S:S.contextElement||getDocumentElement(n.elements.popper),y,l,o),p=getBoundingClientRect(n.elements.reference),k=computeOffsets({reference:p,element:M,strategy:"absolute",placement:s}),w=rectToClientRect(Object.assign({},M,k)),h=I===popper?w:p,g={top:u.top-h.top+O.top,bottom:h.bottom-u.bottom+O.bottom,left:u.left-h.left+O.left,right:h.right-u.right+O.right},f=n.modifiersData.offset;if(I===popper&&f){var B=f[s];Object.keys(g).forEach(function(U){var X=[right,bottom].indexOf(U)>=0?1:-1,P=[top,bottom].indexOf(U)>=0?"y":"x";g[U]+=B[P]*X})}return g}function computeAutoPlacement(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=e.boundary,a=e.rootBoundary,o=e.padding,N=e.flipVariations,y=e.allowedAutoPlacements,_=y===void 0?placements:y,l=getVariation(i),D=l?N?variationPlacements:variationPlacements.filter(function(A){return getVariation(A)===l}):basePlacements,I=D.filter(function(A){return _.indexOf(A)>=0});I.length===0&&(I=D);var C=I.reduce(function(A,b){return A[b]=detectOverflow(n,{placement:b,boundary:s,rootBoundary:a,padding:o})[getBasePlacement(b)],A},{});return Object.keys(C).sort(function(A,b){return C[A]-C[b]})}function getExpandedFallbackPlacements(n){if(getBasePlacement(n)===auto)return[];var t=getOppositePlacement(n);return[getOppositeVariationPlacement(n),t,getOppositeVariationPlacement(t)]}function flip(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var s=e.mainAxis,a=s===void 0?!0:s,o=e.altAxis,N=o===void 0?!0:o,y=e.fallbackPlacements,_=e.padding,l=e.boundary,D=e.rootBoundary,I=e.altBoundary,C=e.flipVariations,A=C===void 0?!0:C,b=e.allowedAutoPlacements,E=t.options.placement,O=getBasePlacement(E),x=O===E,M=y||(x||!A?[getOppositePlacement(E)]:getExpandedFallbackPlacements(E)),S=[E].concat(M).reduce(function(d,c){return d.concat(getBasePlacement(c)===auto?computeAutoPlacement(t,{placement:c,boundary:l,rootBoundary:D,padding:_,flipVariations:A,allowedAutoPlacements:b}):c)},[]),u=t.rects.reference,p=t.rects.popper,k=new Map,w=!0,h=S[0],g=0;g<S.length;g++){var f=S[g],B=getBasePlacement(f),U=getVariation(f)===start,X=[top,bottom].indexOf(B)>=0,P=X?"width":"height",Y=detectOverflow(t,{placement:f,boundary:l,rootBoundary:D,altBoundary:I,padding:_}),H=X?U?right:left:U?bottom:top;u[P]>p[P]&&(H=getOppositePlacement(H));var V=getOppositePlacement(H),Q=[];if(a&&Q.push(Y[B]<=0),N&&Q.push(Y[H]<=0,Y[V]<=0),Q.every(function(d){return d})){h=f,w=!1;break}k.set(f,Q)}if(w)for(var st=A?3:1,ft=function(c){var R=S.find(function(j){var $=k.get(j);if($)return $.slice(0,c).every(function(G){return G})});if(R)return h=R,"break"},Et=st;Et>0;Et--){var W=ft(Et);if(W==="break")break}t.placement!==h&&(t.modifiersData[i]._skip=!0,t.placement=h,t.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function isAnySideFullyClipped(n){return[top,right,bottom,left].some(function(t){return n[t]>=0})}function hide(n){var t=n.state,e=n.name,i=t.rects.reference,s=t.rects.popper,a=t.modifiersData.preventOverflow,o=detectOverflow(t,{elementContext:"reference"}),N=detectOverflow(t,{altBoundary:!0}),y=getSideOffsets(o,i),_=getSideOffsets(N,s,a),l=isAnySideFullyClipped(y),D=isAnySideFullyClipped(_);t.modifiersData[e]={referenceClippingOffsets:y,popperEscapeOffsets:_,isReferenceHidden:l,hasPopperEscaped:D},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":D})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(n,t,e){var i=getBasePlacement(n),s=[left,top].indexOf(i)>=0?-1:1,a=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=a[0],N=a[1];return o=o||0,N=(N||0)*s,[left,right].indexOf(i)>=0?{x:N,y:o}:{x:o,y:N}}function offset(n){var t=n.state,e=n.options,i=n.name,s=e.offset,a=s===void 0?[0,0]:s,o=placements.reduce(function(l,D){return l[D]=distanceAndSkiddingToXY(D,t.rects,a),l},{}),N=o[t.placement],y=N.x,_=N.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=y,t.modifiersData.popperOffsets.y+=_),t.modifiersData[i]=o}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(n){var t=n.state,e=n.name;t.modifiersData[e]=computeOffsets({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(n){return n==="x"?"y":"x"}function preventOverflow(n){var t=n.state,e=n.options,i=n.name,s=e.mainAxis,a=s===void 0?!0:s,o=e.altAxis,N=o===void 0?!1:o,y=e.boundary,_=e.rootBoundary,l=e.altBoundary,D=e.padding,I=e.tether,C=I===void 0?!0:I,A=e.tetherOffset,b=A===void 0?0:A,E=detectOverflow(t,{boundary:y,rootBoundary:_,padding:D,altBoundary:l}),O=getBasePlacement(t.placement),x=getVariation(t.placement),M=!x,S=getMainAxisFromPlacement(O),u=getAltAxis(S),p=t.modifiersData.popperOffsets,k=t.rects.reference,w=t.rects.popper,h=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,g=typeof h=="number"?{mainAxis:h,altAxis:h}:Object.assign({mainAxis:0,altAxis:0},h),f=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(p){if(a){var U,X=S==="y"?top:left,P=S==="y"?bottom:right,Y=S==="y"?"height":"width",H=p[S],V=H+E[X],Q=H-E[P],st=C?-w[Y]/2:0,ft=x===start?k[Y]:w[Y],Et=x===start?-w[Y]:-k[Y],W=t.elements.arrow,d=C&&W?getLayoutRect(W):{width:0,height:0},c=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:getFreshSideObject(),R=c[X],j=c[P],$=within(0,k[Y],d[Y]),G=M?k[Y]/2-st-$-R-g.mainAxis:ft-$-R-g.mainAxis,z=M?-k[Y]/2+st+$+j+g.mainAxis:Et+$+j+g.mainAxis,Z=t.elements.arrow&&getOffsetParent(t.elements.arrow),ut=Z?S==="y"?Z.clientTop||0:Z.clientLeft||0:0,ot=(U=f==null?void 0:f[S])!=null?U:0,ht=H+G-ot-ut,pt=H+z-ot,Tt=within(C?min(V,ht):V,H,C?max(Q,pt):Q);p[S]=Tt,B[S]=Tt-H}if(N){var At,xt=S==="x"?top:left,Ht=S==="x"?bottom:right,vt=p[u],It=u==="y"?"height":"width",yt=vt+E[xt],at=vt-E[Ht],it=[top,left].indexOf(O)!==-1,mt=(At=f==null?void 0:f[u])!=null?At:0,bt=it?yt:vt-k[It]-w[It]-mt+g.altAxis,Pt=it?vt+k[It]+w[It]-mt-g.altAxis:at,Dt=C&&it?withinMaxClamp(bt,vt,Pt):within(C?bt:yt,vt,C?Pt:at);p[u]=Dt,B[u]=Dt-vt}t.modifiersData[i]=B}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function getNodeScroll(n){return n===getWindow(n)||!isHTMLElement(n)?getWindowScroll(n):getHTMLElementScroll(n)}function isElementScaled(n){var t=n.getBoundingClientRect(),e=round(t.width)/n.offsetWidth||1,i=round(t.height)/n.offsetHeight||1;return e!==1||i!==1}function getCompositeRect(n,t,e){e===void 0&&(e=!1);var i=isHTMLElement(t),s=isHTMLElement(t)&&isElementScaled(t),a=getDocumentElement(t),o=getBoundingClientRect(n,s,e),N={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(i||!i&&!e)&&((getNodeName(t)!=="body"||isScrollParent(a))&&(N=getNodeScroll(t)),isHTMLElement(t)?(y=getBoundingClientRect(t,!0),y.x+=t.clientLeft,y.y+=t.clientTop):a&&(y.x=getWindowScrollBarX(a))),{x:o.left+N.scrollLeft-y.x,y:o.top+N.scrollTop-y.y,width:o.width,height:o.height}}function order(n){var t=new Map,e=new Set,i=[];n.forEach(function(a){t.set(a.name,a)});function s(a){e.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(N){if(!e.has(N)){var y=t.get(N);y&&s(y)}}),i.push(a)}return n.forEach(function(a){e.has(a.name)||s(a)}),i}function orderModifiers(n){var t=order(n);return modifierPhases.reduce(function(e,i){return e.concat(t.filter(function(s){return s.phase===i}))},[])}function debounce(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function mergeByName(n){var t=n.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function popperGenerator(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,s=t.defaultOptions,a=s===void 0?DEFAULT_OPTIONS:s;return function(N,y,_){_===void 0&&(_=a);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,a),modifiersData:{},elements:{reference:N,popper:y},attributes:{},styles:{}},D=[],I=!1,C={state:l,setOptions:function(O){var x=typeof O=="function"?O(l.options):O;b(),l.options=Object.assign({},a,l.options,x),l.scrollParents={reference:isElement$1(N)?listScrollParents(N):N.contextElement?listScrollParents(N.contextElement):[],popper:listScrollParents(y)};var M=orderModifiers(mergeByName([].concat(i,l.options.modifiers)));return l.orderedModifiers=M.filter(function(S){return S.enabled}),A(),C.update()},forceUpdate:function(){if(!I){var O=l.elements,x=O.reference,M=O.popper;if(areValidElements(x,M)){l.rects={reference:getCompositeRect(x,getOffsetParent(M),l.options.strategy==="fixed"),popper:getLayoutRect(M)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(g){return l.modifiersData[g.name]=Object.assign({},g.data)});for(var S=0;S<l.orderedModifiers.length;S++){if(l.reset===!0){l.reset=!1,S=-1;continue}var u=l.orderedModifiers[S],p=u.fn,k=u.options,w=k===void 0?{}:k,h=u.name;typeof p=="function"&&(l=p({state:l,options:w,name:h,instance:C})||l)}}}},update:debounce(function(){return new Promise(function(E){C.forceUpdate(),E(l)})}),destroy:function(){b(),I=!0}};if(!areValidElements(N,y))return C;C.setOptions(_).then(function(E){!I&&_.onFirstUpdate&&_.onFirstUpdate(E)});function A(){l.orderedModifiers.forEach(function(E){var O=E.name,x=E.options,M=x===void 0?{}:x,S=E.effect;if(typeof S=="function"){var u=S({state:l,name:O,instance:C,options:M}),p=function(){};D.push(u||p)}})}function b(){D.forEach(function(E){return E()}),D=[]}return C}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,afterMain,afterRead,afterWrite,applyStyles:applyStyles$1,arrow:arrow$1,auto,basePlacements,beforeMain,beforeRead,beforeWrite,bottom,clippingParents,computeStyles:computeStyles$1,createPopper,createPopperBase:createPopper$2,createPopperLite:createPopper$1,detectOverflow,end,eventListeners,flip:flip$1,hide:hide$1,left,main,modifierPhases,offset:offset$1,placements,popper,popperGenerator,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1,read,reference,right,start,top,variationPlacements,viewport,write},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",toType=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=n=>{do n+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(n));return n},getSelector=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t},getSelectorFromElement=n=>{const t=getSelector(n);return t&&document.querySelector(t)?t:null},getElementFromSelector=n=>{const t=getSelector(n);return t?document.querySelector(t):null},getTransitionDurationFromElement=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const i=Number.parseFloat(t),s=Number.parseFloat(e);return!i&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=n=>{n.dispatchEvent(new Event(TRANSITION_END))},isElement=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),getElement=n=>isElement(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(n):null,isVisible=n=>{if(!isElement(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const i=n.closest("summary");if(i&&i.parentNode!==e||i===null)return!1}return t},isDisabled=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",findShadowRoot=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?findShadowRoot(n.parentNode):null},noop$1=()=>{},reflow=n=>{n.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=n=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of DOMContentLoadedCallbacks)t()}),DOMContentLoadedCallbacks.push(n)):n()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=n=>{onDOMContentLoaded(()=>{const t=getjQuery();if(t){const e=n.NAME,i=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=i,n.jQueryInterface)}})},execute=n=>{typeof n=="function"&&n()},executeAfterTransition=(n,t,e=!0)=>{if(!e){execute(n);return}const i=5,s=getTransitionDurationFromElement(t)+i;let a=!1;const o=({target:N})=>{N===t&&(a=!0,t.removeEventListener(TRANSITION_END,o),execute(n))};t.addEventListener(TRANSITION_END,o),setTimeout(()=>{a||triggerTransitionEnd(t)},s)},getNextActiveElement=(n,t,e,i)=>{const s=n.length;let a=n.indexOf(t);return a===-1?!e&&i?n[s-1]:n[0]:(a+=e?1:-1,i&&(a=(a+s)%s),n[Math.max(0,Math.min(a,s-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(n,t){return t&&`${t}::${uidEvent++}`||n.uidEvent||uidEvent++}function getElementEvents(n){const t=makeEventUid(n);return n.uidEvent=t,eventRegistry[t]=eventRegistry[t]||{},eventRegistry[t]}function bootstrapHandler(n,t){return function e(i){return hydrateObj(i,{delegateTarget:n}),e.oneOff&&EventHandler.off(n,i.type,t),t.apply(n,[i])}}function bootstrapDelegationHandler(n,t,e){return function i(s){const a=n.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const N of a)if(N===o)return hydrateObj(s,{delegateTarget:o}),i.oneOff&&EventHandler.off(n,s.type,t,e),e.apply(o,[s])}}function findHandler(n,t,e=null){return Object.values(n).find(i=>i.callable===t&&i.delegationSelector===e)}function normalizeParameters(n,t,e){const i=typeof t=="string",s=i?e:t||e;let a=getTypeEvent(n);return nativeEvents.has(a)||(a=n),[i,s,a]}function addHandler(n,t,e,i,s){if(typeof t!="string"||!n)return;let[a,o,N]=normalizeParameters(t,e,i);t in customEvents&&(o=(A=>function(b){if(!b.relatedTarget||b.relatedTarget!==b.delegateTarget&&!b.delegateTarget.contains(b.relatedTarget))return A.call(this,b)})(o));const y=getElementEvents(n),_=y[N]||(y[N]={}),l=findHandler(_,o,a?e:null);if(l){l.oneOff=l.oneOff&&s;return}const D=makeEventUid(o,t.replace(namespaceRegex,"")),I=a?bootstrapDelegationHandler(n,e,o):bootstrapHandler(n,o);I.delegationSelector=a?e:null,I.callable=o,I.oneOff=s,I.uidEvent=D,_[D]=I,n.addEventListener(N,I,a)}function removeHandler(n,t,e,i,s){const a=findHandler(t[e],i,s);a&&(n.removeEventListener(e,a,!!s),delete t[e][a.uidEvent])}function removeNamespacedHandlers(n,t,e,i){const s=t[e]||{};for(const a of Object.keys(s))if(a.includes(i)){const o=s[a];removeHandler(n,t,e,o.callable,o.delegationSelector)}}function getTypeEvent(n){return n=n.replace(stripNameRegex,""),customEvents[n]||n}const EventHandler={on(n,t,e,i){addHandler(n,t,e,i,!1)},one(n,t,e,i){addHandler(n,t,e,i,!0)},off(n,t,e,i){if(typeof t!="string"||!n)return;const[s,a,o]=normalizeParameters(t,e,i),N=o!==t,y=getElementEvents(n),_=y[o]||{},l=t.startsWith(".");if(typeof a<"u"){if(!Object.keys(_).length)return;removeHandler(n,y,o,a,s?e:null);return}if(l)for(const D of Object.keys(y))removeNamespacedHandlers(n,y,D,t.slice(1));for(const D of Object.keys(_)){const I=D.replace(stripUidRegex,"");if(!N||t.includes(I)){const C=_[D];removeHandler(n,y,o,C.callable,C.delegationSelector)}}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const i=getjQuery(),s=getTypeEvent(t),a=t!==s;let o=null,N=!0,y=!0,_=!1;a&&i&&(o=i.Event(t,e),i(n).trigger(o),N=!o.isPropagationStopped(),y=!o.isImmediatePropagationStopped(),_=o.isDefaultPrevented());let l=new Event(t,{bubbles:N,cancelable:!0});return l=hydrateObj(l,e),_&&l.preventDefault(),y&&n.dispatchEvent(l),l.defaultPrevented&&o&&o.preventDefault(),l}};function hydrateObj(n,t){for(const[e,i]of Object.entries(t||{}))try{n[e]=i}catch{Object.defineProperty(n,e,{configurable:!0,get(){return i}})}return n}const elementMap=new Map,Data={set(n,t,e){elementMap.has(n)||elementMap.set(n,new Map);const i=elementMap.get(n);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,e)},get(n,t){return elementMap.has(n)&&elementMap.get(n).get(t)||null},remove(n,t){if(!elementMap.has(n))return;const e=elementMap.get(n);e.delete(t),e.size===0&&elementMap.delete(n)}};function normalizeData(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function normalizeDataKey(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Manipulator={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${normalizeDataKey(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${normalizeDataKey(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of e){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=normalizeData(n.dataset[i])}return t},getDataAttribute(n,t){return normalizeData(n.getAttribute(`data-bs-${normalizeDataKey(t)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=isElement(e)?Manipulator.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...isElement(e)?Manipulator.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const i of Object.keys(e)){const s=e[i],a=t[i],o=isElement(a)?"element":toType(a);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}}const VERSION$1="5.2.3";class BaseComponent extends Config{constructor(t,e){super(),t=getElement(t),t&&(this._element=t,this._config=this._getConfig(e),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){executeAfterTransition(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Data.get(getElement(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return VERSION$1}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const enableDismissTrigger=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,i=n.NAME;EventHandler.on(document,e,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),isDisabled(this))return;const a=getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(a)[t]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const e=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Alert.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(t){return this.each(function(){const e=Button.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,n=>{n.preventDefault();const t=n.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(t).toggle()});defineJQueryPlugin(Button);const SelectorEngine={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let i=n.parentNode.closest(t);for(;i;)e.push(i),i=i.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!isDisabled(e)&&isVisible(e))}},NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(t,e){super(),this._element=t,!(!t||!Swipe.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=SWIPE_THRESHOLD)return;const e=t/this._deltaX;this._deltaX=0,e&&execute(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,t=>this._start(t)),EventHandler.on(this._element,EVENT_POINTERUP,t=>this._end(t)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,t=>this._start(t)),EventHandler.on(this._element,EVENT_TOUCHMOVE,t=>this._move(t)),EventHandler.on(this._element,EVENT_TOUCHEND,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===POINTER_TYPE_PEN||t.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const s=t>i?ORDER_NEXT:ORDER_PREV;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,t=>this._keydown(t)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(i,EVENT_DRAG_START,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=KEY_TO_DIRECTION[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);e.classList.remove(CLASS_NAME_ACTIVE$2),e.removeAttribute("aria-current");const i=SelectorEngine.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(CLASS_NAME_ACTIVE$2),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),s=t===ORDER_NEXT,a=e||getNextActiveElement(this._getItems(),i,s,this._config.wrap);if(a===i)return;const o=this._getItemIndex(a),N=C=>EventHandler.trigger(this._element,C,{relatedTarget:a,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(N(EVENT_SLIDE).defaultPrevented||!i||!a)return;const _=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=a;const l=s?CLASS_NAME_START:CLASS_NAME_END,D=s?CLASS_NAME_NEXT:CLASS_NAME_PREV;a.classList.add(D),reflow(a),i.classList.add(l),a.classList.add(l);const I=()=>{a.classList.remove(l,D),a.classList.add(CLASS_NAME_ACTIVE$2),i.classList.remove(CLASS_NAME_ACTIVE$2,D,l),this._isSliding=!1,N(EVENT_SLID)};this._queueCallback(I,i,this._isAnimated()),_&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return isRTL()?t===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:t===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(t){return isRTL()?t===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:t===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(t){return this.each(function(){const e=Carousel.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(n){const t=getElementFromSelector(this);if(!t||!t.classList.contains(CLASS_NAME_CAROUSEL))return;n.preventDefault();const e=Carousel.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){e.to(i),e._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const n=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const t of n)Carousel.getOrCreateInstance(t)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const s of i){const a=getSelectorFromElement(s),o=SelectorEngine.find(a).filter(N=>N===this._element);a!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(N=>N!==this._element).map(N=>Collapse.getOrCreateInstance(N,{toggle:!1}))),t.length&&t[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const N of t)N.hide();const i=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[i]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const s of this._triggerArray){const a=getElementFromSelector(s);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[e]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=getElement(t.parent),t}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const e of t){const i=getElementFromSelector(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(t){const e=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(t,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(CLASS_NAME_COLLAPSED,!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const i=Collapse.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();const t=getSelectorFromElement(this),e=SelectorEngine.find(t);for(const i of e)Collapse.getOrCreateInstance(i,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const i of[].concat(...document.body.children))EventHandler.on(i,"mouseover",noop$1);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,t)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))EventHandler.off(i,"mouseover",noop$1);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!isElement(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:isElement(this._config.reference)?t=getElement(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=createPopper(t,this._menu,e)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const t=this._parent;if(t.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(t.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(t.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(t.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(CLASS_NAME_DROPUP)?e?PLACEMENT_TOPEND:PLACEMENT_TOP:e?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const i=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(s=>isVisible(s));i.length&&getNextActiveElement(i,e,t===ARROW_DOWN_KEY$1,!i.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=Dropdown.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===RIGHT_MOUSE_BUTTON||t.type==="keyup"&&t.key!==TAB_KEY$1)return;const e=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const i of e){const s=Dropdown.getInstance(i);if(!s||s._config.autoClose===!1)continue;const a=t.composedPath(),o=a.includes(s._menu);if(a.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const N={relatedTarget:s._element};t.type==="click"&&(N.clickEvent=t),s._completeHide(N)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=t.key===ESCAPE_KEY$2,s=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(t.key);if(!s&&!i||e&&!i)return;t.preventDefault();const a=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,t.delegateTarget.parentNode),o=Dropdown.getOrCreateInstance(a);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),a.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(n){n.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,e=>e+t),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,e=>e+t),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const s=this.getWidth(),a=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const N=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${i(Number.parseFloat(N))}px`)};this._applyManipulationCallback(t,a)}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&Manipulator.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){const i=s=>{const a=Manipulator.getDataAttribute(s,e);if(a===null){s.style.removeProperty(e);return}Manipulator.removeDataAttribute(s,e),s.style.setProperty(e,a)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,e){if(isElement(t)){e(t);return}for(const i of SelectorEngine.find(t,this._element))e(i)}}const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(t){if(!this._config.isVisible){execute(t);return}this._append();const e=this._getElement();this._config.isAnimated&&reflow(e),e.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(t)})}hide(t){if(!this._config.isVisible){execute(t);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(t)})}dispose(){this._isAppended&&(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(CLASS_NAME_FADE$4),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=getElement(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),EventHandler.on(t,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){executeAfterTransition(t,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,t=>this._handleFocusin(t)),EventHandler.on(document,EVENT_KEYDOWN_TAB,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=SelectorEngine.focusableChildren(e);i.length===0?e.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===TAB_KEY&&(this._lastTabNavDirection=t.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(t,e){super(t,e),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])EventHandler.off(t,EVENT_KEY$4);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);e&&(e.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,t=>{if(t.key===ESCAPE_KEY$1){if(this._config.keyboard){t.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,t=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const s=isRTL()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!i&&t){const s=isRTL()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const i=Modal.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](e)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(n){const t=getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),EventHandler.one(t,EVENT_SHOW$4,s=>{s.defaultPrevented||EventHandler.one(t,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const e=SelectorEngine.findOne(OPEN_SELECTOR$1);e&&Modal.getInstance(e).hide(),Modal.getOrCreateInstance(t).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const e=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},e=!!this._config.backdrop;return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,t=>{if(t.key===ESCAPE_KEY){if(!this._config.keyboard){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()}})}static jQueryInterface(t){return this.each(function(){const e=Offcanvas.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(n){const t=getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),isDisabled(this))return;EventHandler.one(t,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const e=SelectorEngine.findOne(OPEN_SELECTOR);e&&e!==t&&Offcanvas.getInstance(e).hide(),Offcanvas.getOrCreateInstance(t).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const n of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(n).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const n of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Offcanvas.getOrCreateInstance(n).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,allowedAttribute=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?uriAttributes.has(e)?!!(SAFE_URL_PATTERN.test(n.nodeValue)||DATA_URL_PATTERN.test(n.nodeValue)):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(e))},DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function sanitizeHtml(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const s=new window.DOMParser().parseFromString(n,"text/html"),a=[].concat(...s.body.querySelectorAll("*"));for(const o of a){const N=o.nodeName.toLowerCase();if(!Object.keys(t).includes(N)){o.remove();continue}const y=[].concat(...o.attributes),_=[].concat(t["*"]||[],t[N]||[]);for(const l of y)allowedAttribute(l,_)||o.removeAttribute(l.nodeName)}return s.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,a]of Object.entries(this._config.content))this._setContent(t,a,s);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},DefaultContentType)}_setContent(t,e,i){const s=SelectorEngine.findOne(i,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(isElement(e)){this._putElementInTemplate(getElement(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?sanitizeHtml(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return typeof t=="function"?t(this):t}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(t,e){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),i=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(s),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper=this._createPopper(s),s.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))EventHandler.on(N,"mouseover",noop$1);const o=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;if(this._getTipElement().classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))EventHandler.off(s,"mouseover",noop$1);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=getUID(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(CLASS_NAME_FADE$2),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new TemplateFactory({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(t){const e=typeof this._config.placement=="function"?this._config.placement.call(this,t,this._element):this._config.placement,i=AttachmentMap[e.toUpperCase()];return createPopper(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(e!==TRIGGER_MANUAL){const i=e===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),s=e===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,i,this._config.selector,a=>{const o=this._initializeOnDelegatedTarget(a);o._activeTrigger[a.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,o._enter()}),EventHandler.on(this._element,s,this._config.selector,a=>{const o=this._initializeOnDelegatedTarget(a);o._activeTrigger[a.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=o._element.contains(a.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Manipulator.getDataAttributes(this._element);for(const i of Object.keys(e))DISALLOWED_ATTRIBUTES.has(i)&&delete e[i];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:getElement(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Tooltip.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=Popover.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=getElement(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,a=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const N=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&N){if(i(o),!s)return;continue}!a&&!N&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const e of t){if(!e.hash||isDisabled(e))continue;const i=SelectorEngine.findOne(e.hash,this._element);isVisible(i)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(t),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,t.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const e of SelectorEngine.parents(t,SELECTOR_NAV_LIST_GROUP))for(const i of SelectorEngine.prev(e,SELECTOR_LINK_ITEMS))i.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(t){t.classList.remove(CLASS_NAME_ACTIVE$1);const e=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,t);for(const i of e)i.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(t){return this.each(function(){const e=ScrollSpy.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const n of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(n)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=":not(.dropdown-toggle)",SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(t){super(t),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,e=>this._keydown(e)))}static get NAME(){return NAME$1}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?EventHandler.trigger(e,EVENT_HIDE$1,{relatedTarget:t}):null;EventHandler.trigger(t,EVENT_SHOW$1,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(CLASS_NAME_ACTIVE),this._activate(getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(CLASS_NAME_SHOW$1);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),EventHandler.trigger(t,EVENT_SHOWN$1,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(CLASS_NAME_FADE$1))}_deactivate(t,e){if(!t)return;t.classList.remove(CLASS_NAME_ACTIVE),t.blur(),this._deactivate(getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(CLASS_NAME_SHOW$1);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),EventHandler.trigger(t,EVENT_HIDDEN$1,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(CLASS_NAME_FADE$1))}_keydown(t){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(t.key),i=getNextActiveElement(this._getChildren().filter(s=>!isDisabled(s)),t.target,e,!0);i&&(i.focus({preventScroll:!0}),Tab.getOrCreateInstance(i).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains(CLASS_DROPDOWN))return;const s=(a,o)=>{const N=SelectorEngine.findOne(a,i);N&&N.classList.toggle(o,e)};s(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),s(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(t){return t.matches(SELECTOR_INNER_ELEM)?t:SelectorEngine.findOne(SELECTOR_INNER_ELEM,t)}_getOuterElement(t){return t.closest(SELECTOR_OUTER)||t}static jQueryInterface(t){return this.each(function(){const e=Tab.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const n of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(n)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const e=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const e=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,t=>this._onInteraction(t,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,t=>this._onInteraction(t,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,t=>this._onInteraction(t,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Toast.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);function bind(n,t){return function(){return n.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>t=>{const e=toString.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),t=>kindOf(t)===n),typeOfTest=n=>t=>typeof t===n,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&isArrayBuffer(n.buffer),t}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject=n=>{if(kindOf(n)!=="object")return!1;const t=getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject(n)&&isFunction(n.pipe),isFormData=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction(n.append)&&((t=kindOf(n))==="formdata"||t==="object"&&isFunction(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),isArray(n))for(i=0,s=n.length;i<s;i++)t.call(null,n[i],i,n);else{const a=e?Object.getOwnPropertyNames(n):Object.keys(n),o=a.length;let N;for(i=0;i<o;i++)N=a[i],t.call(null,n[N],N,n)}}function findKey(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,s;for(;i-- >0;)if(s=e[i],t===s.toLowerCase())return s;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge(){const{caseless:n}=isContextDefined(this)&&this||{},t={},e=(i,s)=>{const a=n&&findKey(t,s)||s;isPlainObject(t[a])&&isPlainObject(i)?t[a]=merge(t[a],i):isPlainObject(i)?t[a]=merge({},i):isArray(i)?t[a]=i.slice():t[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&forEach(arguments[i],e);return t}const extend=(n,t,e,{allOwnKeys:i}={})=>(forEach(t,(s,a)=>{e&&isFunction(s)?n[a]=bind(s,e):n[a]=s},{allOwnKeys:i}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},toFlatObject=(n,t,e,i)=>{let s,a,o;const N={};if(t=t||{},n==null)return t;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)o=s[a],(!i||i(o,n,t))&&!N[o]&&(t[o]=n[o],N[o]=!0);n=e!==!1&&getPrototypeOf(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},endsWith=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},toArray=n=>{if(!n)return null;if(isArray(n))return n;let t=n.length;if(!isNumber(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},isTypedArray=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const a=s.value;t.call(n,a[0],a[1])}},matchAll=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),hasOwnProperty=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};forEach(e,(s,a)=>{t(s,a,n)!==!1&&(i[a]=s)}),Object.defineProperties(n,i)},freezeMethods=n=>{reduceDescriptors(n,(t,e)=>{if(isFunction(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(isFunction(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(n,t)=>{const e={},i=s=>{s.forEach(a=>{e[a]=!0})};return isArray(n)?i(n):i(String(n).split(t)),e},noop=()=>{},toFiniteNumber=(n,t)=>(n=+n,Number.isFinite(n)?n:t),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(n=16,t=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function isSpecCompliantForm(n){return!!(n&&isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const toJSONObject=n=>{const t=new Array(10),e=(i,s)=>{if(isObject(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const a=isArray(i)?[]:{};return forEach(i,(o,N)=>{const y=e(o,s+1);!isUndefined(y)&&(a[N]=y)}),t[s]=void 0,a}}return i};return e(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject(n)||isFunction(n))&&isFunction(n.then)&&isFunction(n.catch),utils={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(n,t,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(n,t,e,i,s,a)=>{const o=Object.create(prototype$1);return utils.toFlatObject(n,o,function(y){return y!==Error.prototype},N=>N!=="isAxiosError"),AxiosError.call(o,n.message,t,e,i,s),o.cause=n,o.name=n.name,a&&Object.assign(o,a),o};const httpAdapter=null;function isVisitable(n){return utils.isPlainObject(n)||utils.isArray(n)}function removeBrackets(n){return utils.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,t,e){return n?n.concat(t).map(function(s,a){return s=removeBrackets(s),!e&&a?"["+s+"]":s}).join(e?".":""):t}function isFlatArray(n){return utils.isArray(n)&&!n.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData(n,t,e){if(!utils.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=utils.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,E){return!utils.isUndefined(E[b])});const i=e.metaTokens,s=e.visitor||l,a=e.dots,o=e.indexes,y=(e.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(t);if(!utils.isFunction(s))throw new TypeError("visitor must be a function");function _(A){if(A===null)return"";if(utils.isDate(A))return A.toISOString();if(!y&&utils.isBlob(A))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(A)||utils.isTypedArray(A)?y&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function l(A,b,E){let O=A;if(A&&!E&&typeof A=="object"){if(utils.endsWith(b,"{}"))b=i?b:b.slice(0,-2),A=JSON.stringify(A);else if(utils.isArray(A)&&isFlatArray(A)||(utils.isFileList(A)||utils.endsWith(b,"[]"))&&(O=utils.toArray(A)))return b=removeBrackets(b),O.forEach(function(M,S){!(utils.isUndefined(M)||M===null)&&t.append(o===!0?renderKey([b],S,a):o===null?b:b+"[]",_(M))}),!1}return isVisitable(A)?!0:(t.append(renderKey(E,b,a),_(A)),!1)}const D=[],I=Object.assign(predicates,{defaultVisitor:l,convertValue:_,isVisitable});function C(A,b){if(!utils.isUndefined(A)){if(D.indexOf(A)!==-1)throw Error("Circular reference detected in "+b.join("."));D.push(A),utils.forEach(A,function(O,x){(!(utils.isUndefined(O)||O===null)&&s.call(t,O,utils.isString(x)?x.trim():x,b,I))===!0&&C(O,b?b.concat(x):[x])}),D.pop()}}if(!utils.isObject(n))throw new TypeError("data must be an object");return C(n),t}function encode$1(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function AxiosURLSearchParams(n,t){this._pairs=[],n&&toFormData(n,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,e){this._pairs.push([t,e])};prototype.toString=function(t){const e=t?function(i){return t.call(this,i,encode$1)}:encode$1;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function encode(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,t,e){if(!t)return n;const i=e&&e.encode||encode,s=e&&e.serialize;let a;if(s?a=s(t,e):a=utils.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,e).toString(i),a){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class InterceptorManager{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils.forEach(this.handlers,function(i){i!==null&&t(i)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(n,t){return toFormData(n,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,i,s,a){return platform.isNode&&utils.isBuffer(e)?(this.append(i,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(n){return utils.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(n){const t={},e=Object.keys(n);let i;const s=e.length;let a;for(i=0;i<s;i++)a=e[i],t[a]=n[a];return t}function formDataToJSON(n){function t(e,i,s,a){let o=e[a++];const N=Number.isFinite(+o),y=a>=e.length;return o=!o&&utils.isArray(s)?s.length:o,y?(utils.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!N):((!s[o]||!utils.isObject(s[o]))&&(s[o]=[]),t(e,i,s[o],a)&&utils.isArray(s[o])&&(s[o]=arrayToObject(s[o])),!N)}if(utils.isFormData(n)&&utils.isFunction(n.entries)){const e={};return utils.forEachEntry(n,(i,s)=>{t(parsePropPath(i),s,e,0)}),e}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(n,t,e){if(utils.isString(n))try{return(t||JSON.parse)(n),utils.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(t,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,a=utils.isObject(t);if(a&&utils.isHTMLForm(t)&&(t=new FormData(t)),utils.isFormData(t))return s&&s?JSON.stringify(formDataToJSON(t)):t;if(utils.isArrayBuffer(t)||utils.isBuffer(t)||utils.isStream(t)||utils.isFile(t)||utils.isBlob(t))return t;if(utils.isArrayBufferView(t))return t.buffer;if(utils.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let N;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((N=utils.isFileList(t))||i.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return toFormData(N?{"files[]":t}:t,y&&new y,this.formSerializer)}}return a||s?(e.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const e=this.transitional||defaults.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(t&&utils.isString(t)&&(i&&!this.responseType||s)){const o=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(N){if(o)throw N.name==="SyntaxError"?AxiosError.from(N,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):N}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(t){defaults.headers[t]={}});utils.forEach(["post","put","patch"],function(t){defaults.headers[t]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const t={};let e,i,s;return n&&n.split(`
`).forEach(function(o){s=o.indexOf(":"),e=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!e||t[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,t,e,i,s){if(utils.isFunction(i))return i.call(this,t,e);if(s&&(t=e),!!utils.isString(t)){if(utils.isString(i))return t.indexOf(i)!==-1;if(utils.isRegExp(i))return i.test(t)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function buildAccessors(n,t){const e=utils.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(s,a,o){return this[i].call(this,t,s,a,o)},configurable:!0})})}class AxiosHeaders{constructor(t){t&&this.set(t)}set(t,e,i){const s=this;function a(N,y,_){const l=normalizeHeader(y);if(!l)throw new Error("header name must be a non-empty string");const D=utils.findKey(s,l);(!D||s[D]===void 0||_===!0||_===void 0&&s[D]!==!1)&&(s[D||y]=normalizeValue(N))}const o=(N,y)=>utils.forEach(N,(_,l)=>a(_,l,y));return utils.isPlainObject(t)||t instanceof this.constructor?o(t,e):utils.isString(t)&&(t=t.trim())&&!isValidHeaderName(t)?o(parseHeaders(t),e):t!=null&&a(e,t,i),this}get(t,e){if(t=normalizeHeader(t),t){const i=utils.findKey(this,t);if(i){const s=this[i];if(!e)return s;if(e===!0)return parseTokens(s);if(utils.isFunction(e))return e.call(this,s,i);if(utils.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=normalizeHeader(t),t){const i=utils.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||matchHeaderValue(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let s=!1;function a(o){if(o=normalizeHeader(o),o){const N=utils.findKey(i,o);N&&(!e||matchHeaderValue(i,i[N],N,e))&&(delete i[N],s=!0)}}return utils.isArray(t)?t.forEach(a):a(t),s}clear(t){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const a=e[i];(!t||matchHeaderValue(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const e=this,i={};return utils.forEach(this,(s,a)=>{const o=utils.findKey(i,a);if(o){e[o]=normalizeValue(s),delete e[a];return}const N=t?formatHeader(a):String(a).trim();N!==a&&delete e[a],e[N]=normalizeValue(s),i[N]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return utils.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=t&&utils.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[$internals]=this[$internals]={accessors:{}}).accessors,s=this.prototype;function a(o){const N=normalizeHeader(o);i[N]||(buildAccessors(s,o),i[N]=!0)}return utils.isArray(t)?t.forEach(a):a(t),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(n,t){const e=this||defaults$1,i=t||e,s=AxiosHeaders$1.from(i.headers);let a=i.data;return utils.forEach(n,function(N){a=N.call(e,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,t,e){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,t,e),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(e,i,s,a,o,N){const y=[];y.push(e+"="+encodeURIComponent(i)),utils.isNumber(s)&&y.push("expires="+new Date(s).toGMTString()),utils.isString(a)&&y.push("path="+a),utils.isString(o)&&y.push("domain="+o),N===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(e){const i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,t){return t?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n}function buildFullPath(n,t){return n&&!isAbsoluteURL(t)?combineURLs(n,t):t}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let i;function s(a){let o=a;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=s(window.location.href),function(o){const N=utils.isString(o)?s(o):o;return N.protocol===i.protocol&&N.host===i.host}}():function(){return function(){return!0}}();function parseProtocol(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function speedometer(n,t){n=n||10;const e=new Array(n),i=new Array(n);let s=0,a=0,o;return t=t!==void 0?t:1e3,function(y){const _=Date.now(),l=i[a];o||(o=_),e[s]=y,i[s]=_;let D=a,I=0;for(;D!==s;)I+=e[D++],D=D%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),_-o<t)return;const C=l&&_-l;return C?Math.round(I*1e3/C):void 0}}function progressEventReducer(n,t){let e=0;const i=speedometer(50,250);return s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,N=a-e,y=i(N),_=a<=o;e=a;const l={loaded:a,total:o,progress:o?a/o:void 0,bytes:N,rate:y||void 0,estimated:y&&o&&_?(o-a)/y:void 0,event:s};l[t?"download":"upload"]=!0,n(l)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(e,i){let s=n.data;const a=AxiosHeaders$1.from(n.headers).normalize(),o=n.responseType;let N;function y(){n.cancelToken&&n.cancelToken.unsubscribe(N),n.signal&&n.signal.removeEventListener("abort",N)}utils.isFormData(s)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let _=new XMLHttpRequest;if(n.auth){const C=n.auth.username||"",A=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";a.set("Authorization","Basic "+btoa(C+":"+A))}const l=buildFullPath(n.baseURL,n.url);_.open(n.method.toUpperCase(),buildURL(l,n.params,n.paramsSerializer),!0),_.timeout=n.timeout;function D(){if(!_)return;const C=AxiosHeaders$1.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),b={data:!o||o==="text"||o==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:C,config:n,request:_};settle(function(O){e(O),y()},function(O){i(O),y()},b),_=null}if("onloadend"in _?_.onloadend=D:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(D)},_.onabort=function(){_&&(i(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,_)),_=null)},_.onerror=function(){i(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,_)),_=null},_.ontimeout=function(){let A=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const b=n.transitional||transitionalDefaults;n.timeoutErrorMessage&&(A=n.timeoutErrorMessage),i(new AxiosError(A,b.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,_)),_=null},platform.isStandardBrowserEnv){const C=(n.withCredentials||isURLSameOrigin(l))&&n.xsrfCookieName&&cookies.read(n.xsrfCookieName);C&&a.set(n.xsrfHeaderName,C)}s===void 0&&a.setContentType(null),"setRequestHeader"in _&&utils.forEach(a.toJSON(),function(A,b){_.setRequestHeader(b,A)}),utils.isUndefined(n.withCredentials)||(_.withCredentials=!!n.withCredentials),o&&o!=="json"&&(_.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&_.addEventListener("progress",progressEventReducer(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",progressEventReducer(n.onUploadProgress)),(n.cancelToken||n.signal)&&(N=C=>{_&&(i(!C||C.type?new CanceledError(null,n,_):C),_.abort(),_=null)},n.cancelToken&&n.cancelToken.subscribe(N),n.signal&&(n.signal.aborted?N():n.signal.addEventListener("abort",N)));const I=parseProtocol(l);if(I&&platform.protocols.indexOf(I)===-1){i(new AxiosError("Unsupported protocol "+I+":",AxiosError.ERR_BAD_REQUEST,n));return}_.send(s||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const adapters={getAdapter:n=>{n=utils.isArray(n)?n:[n];const{length:t}=n;let e,i;for(let s=0;s<t&&(e=n[s],!(i=utils.isString(e)?knownAdapters[e.toLowerCase()]:e));s++);if(!i)throw i===!1?new AxiosError(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!utils.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults$1.adapter)(n).then(function(i){return throwIfCancellationRequested(n),i.data=transformData.call(n,n.transformResponse,i),i.headers=AxiosHeaders$1.from(i.headers),i},function(i){return isCancel(i)||(throwIfCancellationRequested(n),i&&i.response&&(i.response.data=transformData.call(n,n.transformResponse,i.response),i.response.headers=AxiosHeaders$1.from(i.response.headers))),Promise.reject(i)})}const headersToObject=n=>n instanceof AxiosHeaders$1?n.toJSON():n;function mergeConfig(n,t){t=t||{};const e={};function i(_,l,D){return utils.isPlainObject(_)&&utils.isPlainObject(l)?utils.merge.call({caseless:D},_,l):utils.isPlainObject(l)?utils.merge({},l):utils.isArray(l)?l.slice():l}function s(_,l,D){if(utils.isUndefined(l)){if(!utils.isUndefined(_))return i(void 0,_,D)}else return i(_,l,D)}function a(_,l){if(!utils.isUndefined(l))return i(void 0,l)}function o(_,l){if(utils.isUndefined(l)){if(!utils.isUndefined(_))return i(void 0,_)}else return i(void 0,l)}function N(_,l,D){if(D in t)return i(_,l);if(D in n)return i(void 0,_)}const y={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:N,headers:(_,l)=>s(headersToObject(_),headersToObject(l),!0)};return utils.forEach(Object.keys(Object.assign({},n,t)),function(l){const D=y[l]||s,I=D(n[l],t[l],l);utils.isUndefined(I)&&D!==N||(e[l]=I)}),e}const VERSION="1.4.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{validators$1[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function(t,e,i){function s(a,o){return"[Axios v"+VERSION+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return(a,o,N)=>{if(t===!1)throw new AxiosError(s(o," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(s(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,N):!0}};function assertOptions(n,t,e){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const a=i[s],o=t[a];if(o){const N=n[a],y=N===void 0||o(N,a,n);if(y!==!0)throw new AxiosError("option "+a+" must be "+y,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+a,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=mergeConfig(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:a}=e;i!==void 0&&validator.assertOptions(i,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils.isFunction(s)?e.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o;o=a&&utils.merge(a.common,a[e.method]),o&&utils.forEach(["delete","get","head","post","put","patch","common"],A=>{delete a[A]}),e.headers=AxiosHeaders$1.concat(o,a);const N=[];let y=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(e)===!1||(y=y&&b.synchronous,N.unshift(b.fulfilled,b.rejected))});const _=[];this.interceptors.response.forEach(function(b){_.push(b.fulfilled,b.rejected)});let l,D=0,I;if(!y){const A=[dispatchRequest.bind(this),void 0];for(A.unshift.apply(A,N),A.push.apply(A,_),I=A.length,l=Promise.resolve(e);D<I;)l=l.then(A[D++],A[D++]);return l}I=N.length;let C=e;for(D=0;D<I;){const A=N[D++],b=N[D++];try{C=A(C)}catch(E){b.call(this,E);break}}try{l=dispatchRequest.call(this,C)}catch(A){return Promise.reject(A)}for(D=0,I=_.length;D<I;)l=l.then(_[D++],_[D++]);return l}getUri(t){t=mergeConfig(this.defaults,t);const e=buildFullPath(t.baseURL,t.url);return buildURL(e,t.params,t.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(e,i){return this.request(mergeConfig(i||{},{method:t,url:e,data:(i||{}).data}))}});utils.forEach(["post","put","patch"],function(t){function e(i){return function(a,o,N){return this.request(mergeConfig(N||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Axios.prototype[t]=e(),Axios.prototype[t+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const o=new Promise(N=>{i.subscribe(N),a=N}).then(s);return o.cancel=function(){i.unsubscribe(a)},o},t(function(a,o,N){i.reason||(i.reason=new CanceledError(a,o,N),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new CancelToken(function(s){t=s}),cancel:t}}}const CancelToken$1=CancelToken;function spread(n){return function(e){return n.apply(null,e)}}function isAxiosError(n){return utils.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,t])=>{HttpStatusCode[t]=n});const HttpStatusCode$1=HttpStatusCode;function createInstance(n){const t=new Axios$1(n),e=bind(Axios$1.prototype.request,t);return utils.extend(e,Axios$1.prototype,t,{allOwnKeys:!0}),utils.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return createInstance(mergeConfig(n,s))},e}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils.isHTMLForm(n)?new FormData(n):n);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;window.axios=axios$1;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),e}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,e){module.exports=e()})(globalThis,()=>(()=>{var __webpack_modules__=[,(n,t)=>{var Vt;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Q,t.bytesToString=Z,t.createValidAbsoluteUrl=ft,t.getModificationDate=Pt,t.getUuid=Ut,t.getVerbosityLevel=P,t.info=Y,t.isArrayBuffer=mt,t.isArrayEqual=bt,t.isNodeJS=void 0,t.normalizeUnicode=Gt,t.objectFromMap=pt,t.objectSize=ht,t.setVerbosityLevel=X,t.shadow=Et,t.string32=ot,t.stringToBytes=ut,t.stringToPDFString=yt,t.stringToUTF8String=at,t.unreachable=V,t.utf8StringToString=it,t.warn=H;const e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=e;const i=[1,0,0,1,0,0];t.IDENTITY_MATRIX=i;const s=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=s;const a=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=a;const o=1.35;t.LINE_FACTOR=o;const N=.35;t.LINE_DESCENT_FACTOR=N;const y=N/o;t.BASELINE_FACTOR=y;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=_;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=l;const D="pdfjs_internal_editor_";t.AnnotationEditorPrefix=D;const I={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=I;const C={RESIZE:1,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=C;const A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=A;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=b;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=E;const O={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=O;const x={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=x;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=M;const S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=S;const u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=u;const p={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=p;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=k;const w={O:"PageOpen",C:"PageClose"};t.PageActionEventType=w;const h={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=h;const g={NONE:0,BINARY:1};t.CMapCompressionType=g;const f={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=f;const B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=B;let U=h.WARNINGS;function X(dt){Number.isInteger(dt)&&(U=dt)}function P(){return U}function Y(dt){U>=h.INFOS&&console.log(`Info: ${dt}`)}function H(dt){U>=h.WARNINGS&&console.log(`Warning: ${dt}`)}function V(dt){throw new Error(dt)}function Q(dt,tt){dt||V(tt)}function st(dt){switch(dt==null?void 0:dt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ft(dt,tt=null,et=null){if(!dt)return null;try{if(et&&typeof dt=="string"){if(et.addDefaultProtocol&&dt.startsWith("www.")){const Bt=dt.match(/\./g);(Bt==null?void 0:Bt.length)>=2&&(dt=`http://${dt}`)}if(et.tryConvertEncoding)try{dt=at(dt)}catch{}}const Ct=tt?new URL(dt,tt):new URL(dt);if(st(Ct))return Ct}catch{}return null}function Et(dt,tt,et,Ct=!1){return Object.defineProperty(dt,tt,{value:et,enumerable:!Ct,configurable:!0,writable:!1}),et}const W=function(){function tt(et,Ct){this.constructor===tt&&V("Cannot initialize BaseException."),this.message=et,this.name=Ct}return tt.prototype=new Error,tt.constructor=tt,tt}();t.BaseException=W;class d extends W{constructor(tt,et){super(tt,"PasswordException"),this.code=et}}t.PasswordException=d;class c extends W{constructor(tt,et){super(tt,"UnknownErrorException"),this.details=et}}t.UnknownErrorException=c;class R extends W{constructor(tt){super(tt,"InvalidPDFException")}}t.InvalidPDFException=R;class j extends W{constructor(tt){super(tt,"MissingPDFException")}}t.MissingPDFException=j;class $ extends W{constructor(tt,et){super(tt,"UnexpectedResponseException"),this.status=et}}t.UnexpectedResponseException=$;class G extends W{constructor(tt){super(tt,"FormatError")}}t.FormatError=G;class z extends W{constructor(tt){super(tt,"AbortException")}}t.AbortException=z;function Z(dt){(typeof dt!="object"||(dt==null?void 0:dt.length)===void 0)&&V("Invalid argument for bytesToString");const tt=dt.length,et=8192;if(tt<et)return String.fromCharCode.apply(null,dt);const Ct=[];for(let Bt=0;Bt<tt;Bt+=et){const Lt=Math.min(Bt+et,tt),Kt=dt.subarray(Bt,Lt);Ct.push(String.fromCharCode.apply(null,Kt))}return Ct.join("")}function ut(dt){typeof dt!="string"&&V("Invalid argument for stringToBytes");const tt=dt.length,et=new Uint8Array(tt);for(let Ct=0;Ct<tt;++Ct)et[Ct]=dt.charCodeAt(Ct)&255;return et}function ot(dt){return String.fromCharCode(dt>>24&255,dt>>16&255,dt>>8&255,dt&255)}function ht(dt){return Object.keys(dt).length}function pt(dt){const tt=Object.create(null);for(const[et,Ct]of dt)tt[et]=Ct;return tt}function Tt(){const dt=new Uint8Array(4);return dt[0]=1,new Uint32Array(dt.buffer,0,1)[0]===1}function At(){try{return new Function(""),!0}catch{return!1}}class xt{static get isLittleEndian(){return Et(this,"isLittleEndian",Tt())}static get isEvalSupported(){return Et(this,"isEvalSupported",At())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Et(this,"platform",{isWin:!1,isMac:!1}):Et(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=xt;const Ht=[...Array(256).keys()].map(dt=>dt.toString(16).padStart(2,"0"));class vt{static makeHexColor(tt,et,Ct){return`#${Ht[tt]}${Ht[et]}${Ht[Ct]}`}static scaleMinMax(tt,et){let Ct;tt[0]?(tt[0]<0&&(Ct=et[0],et[0]=et[1],et[1]=Ct),et[0]*=tt[0],et[1]*=tt[0],tt[3]<0&&(Ct=et[2],et[2]=et[3],et[3]=Ct),et[2]*=tt[3],et[3]*=tt[3]):(Ct=et[0],et[0]=et[2],et[2]=Ct,Ct=et[1],et[1]=et[3],et[3]=Ct,tt[1]<0&&(Ct=et[2],et[2]=et[3],et[3]=Ct),et[2]*=tt[1],et[3]*=tt[1],tt[2]<0&&(Ct=et[0],et[0]=et[1],et[1]=Ct),et[0]*=tt[2],et[1]*=tt[2]),et[0]+=tt[4],et[1]+=tt[4],et[2]+=tt[5],et[3]+=tt[5]}static transform(tt,et){return[tt[0]*et[0]+tt[2]*et[1],tt[1]*et[0]+tt[3]*et[1],tt[0]*et[2]+tt[2]*et[3],tt[1]*et[2]+tt[3]*et[3],tt[0]*et[4]+tt[2]*et[5]+tt[4],tt[1]*et[4]+tt[3]*et[5]+tt[5]]}static applyTransform(tt,et){const Ct=tt[0]*et[0]+tt[1]*et[2]+et[4],Bt=tt[0]*et[1]+tt[1]*et[3]+et[5];return[Ct,Bt]}static applyInverseTransform(tt,et){const Ct=et[0]*et[3]-et[1]*et[2],Bt=(tt[0]*et[3]-tt[1]*et[2]+et[2]*et[5]-et[4]*et[3])/Ct,Lt=(-tt[0]*et[1]+tt[1]*et[0]+et[4]*et[1]-et[5]*et[0])/Ct;return[Bt,Lt]}static getAxialAlignedBoundingBox(tt,et){const Ct=this.applyTransform(tt,et),Bt=this.applyTransform(tt.slice(2,4),et),Lt=this.applyTransform([tt[0],tt[3]],et),Kt=this.applyTransform([tt[2],tt[1]],et);return[Math.min(Ct[0],Bt[0],Lt[0],Kt[0]),Math.min(Ct[1],Bt[1],Lt[1],Kt[1]),Math.max(Ct[0],Bt[0],Lt[0],Kt[0]),Math.max(Ct[1],Bt[1],Lt[1],Kt[1])]}static inverseTransform(tt){const et=tt[0]*tt[3]-tt[1]*tt[2];return[tt[3]/et,-tt[1]/et,-tt[2]/et,tt[0]/et,(tt[2]*tt[5]-tt[4]*tt[3])/et,(tt[4]*tt[1]-tt[5]*tt[0])/et]}static singularValueDecompose2dScale(tt){const et=[tt[0],tt[2],tt[1],tt[3]],Ct=tt[0]*et[0]+tt[1]*et[2],Bt=tt[0]*et[1]+tt[1]*et[3],Lt=tt[2]*et[0]+tt[3]*et[2],Kt=tt[2]*et[1]+tt[3]*et[3],Xt=(Ct+Kt)/2,v=Math.sqrt((Ct+Kt)**2-4*(Ct*Kt-Lt*Bt))/2,J=Xt+v||1,gt=Xt-v||1;return[Math.sqrt(J),Math.sqrt(gt)]}static normalizeRect(tt){const et=tt.slice(0);return tt[0]>tt[2]&&(et[0]=tt[2],et[2]=tt[0]),tt[1]>tt[3]&&(et[1]=tt[3],et[3]=tt[1]),et}static intersect(tt,et){const Ct=Math.max(Math.min(tt[0],tt[2]),Math.min(et[0],et[2])),Bt=Math.min(Math.max(tt[0],tt[2]),Math.max(et[0],et[2]));if(Ct>Bt)return null;const Lt=Math.max(Math.min(tt[1],tt[3]),Math.min(et[1],et[3])),Kt=Math.min(Math.max(tt[1],tt[3]),Math.max(et[1],et[3]));return Lt>Kt?null:[Ct,Lt,Bt,Kt]}static bezierBoundingBox(tt,et,Ct,Bt,Lt,Kt,Xt,v){const J=[],gt=[[],[]];let ct,T,m,F,L,K,rt,_t;for(let Ft=0;Ft<2;++Ft){if(Ft===0?(T=6*tt-12*Ct+6*Lt,ct=-3*tt+9*Ct-9*Lt+3*Xt,m=3*Ct-3*tt):(T=6*et-12*Bt+6*Kt,ct=-3*et+9*Bt-9*Kt+3*v,m=3*Bt-3*et),Math.abs(ct)<1e-12){if(Math.abs(T)<1e-12)continue;F=-m/T,0<F&&F<1&&J.push(F);continue}rt=T*T-4*m*ct,_t=Math.sqrt(rt),!(rt<0)&&(L=(-T+_t)/(2*ct),0<L&&L<1&&J.push(L),K=(-T-_t)/(2*ct),0<K&&K<1&&J.push(K))}let Rt=J.length,Nt;const St=Rt;for(;Rt--;)F=J[Rt],Nt=1-F,gt[0][Rt]=Nt*Nt*Nt*tt+3*Nt*Nt*F*Ct+3*Nt*F*F*Lt+F*F*F*Xt,gt[1][Rt]=Nt*Nt*Nt*et+3*Nt*Nt*F*Bt+3*Nt*F*F*Kt+F*F*F*v;return gt[0][St]=tt,gt[1][St]=et,gt[0][St+1]=Xt,gt[1][St+1]=v,gt[0].length=gt[1].length=St+2,[Math.min(...gt[0]),Math.min(...gt[1]),Math.max(...gt[0]),Math.max(...gt[1])]}}t.Util=vt;const It=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function yt(dt){if(dt[0]>="ï"){let et;if(dt[0]==="þ"&&dt[1]==="ÿ"?et="utf-16be":dt[0]==="ÿ"&&dt[1]==="þ"?et="utf-16le":dt[0]==="ï"&&dt[1]==="»"&&dt[2]==="¿"&&(et="utf-8"),et)try{const Ct=new TextDecoder(et,{fatal:!0}),Bt=ut(dt);return Ct.decode(Bt)}catch(Ct){H(`stringToPDFString: "${Ct}".`)}}const tt=[];for(let et=0,Ct=dt.length;et<Ct;et++){const Bt=It[dt.charCodeAt(et)];tt.push(Bt?String.fromCharCode(Bt):dt.charAt(et))}return tt.join("")}function at(dt){return decodeURIComponent(escape(dt))}function it(dt){return unescape(encodeURIComponent(dt))}function mt(dt){return typeof dt=="object"&&(dt==null?void 0:dt.byteLength)!==void 0}function bt(dt,tt){if(dt.length!==tt.length)return!1;for(let et=0,Ct=dt.length;et<Ct;et++)if(dt[et]!==tt[et])return!1;return!0}function Pt(dt=new Date){return[dt.getUTCFullYear().toString(),(dt.getUTCMonth()+1).toString().padStart(2,"0"),dt.getUTCDate().toString().padStart(2,"0"),dt.getUTCHours().toString().padStart(2,"0"),dt.getUTCMinutes().toString().padStart(2,"0"),dt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){q(this,Vt,!1);this.promise=new Promise((tt,et)=>{this.resolve=Ct=>{lt(this,Vt,!0),tt(Ct)},this.reject=Ct=>{lt(this,Vt,!0),et(Ct)}})}get settled(){return r(this,Vt)}}Vt=new WeakMap,t.PromiseCapability=Dt;let Wt=null,kt=null;function Gt(dt){return Wt||(Wt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,kt=new Map([["ﬅ","ſt"]])),dt.replaceAll(Wt,(tt,et,Ct)=>et?et.normalize("NFKC"):kt.get(Ct))}function Ut(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const dt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(dt);else for(let tt=0;tt<32;tt++)dt[tt]=Math.floor(Math.random()*255);return Z(dt)}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var n,e,i,s,ae,o,_e,y,_,l,D,I,C,A,b,E,Oe,x,M,Re,u,p;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(w){if(typeof w=="string"||w instanceof URL?w={url:w}:(0,_util.isArrayBuffer)(w)&&(w={data:w}),typeof w!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!w.url&&!w.data&&!w.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:g}=h,f=w.url?getUrlProp(w.url):null,B=w.data?getDataProp(w.data):null,U=w.httpHeaders||null,X=w.withCredentials===!0,P=w.password??null,Y=w.range instanceof PDFDataRangeTransport?w.range:null,H=Number.isInteger(w.rangeChunkSize)&&w.rangeChunkSize>0?w.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=w.worker instanceof PDFWorker?w.worker:null;const Q=w.verbosity,st=typeof w.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(w.docBaseUrl)?w.docBaseUrl:null,ft=typeof w.cMapUrl=="string"?w.cMapUrl:null,Et=w.cMapPacked!==!1,W=w.CMapReaderFactory||DefaultCMapReaderFactory,d=typeof w.standardFontDataUrl=="string"?w.standardFontDataUrl:null,c=w.StandardFontDataFactory||DefaultStandardFontDataFactory,R=w.stopAtErrors!==!0,j=Number.isInteger(w.maxImageSize)&&w.maxImageSize>-1?w.maxImageSize:-1,$=w.isEvalSupported!==!1,G=typeof w.isOffscreenCanvasSupported=="boolean"?w.isOffscreenCanvasSupported:!_util.isNodeJS,z=Number.isInteger(w.canvasMaxAreaInBytes)?w.canvasMaxAreaInBytes:-1,Z=typeof w.disableFontFace=="boolean"?w.disableFontFace:_util.isNodeJS,ut=w.fontExtraProperties===!0,ot=w.enableXfa===!0,ht=w.ownerDocument||globalThis.document,pt=w.disableRange===!0,Tt=w.disableStream===!0,At=w.disableAutoFetch===!0,xt=w.pdfBug===!0,Ht=Y?Y.length:w.length??NaN,vt=typeof w.useSystemFonts=="boolean"?w.useSystemFonts:!_util.isNodeJS&&!Z,It=typeof w.useWorkerFetch=="boolean"?w.useWorkerFetch:W===_display_utils.DOMCMapReaderFactory&&c===_display_utils.DOMStandardFontDataFactory&&ft&&d&&(0,_display_utils.isValidFetchUrl)(ft,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI),yt=w.canvasFactory||new DefaultCanvasFactory({ownerDocument:ht}),at=w.filterFactory||new DefaultFilterFactory({docId:g,ownerDocument:ht}),it=null;(0,_util.setVerbosityLevel)(Q);const mt={canvasFactory:yt,filterFactory:at};if(It||(mt.cMapReaderFactory=new W({baseUrl:ft,isCompressed:Et}),mt.standardFontDataFactory=new c({baseUrl:d})),!V){const Dt={verbosity:Q,port:_worker_options.GlobalWorkerOptions.workerPort};V=Dt.port?PDFWorker.fromPort(Dt):new PDFWorker(Dt),h._worker=V}const bt={docId:g,apiVersion:"3.9.179",data:B,password:P,disableAutoFetch:At,rangeChunkSize:H,length:Ht,docBaseUrl:st,enableXfa:ot,evaluatorOptions:{maxImageSize:j,disableFontFace:Z,ignoreErrors:R,isEvalSupported:$,isOffscreenCanvasSupported:G,canvasMaxAreaInBytes:z,fontExtraProperties:ut,useSystemFonts:vt,cMapUrl:It?ft:null,standardFontDataUrl:It?d:null}},Pt={ignoreErrors:R,isEvalSupported:$,disableFontFace:Z,fontExtraProperties:ut,enableXfa:ot,ownerDocument:ht,disableAutoFetch:At,pdfBug:xt,styleElement:it};return V.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Dt=_fetchDocument(V,bt),Wt=new Promise(function(kt){let Gt;Y?Gt=new _transport_stream.PDFDataTransportStream({length:Ht,initialData:Y.initialData,progressiveDone:Y.progressiveDone,contentDispositionFilename:Y.contentDispositionFilename,disableRange:pt,disableStream:Tt},Y):B||(Gt=(Vt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vt):(0,_display_utils.isValidFetchUrl)(Vt.url)?new _displayFetch_stream.PDFFetchStream(Vt):new _displayNetwork.PDFNetworkStream(Vt))({url:f,length:Ht,httpHeaders:U,withCredentials:X,rangeChunkSize:H,disableRange:pt,disableStream:Tt})),kt(Gt)});return Promise.all([Dt,Wt]).then(function([kt,Gt]){if(h.destroyed)throw new Error("Loading aborted");const Ut=new _message_handler.MessageHandler(g,kt,V.port),Vt=new WorkerTransport(Ut,h,Gt,Pt,mt);h._transport=Vt,Ut.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(w,h){if(w.destroyed)throw new Error("Worker was destroyed");const g=await w.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(w.destroyed)throw new Error("Worker was destroyed");return g}function getUrlProp(w){if(w instanceof URL)return w.href;try{return new URL(w,window.location).href}catch{if(_util.isNodeJS&&typeof w=="string")return w}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(w){if(_util.isNodeJS&&typeof Buffer<"u"&&w instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength)return w;if(typeof w=="string")return(0,_util.stringToBytes)(w);if(typeof w=="object"&&!isNaN(w==null?void 0:w.length)||(0,_util.isArrayBuffer)(w))return new Uint8Array(w);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ne(t,n)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h;this.destroyed=!0,await((h=this._transport)==null?void 0:h.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};n=new WeakMap,q(t,n,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,g,f=!1,B=null){this.length=h,this.initialData=g,this.progressiveDone=f,this.contentDispositionFilename=B,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,g){for(const f of this._rangeListeners)f(h,g)}onDataProgress(h,g){this._readyCapability.promise.then(()=>{for(const f of this._progressListeners)f(h,g)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const g of this._progressiveReadListeners)g(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,g){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,g){this._pdfInfo=h,this._transport=g}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,g,f,B=!1){q(this,s);q(this,o);q(this,e,null);q(this,i,!1);this._pageIndex=h,this._pageInfo=g,this._transport=f,this._stats=B?new _display_utils.StatTimer:null,this._pdfBug=B,this.commonObjs=f.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:g=this.rotate,offsetX:f=0,offsetY:B=0,dontFlip:U=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:g,offsetX:f,offsetY:B,dontFlip:U})}getAnnotations({intent:h="display"}={}){const g=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,g.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:g,intent:f="display",annotationMode:B=_util.AnnotationMode.ENABLE,transform:U=null,background:X=null,optionalContentConfigPromise:P=null,annotationCanvasMap:Y=null,pageColors:H=null,printAnnotationStorage:V=null}){var c,R;(c=this._stats)==null||c.time("Overall");const Q=this._transport.getRenderingIntent(f,B,V);lt(this,i,!1),nt(this,o,_e).call(this),P||(P=this._transport.getOptionalContentConfig());let st=this._intentStates.get(Q.cacheKey);st||(st=Object.create(null),this._intentStates.set(Q.cacheKey,st)),st.streamReaderCancelTimeout&&(clearTimeout(st.streamReaderCancelTimeout),st.streamReaderCancelTimeout=null);const ft=!!(Q.renderingIntent&_util.RenderingIntentFlag.PRINT);st.displayReadyCapability||(st.displayReadyCapability=new _util.PromiseCapability,st.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(Q));const Et=j=>{var $,G;st.renderTasks.delete(W),(this._maybeCleanupAfterRender||ft)&&lt(this,i,!0),nt(this,s,ae).call(this,!ft),j?(W.capability.reject(j),this._abortOperatorList({intentState:st,reason:j instanceof Error?j:new Error(j)})):W.capability.resolve(),($=this._stats)==null||$.timeEnd("Rendering"),(G=this._stats)==null||G.timeEnd("Overall")},W=new InternalRenderTask({callback:Et,params:{canvasContext:h,viewport:g,transform:U,background:X},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Y,operatorList:st.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ft,pdfBug:this._pdfBug,pageColors:H});(st.renderTasks||(st.renderTasks=new Set)).add(W);const d=W.task;return Promise.all([st.displayReadyCapability.promise,P]).then(([j,$])=>{var G;if(this.destroyed){Et();return}(G=this._stats)==null||G.time("Rendering"),W.initializeGraphics({transparency:j,optionalContentConfig:$}),W.operatorListChanged()}).catch(Et),d}getOperatorList({intent:h="display",annotationMode:g=_util.AnnotationMode.ENABLE,printAnnotationStorage:f=null}={}){var Y;function B(){X.operatorList.lastChunk&&(X.opListReadCapability.resolve(X.operatorList),X.renderTasks.delete(P))}const U=this._transport.getRenderingIntent(h,g,f,!0);let X=this._intentStates.get(U.cacheKey);X||(X=Object.create(null),this._intentStates.set(U.cacheKey,X));let P;return X.opListReadCapability||(P=Object.create(null),P.operatorListChanged=B,X.opListReadCapability=new _util.PromiseCapability,(X.renderTasks||(X.renderTasks=new Set)).add(P),X.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Y=this._stats)==null||Y.time("Page Request"),this._pumpOperatorList(U)),X.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:g=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:g===!0},{highWaterMark:100,size(B){return B.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(f=>_xfa_text.XfaText.textContent(f));const g=this.streamTextContent(h);return new Promise(function(f,B){function U(){X.read().then(function({value:Y,done:H}){if(H){f(P);return}Object.assign(P.styles,Y.styles),P.items.push(...Y.items),U()},B)}const X=g.getReader(),P={items:[],styles:Object.create(null)};U()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const g of this._intentStates.values())if(this._abortOperatorList({intentState:g,reason:new Error("Page was destroyed."),force:!0}),!g.opListReadCapability)for(const f of g.renderTasks)h.push(f.completed),f.cancel();return this.objs.clear(),lt(this,i,!1),nt(this,o,_e).call(this),Promise.all(h)}cleanup(h=!1){lt(this,i,!0);const g=nt(this,s,ae).call(this,!1);return h&&g&&this._stats&&(this._stats=new _display_utils.StatTimer),g}_startRenderPage(h,g){var B,U;const f=this._intentStates.get(g);f&&((B=this._stats)==null||B.timeEnd("Page Request"),(U=f.displayReadyCapability)==null||U.resolve(h))}_renderPageChunk(h,g){for(let f=0,B=h.length;f<B;f++)g.operatorList.fnArray.push(h.fnArray[f]),g.operatorList.argsArray.push(h.argsArray[f]);g.operatorList.lastChunk=h.lastChunk,g.operatorList.separateAnnots=h.separateAnnots;for(const f of g.renderTasks)f.operatorListChanged();h.lastChunk&&nt(this,s,ae).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:g,annotationStorageSerializable:f}){const{map:B,transfers:U}=f,P=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:g,annotationStorage:B},U).getReader(),Y=this._intentStates.get(g);Y.streamReader=P;const H=()=>{P.read().then(({value:V,done:Q})=>{if(Q){Y.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,Y),H())},V=>{if(Y.streamReader=null,!this._transport.destroyed){if(Y.operatorList){Y.operatorList.lastChunk=!0;for(const Q of Y.renderTasks)Q.operatorListChanged();nt(this,s,ae).call(this,!0)}if(Y.displayReadyCapability)Y.displayReadyCapability.reject(V);else if(Y.opListReadCapability)Y.opListReadCapability.reject(V);else throw V}})};H()}_abortOperatorList({intentState:h,reason:g,force:f=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!f){if(h.renderTasks.size>0)return;if(g instanceof _display_utils.RenderingCancelledException){let B=RENDERING_CANCELLED_TIMEOUT;g.extraDelay>0&&g.extraDelay<1e3&&(B+=g.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:g,force:!0})},B);return}}if(h.streamReader.cancel(new _util.AbortException(g.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[B,U]of this._intentStates)if(U===h){this._intentStates.delete(B);break}this.cleanup()}}}get stats(){return this._stats}}e=new WeakMap,i=new WeakMap,s=new WeakSet,ae=function(h=!1){if(nt(this,o,_e).call(this),!r(this,i)||this.destroyed)return!1;if(h)return lt(this,e,setTimeout(()=>{lt(this,e,null),nt(this,s,ae).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:g,operatorList:f}of this._intentStates.values())if(g.size>0||!f.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),lt(this,i,!1),!0},o=new WeakSet,_e=function(){r(this,e)&&(clearTimeout(r(this,e)),lt(this,e,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){q(this,y,new Set);q(this,_,Promise.resolve())}postMessage(h,g){const f={data:structuredClone(h,g?{transfer:g}:null)};r(this,_).then(()=>{for(const B of r(this,y))B.call(this,f)})}addEventListener(h,g){r(this,y).add(g)}removeEventListener(h,g){r(this,y).delete(g)}terminate(){r(this,y).clear()}}y=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const w=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;w&&(PDFWorkerUtil.fallbackWorkerSrc=w.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(w,h){let g;try{if(g=new URL(w),!g.origin||g.origin==="null")return!1}catch{return!1}const f=new URL(h,g);return g.origin===f.origin},PDFWorkerUtil.createCDNWrapper=function(w){const h=`importScripts("${w}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:w=null,port:h=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){if(h&&r(_PDFWorker,D).has(h))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=w,this.destroyed=!1,this.verbosity=g,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){r(_PDFWorker,D).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(w){this._port=w,this._messageHandler=new _message_handler.MessageHandler("main","worker",w),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:w}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,w)||(w=PDFWorkerUtil.createCDNWrapper(new URL(w,window.location).href));const h=new Worker(w),g=new _message_handler.MessageHandler("main","worker",h),f=()=>{h.removeEventListener("error",B),g.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},B=()=>{this._webWorker||f()};h.addEventListener("error",B),g.on("test",X=>{if(h.removeEventListener("error",B),this.destroyed){f();return}X?(this._messageHandler=g,this._port=h,this._webWorker=h,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),h.terminate())}),g.on("ready",X=>{if(h.removeEventListener("error",B),this.destroyed){f();return}try{U()}catch{this._setupFakeWorker()}});const U=()=>{const X=new Uint8Array;g.send("test",X,[X.buffer])};U();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(w=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const g=`fake${PDFWorkerUtil.fakeWorkerId++}`,f=new _message_handler.MessageHandler(g+"_worker",g,h);w.setup(f,h);const B=new _message_handler.MessageHandler(g,g+"_worker",h);this._messageHandler=B,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})}).catch(w=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${w.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),r(_PDFWorker,D).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(w){if(!(w!=null&&w.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return r(this,D).has(w.port)?r(this,D).get(w.port):new _PDFWorker(w)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var w;try{return((w=globalThis.pdfjsWorker)==null?void 0:w.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};D=new WeakMap,q(_PDFWorker,D,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,g,f,B,U){q(this,E);q(this,I,new Map);q(this,C,new Map);q(this,A,new Map);q(this,b,null);this.messageHandler=h,this.loadingTask=g,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:B.ownerDocument,styleElement:B.styleElement}),this._params=B,this.canvasFactory=U.canvasFactory,this.filterFactory=U.filterFactory,this.cMapReaderFactory=U.cMapReaderFactory,this.standardFontDataFactory=U.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=f,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,g=_util.AnnotationMode.ENABLE,f=null,B=!1){let U=_util.RenderingIntentFlag.DISPLAY,X=_annotation_storage.SerializableEmpty;switch(h){case"any":U=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":U=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(g){case _util.AnnotationMode.DISABLE:U+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:U+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:U+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,X=(U&_util.RenderingIntentFlag.PRINT&&f instanceof _annotation_storage.PrintAnnotationStorage?f:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${g}`)}return B&&(U+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:U,cacheKey:`${U}_${X.hash}`,annotationStorageSerializable:X}}destroy(){var f;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(f=r(this,b))==null||f.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const B of r(this,C).values())h.push(B._destroy());r(this,C).clear(),r(this,A).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const g=this.messageHandler.sendWithPromise("Terminate",null);return h.push(g),Promise.all(h).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),r(this,I).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:g}=this;h.on("GetReader",(f,B)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=U=>{this._lastProgress={loaded:U.loaded,total:U.total}},B.onPull=()=>{this._fullReader.read().then(function({value:U,done:X}){if(X){B.close();return}(0,_util.assert)(U instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{B.error(U)})},B.onCancel=U=>{this._fullReader.cancel(U),B.ready.catch(X=>{if(!this.destroyed)throw X})}}),h.on("ReaderHeadersReady",f=>{const B=new _util.PromiseCapability,U=this._fullReader;return U.headersReady.then(()=>{var X;(!U.isStreamingSupported||!U.isRangeSupported)&&(this._lastProgress&&((X=g.onProgress)==null||X.call(g,this._lastProgress)),U.onProgress=P=>{var Y;(Y=g.onProgress)==null||Y.call(g,{loaded:P.loaded,total:P.total})}),B.resolve({isStreamingSupported:U.isStreamingSupported,isRangeSupported:U.isRangeSupported,contentLength:U.contentLength})},B.reject),B.promise}),h.on("GetRangeReader",(f,B)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const U=this._networkStream.getRangeReader(f.begin,f.end);if(!U){B.close();return}B.onPull=()=>{U.read().then(function({value:X,done:P}){if(P){B.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{B.error(X)})},B.onCancel=X=>{U.cancel(X),B.ready.catch(P=>{if(!this.destroyed)throw P})}}),h.on("GetDoc",({pdfInfo:f})=>{this._numPages=f.numPages,this._htmlForXfa=f.htmlForXfa,delete f.htmlForXfa,g._capability.resolve(new PDFDocumentProxy(f,this))}),h.on("DocException",function(f){let B;switch(f.name){case"PasswordException":B=new _util.PasswordException(f.message,f.code);break;case"InvalidPDFException":B=new _util.InvalidPDFException(f.message);break;case"MissingPDFException":B=new _util.MissingPDFException(f.message);break;case"UnexpectedResponseException":B=new _util.UnexpectedResponseException(f.message,f.status);break;case"UnknownErrorException":B=new _util.UnknownErrorException(f.message,f.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}g._capability.reject(B)}),h.on("PasswordRequest",f=>{if(lt(this,b,new _util.PromiseCapability),g.onPassword){const B=U=>{U instanceof Error?r(this,b).reject(U):r(this,b).resolve({password:U})};try{g.onPassword(B,f.code)}catch(U){r(this,b).reject(U)}}else r(this,b).reject(new _util.PasswordException(f.message,f.code));return r(this,b).promise}),h.on("DataLoaded",f=>{var B;(B=g.onProgress)==null||B.call(g,{loaded:f.length,total:f.length}),this.downloadInfoCapability.resolve(f)}),h.on("StartRenderPage",f=>{if(this.destroyed)return;r(this,C).get(f.pageIndex)._startRenderPage(f.transparency,f.cacheKey)}),h.on("commonobj",([f,B,U])=>{var X;if(!this.destroyed&&!this.commonObjs.has(f))switch(B){case"Font":const P=this._params;if("error"in U){const V=U.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(f,V);break}const Y=P.pdfBug&&((X=globalThis.FontInspector)!=null&&X.enabled)?(V,Q)=>globalThis.FontInspector.fontAdded(V,Q):null,H=new _font_loader.FontFaceObject(U,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,inspectFont:Y});this.fontLoader.bind(H).catch(V=>h.sendWithPromise("FontFallback",{id:f})).finally(()=>{!P.fontExtraProperties&&H.data&&(H.data=null),this.commonObjs.resolve(f,H)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(f,U);break;default:throw new Error(`Got unknown common object type ${B}`)}}),h.on("obj",([f,B,U,X])=>{var Y;if(this.destroyed)return;const P=r(this,C).get(B);if(!P.objs.has(f))switch(U){case"Image":if(P.objs.resolve(f,X),X){let H;if(X.bitmap){const{width:V,height:Q}=X;H=V*Q*4}else H=((Y=X.data)==null?void 0:Y.length)||0;H>_util.MAX_IMAGE_SIZE_TO_CACHE&&(P._maybeCleanupAfterRender=!0)}break;case"Pattern":P.objs.resolve(f,X);break;default:throw new Error(`Got unknown object type ${U}`)}}),h.on("DocProgress",f=>{var B;this.destroyed||(B=g.onProgress)==null||B.call(g,{loaded:f.loaded,total:f.total})}),h.on("FetchBuiltInCMap",f=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(f):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",f=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(f):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var f;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:g}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((f=this._fullReader)==null?void 0:f.filename)??null},g).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const g=h-1,f=r(this,A).get(g);if(f)return f;const B=this.messageHandler.sendWithPromise("GetPage",{pageIndex:g}).then(U=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(g,U,this,this._params.pdfBug);return r(this,C).set(g,X),X});return r(this,A).set(g,B),B}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,g){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:g})}getFieldObjects(){return nt(this,E,Oe).call(this,"GetFieldObjects")}hasJSActions(){return nt(this,E,Oe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",g=r(this,I).get(h);if(g)return g;const f=this.messageHandler.sendWithPromise(h,null).then(B=>{var U,X;return{info:B[0],metadata:B[1]?new _metadata.Metadata(B[1]):null,contentDispositionFilename:((U=this._fullReader)==null?void 0:U.filename)??null,contentLength:((X=this._fullReader)==null?void 0:X.contentLength)??null}});return r(this,I).set(h,f),f}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const g of r(this,C).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),r(this,I).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:g}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:g})}}I=new WeakMap,C=new WeakMap,A=new WeakMap,b=new WeakMap,E=new WeakSet,Oe=function(h,g=null){const f=r(this,I).get(h);if(f)return f;const B=this.messageHandler.sendWithPromise(h,g);return r(this,I).set(h,B),B};class PDFObjects{constructor(){q(this,M);q(this,x,Object.create(null))}get(h,g=null){if(g){const B=nt(this,M,Re).call(this,h);return B.capability.promise.then(()=>g(B.data)),null}const f=r(this,x)[h];if(!(f!=null&&f.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return f.data}has(h){const g=r(this,x)[h];return(g==null?void 0:g.capability.settled)||!1}resolve(h,g=null){const f=nt(this,M,Re).call(this,h);f.data=g,f.capability.resolve()}clear(){var h;for(const g in r(this,x)){const{data:f}=r(this,x)[g];(h=f==null?void 0:f.bitmap)==null||h.close()}lt(this,x,Object.create(null))}}x=new WeakMap,M=new WeakSet,Re=function(h){const g=r(this,x)[h];return g||(r(this,x)[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){q(this,u,null);lt(this,u,h),this.onContinue=null}get promise(){return r(this,u).capability.promise}cancel(h=0){r(this,u).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=r(this,u).operatorList;if(!h)return!1;const{annotationCanvasMap:g}=r(this,u);return h.form||h.canvas&&(g==null?void 0:g.size)>0}}u=new WeakMap,exports.RenderTask=RenderTask;const k=class k{constructor({callback:h,params:g,objs:f,commonObjs:B,annotationCanvasMap:U,operatorList:X,pageIndex:P,canvasFactory:Y,filterFactory:H,useRequestAnimationFrame:V=!1,pdfBug:Q=!1,pageColors:st=null}){this.callback=h,this.params=g,this.objs=f,this.commonObjs=B,this.annotationCanvasMap=U,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=P,this.canvasFactory=Y,this.filterFactory=H,this._pdfBug=Q,this.pageColors=st,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=g.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:g}){var P,Y;if(this.cancelled)return;if(this._canvas){if(r(k,p).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r(k,p).add(this._canvas)}this._pdfBug&&((P=globalThis.StepperManager)!=null&&P.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:f,viewport:B,transform:U,background:X}=this.params;this.gfx=new _canvas.CanvasGraphics(f,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:g},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:U,viewport:B,transparency:h,background:X}),this.operatorListIdx=0,this.graphicsReady=!0,(Y=this.graphicsReadyCallback)==null||Y.call(this)}cancel(h=null,g=0){var f;this.running=!1,this.cancelled=!0,(f=this.gfx)==null||f.endDrawing(),this._canvas&&r(k,p).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,g))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&r(k,p).delete(this._canvas),this.callback())))}};p=new WeakMap,q(k,p,new WeakSet);let InternalRenderTask=k;const version="3.9.179";exports.version=version;const build="1ef6fbc52";exports.build=build},(n,t,e)=>{var _,l,D,sn,C;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=e(1),s=e(4),a=e(8);const o=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=o;class N{constructor(){q(this,D);q(this,_,!1);q(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(b,E){const O=r(this,l).get(b);return O===void 0?E:Object.assign(E,O)}getRawValue(b){return r(this,l).get(b)}remove(b){if(r(this,l).delete(b),r(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const E of r(this,l).values())if(E instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(b,E){const O=r(this,l).get(b);let x=!1;if(O!==void 0)for(const[M,S]of Object.entries(E))O[M]!==S&&(x=!0,O[M]=S);else x=!0,r(this,l).set(b,E);x&&nt(this,D,sn).call(this),E instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(E.constructor._type)}has(b){return r(this,l).has(b)}getAll(){return r(this,l).size>0?(0,i.objectFromMap)(r(this,l)):null}setAll(b){for(const[E,O]of Object.entries(b))this.setValue(E,O)}get size(){return r(this,l).size}resetModified(){r(this,_)&&(lt(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new y(this)}get serializable(){if(r(this,l).size===0)return o;const b=new Map,E=new a.MurmurHash3_64,O=[],x=Object.create(null);let M=!1;for(const[S,u]of r(this,l)){const p=u instanceof s.AnnotationEditor?u.serialize(!1,x):u;p&&(b.set(S,p),E.update(`${S}:${JSON.stringify(p)}`),M||(M=!!p.bitmap))}if(M)for(const S of b.values())S.bitmap&&O.push(S.bitmap);return b.size>0?{map:b,hash:E.hexdigest(),transfers:O}:o}}_=new WeakMap,l=new WeakMap,D=new WeakSet,sn=function(){r(this,_)||(lt(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=N;class y extends N{constructor(E){super();q(this,C,void 0);const{map:O,hash:x,transfers:M}=E.serializable,S=structuredClone(O,M?{transfer:M}:null);lt(this,C,{map:S,hash:x,transfers:M})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return r(this,C)}}C=new WeakMap,t.PrintAnnotationStorage=y},(n,t,e)=>{var N,y,_,l,D,I,C,A,b,E,Pe,x,rn,S,an,p,on;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=e(1),s=e(5);const w=class w{constructor(g){q(this,E);q(this,x);q(this,S);q(this,p);q(this,N,!1);q(this,y,null);q(this,_,null);q(this,l,this.focusin.bind(this));q(this,D,this.focusout.bind(this));q(this,I,!1);q(this,C,!1);q(this,A,!1);qt(this,"_uiManager",null);q(this,b,w._zIndex++);this.constructor===w&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1;const{rotation:f,rawDims:{pageWidth:B,pageHeight:U,pageX:X,pageY:P}}=this.parent.viewport;this.rotation=f,this.pageRotation=(360+f-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[B,U],this.pageTranslation=[X,P];const[Y,H]=this.parentDimensions;this.x=g.x/Y,this.y=g.y/H,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const f=new o({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});f.annotationElementId=g.annotationElementId,f.deleted=!0,f._uiManager.addToAnnotationStorage(f)}static initialize(g){}static updateDefaultParams(g,f){}static get defaultPropertiesToUpdate(){return[]}get propertiesToUpdate(){return[]}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=r(this,b)}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){r(this,I)?lt(this,I,!1):this.parent.setSelected(this)}focusout(g){var B;if(!this.isAttachedToDOM)return;const f=g.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(g.preventDefault(),(B=this.parent)!=null&&B.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(g){const f=this.parent.div.getBoundingClientRect();this.startX=g.clientX-f.x,this.startY=g.clientY-f.y,g.dataTransfer.setData("text/plain",this.id),g.dataTransfer.effectAllowed="move"}setAt(g,f,B,U){const[X,P]=this.parentDimensions;[B,U]=this.screenToPageTranslation(B,U),this.x=(g+B)/X,this.y=(f+U)/P,this.fixAndSetPosition()}translate(g,f){nt(this,E,Pe).call(this,this.parentDimensions,g,f)}translateInPage(g,f){nt(this,E,Pe).call(this,this.pageDimensions,g,f),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[g,f]=this.pageDimensions;let{x:B,y:U,width:X,height:P}=this;switch(X*=g,P*=f,B*=g,U*=f,this.rotation){case 0:B=Math.max(0,Math.min(g-X,B)),U=Math.max(0,Math.min(f-P,U));break;case 90:B=Math.max(0,Math.min(g-P,B)),U=Math.min(f,Math.max(X,U));break;case 180:B=Math.min(g,Math.max(X,B)),U=Math.min(f,Math.max(P,U));break;case 270:B=Math.min(g,Math.max(P,B)),U=Math.max(0,Math.min(f-X,U));break}this.x=B/g,this.y=U/f,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(g,f){switch(this.parentRotation){case 90:return[f,-g];case 180:return[-g,-f];case 270:return[-f,g];default:return[g,f]}}pageTranslationToScreen(g,f){switch(this.parentRotation){case 90:return[-f,g];case 180:return[-g,-f];case 270:return[f,-g];default:return[g,f]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:g}=this._uiManager.viewParameters,[f,B]=this.pageDimensions;return[f*g,B*g]}setDims(g,f){const[B,U]=this.parentDimensions;this.div.style.width=`${(100*g/B).toFixed(2)}%`,r(this,N)||(this.div.style.height=`${(100*f/U).toFixed(2)}%`)}fixDims(){const{style:g}=this.div,{height:f,width:B}=g,U=B.endsWith("%"),X=!r(this,N)&&f.endsWith("%");if(U&&X)return;const[P,Y]=this.parentDimensions;U||(g.width=`${(100*parseFloat(B)/P).toFixed(2)}%`),!r(this,N)&&!X&&(g.height=`${(100*parseFloat(f)/Y).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",r(this,l)),this.div.addEventListener("focusout",r(this,D));const[g,f]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*f/g).toFixed(2)}%`,this.div.style.maxHeight=`${(100*g/f).toFixed(2)}%`);const[B,U]=this.getInitialTranslation();return this.translate(B,U),(0,s.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(g){const{isMac:f}=i.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&f){g.preventDefault();return}g.ctrlKey&&!f||g.shiftKey||g.metaKey&&f?this.parent.toggleSelected(this):this.parent.setSelected(this),lt(this,I,!0)}getRect(g,f){const B=this.parentScale,[U,X]=this.pageDimensions,[P,Y]=this.pageTranslation,H=g/B,V=f/B,Q=this.x*U,st=this.y*X,ft=this.width*U,Et=this.height*X;switch(this.rotation){case 0:return[Q+H+P,X-st-V-Et+Y,Q+H+ft+P,X-st-V+Y];case 90:return[Q+V+P,X-st+H+Y,Q+V+Et+P,X-st+H+ft+Y];case 180:return[Q-H-ft+P,X-st+V+Y,Q-H+P,X-st+V+Et+Y];case 270:return[Q-V-Et+P,X-st-H-ft+Y,Q-V+P,X-st-H+Y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,f){const[B,U,X,P]=g,Y=X-B,H=P-U;switch(this.rotation){case 0:return[B,f-P,Y,H];case 90:return[B,f-U,H,Y];case 180:return[X,f-U,Y,H];case 270:return[X,f-P,H,Y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){lt(this,A,!0)}disableEditMode(){lt(this,A,!1)}isInEditMode(){return r(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g,f;(g=this.div)==null||g.addEventListener("focusin",r(this,l)),(f=this.div)==null||f.addEventListener("focusout",r(this,D))}serialize(g=!1,f=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(g,f,B){const U=new this.prototype.constructor({parent:f,id:f.getNextId(),uiManager:B});U.rotation=g.rotation;const[X,P]=U.pageDimensions,[Y,H,V,Q]=U.getRectInCurrentCoords(g.rect,P);return U.x=Y/X,U.y=H/P,U.width=V/X,U.height=Q/P,U}remove(){this.div.removeEventListener("focusin",r(this,l)),this.div.removeEventListener("focusout",r(this,D)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(nt(this,x,rn).call(this),r(this,y).classList.remove("hidden"))}select(){var g;this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor")}unselect(){var g,f,B;(g=r(this,y))==null||g.classList.add("hidden"),(f=this.div)==null||f.classList.remove("selectedEditor"),(B=this.div)!=null&&B.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(g,f){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return r(this,C)}set isEditing(g){lt(this,C,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(g,f){lt(this,N,!0);const B=g/f,{style:U}=this.div;U.aspectRatio=B,U.height="auto"}static get MIN_SIZE(){return 16}};N=new WeakMap,y=new WeakMap,_=new WeakMap,l=new WeakMap,D=new WeakMap,I=new WeakMap,C=new WeakMap,A=new WeakMap,b=new WeakMap,E=new WeakSet,Pe=function([g,f],B,U){[B,U]=this.screenToPageTranslation(B,U),this.x+=B/g,this.y+=U/f,this.fixAndSetPosition()},x=new WeakSet,rn=function(){if(r(this,y))return;lt(this,y,document.createElement("div")),r(this,y).classList.add("resizers");const g=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||g.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const f of g){const B=document.createElement("div");r(this,y).append(B),B.classList.add("resizer",f),B.addEventListener("pointerdown",nt(this,S,an).bind(this,f))}this.div.prepend(r(this,y))},S=new WeakSet,an=function(g,f){f.preventDefault(),lt(this,_,[f.clientX,f.clientY]);const B=nt(this,p,on).bind(this,g),U=this.div.draggable;this.div.draggable=!1;const X=`resizing${g.charAt(0).toUpperCase()}${g.slice(1)}`;this.parent.div.classList.add(X);const P={passive:!0,capture:!0};window.addEventListener("pointermove",B,P);const Y=()=>{this._uiManager.stopUndoAccumulation(),this.div.draggable=U,this.parent.div.classList.remove(X),window.removeEventListener("pointermove",B,P)};window.addEventListener("pointerup",Y,{once:!0})},p=new WeakSet,on=function(g,f){const{clientX:B,clientY:U}=f,X=B-r(this,_)[0],P=U-r(this,_)[1];r(this,_)[0]=B,r(this,_)[1]=U;const[Y,H]=this.parentDimensions,V=this.x,Q=this.y,st=this.width,ft=this.height,Et=w.MIN_SIZE/Y,W=w.MIN_SIZE/H;let d;const c=$=>Math.round($*1e4)/1e4,R=($,G)=>{const[z,Z]=this.parentDimensions;this.setDims(z*$,Z*G),this.fixAndSetPosition()},j=()=>{this.width=st,this.height=ft,this.x=V,this.y=Q,R(st,ft)};switch(g){case"topLeft":{if(Math.sign(X)*Math.sign(P)<0)return;const $=Math.hypot(X,P),G=Math.hypot(st*Y,ft*H),z=c(V+st),Z=c(Q+ft),ut=Math.max(Math.min(1-Math.sign(X)*($/G),1/st,1/ft),Et/st,W/ft),ot=c(st*ut),ht=c(ft*ut),pt=z-ot,Tt=Z-ht;d=()=>{this.width=ot,this.height=ht,this.x=pt,this.y=Tt,R(ot,ht)};break}case"topMiddle":{const $=c(this.y+ft),G=c(Math.max(W,Math.min(1,ft-P/H))),z=$-G;d=()=>{this.height=G,this.y=z,R(st,G)};break}case"topRight":{if(Math.sign(X)*Math.sign(P)>0)return;const $=Math.hypot(X,P),G=Math.hypot(this.width*Y,this.height*H),z=c(Q+this.height),Z=Math.max(Math.min(1+Math.sign(X)*($/G),1/st,1/ft),Et/st,W/ft),ut=c(st*Z),ot=c(ft*Z),ht=z-ot;d=()=>{this.width=ut,this.height=ot,this.y=ht,R(ut,ot)};break}case"middleRight":{const $=c(Math.max(Et,Math.min(1,st+X/Y)));d=()=>{this.width=$,R($,ft)};break}case"bottomRight":{if(Math.sign(X)*Math.sign(P)<0)return;const $=Math.hypot(X,P),G=Math.hypot(this.width*Y,this.height*H),z=Math.max(Math.min(1+Math.sign(X)*($/G),1/st,1/ft),Et/st,W/ft),Z=c(st*z),ut=c(ft*z);d=()=>{this.width=Z,this.height=ut,R(Z,ut)};break}case"bottomMiddle":{const $=c(Math.max(W,Math.min(1,ft+P/H)));d=()=>{this.height=$,R(st,$)};break}case"bottomLeft":{if(Math.sign(X)*Math.sign(P)>0)return;const $=Math.hypot(X,P),G=Math.hypot(this.width*Y,this.height*H),z=c(V+this.width),Z=Math.max(Math.min(1-Math.sign(X)*($/G),1/st,1/ft),Et/st,W/ft),ut=c(st*Z),ot=c(ft*Z),ht=z-ut;d=()=>{this.width=ut,this.height=ot,this.x=ht,R(ut,ot)};break}case"middleLeft":{const $=c(V+st),G=c(Math.max(Et,Math.min(1,st-X/Y))),z=$-G;d=()=>{this.width=G,this.x=z,R(G,ft)};break}}this.addCommands({cmd:d,undo:j,mustExec:!0,type:i.AnnotationEditorParamsType.RESIZE,overwriteIfSameType:!0,keepUndo:!0})},qt(w,"_colorManager",new s.ColorManager),qt(w,"_zIndex",1);let a=w;t.AnnotationEditor=a;class o extends a{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(n,t,e)=>{var C,A,b,E,O,Ne,M,S,u,p,k,ln,g,f,B,U,X,P,Y,H,V,Q,st,ft,Et,W,d,c,R,j,$,G,z,Z,ut,ot,ht,pt,Tt,At,xt,cn,vt,xe,yt,hn,it,dn,bt,ee,Dt,de,kt,un,Ut,fn,dt,De,et,ue,Bt,Le;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=a,t.opacityToHex=o;var i=e(1),s=e(6);function a(Xt,v,J){for(const gt of J)v.addEventListener(gt,Xt[gt].bind(Xt))}function o(Xt){return Math.round(Math.min(255,Math.max(1,255*Xt))).toString(16).padStart(2,"0")}class N{constructor(){q(this,C,0)}getId(){return`${i.AnnotationEditorPrefix}${ne(this,C)._++}`}}C=new WeakMap;class y{constructor(){q(this,O);q(this,A,(0,i.getUuid)());q(this,b,0);q(this,E,null)}async getFromFile(v){const{lastModified:J,name:gt,size:ct,type:T}=v;return nt(this,O,Ne).call(this,`${J}_${gt}_${ct}_${T}`,v)}async getFromUrl(v){return nt(this,O,Ne).call(this,v,v)}async getFromId(v){r(this,E)||lt(this,E,new Map);const J=r(this,E).get(v);return J?J.bitmap?(J.refCounter+=1,J):J.file?this.getFromFile(J.file):this.getFromUrl(J.url):null}getSvgUrl(v){const J=r(this,E).get(v);return J!=null&&J.isSvg?J.svgUrl:null}deleteId(v){r(this,E)||lt(this,E,new Map);const J=r(this,E).get(v);J&&(J.refCounter-=1,J.refCounter===0&&(J.bitmap=null))}isValidId(v){return v.startsWith(`image_${r(this,A)}_`)}}A=new WeakMap,b=new WeakMap,E=new WeakMap,O=new WeakSet,Ne=async function(v,J){r(this,E)||lt(this,E,new Map);let gt=r(this,E).get(v);if(gt===null)return null;if(gt!=null&&gt.bitmap)return gt.refCounter+=1,gt;try{gt||(gt={bitmap:null,id:`image_${r(this,A)}_${ne(this,b)._++}`,refCounter:0,isSvg:!1});let ct;if(typeof J=="string"){gt.url=J;const T=await fetch(J);if(!T.ok)throw new Error(T.statusText);ct=await T.blob()}else ct=gt.file=J;if(ct.type==="image/svg+xml"){const T=new FileReader,m=new Image,F=new Promise((L,K)=>{m.onload=()=>{gt.bitmap=m,gt.isSvg=!0,L()},T.onload=()=>{m.src=gt.svgUrl=T.result},m.onerror=T.onerror=K});T.readAsDataURL(ct),await F}else gt.bitmap=await createImageBitmap(ct);gt.refCounter=1}catch(ct){console.error(ct),gt=null}return r(this,E).set(v,gt),gt&&r(this,E).set(gt.id,gt),gt};class _{constructor(v=128){q(this,M,[]);q(this,S,!1);q(this,u,void 0);q(this,p,-1);lt(this,u,v)}add({cmd:v,undo:J,mustExec:gt,type:ct=NaN,overwriteIfSameType:T=!1,keepUndo:m=!1}){if(gt&&v(),r(this,S))return;const F={cmd:v,undo:J,type:ct};if(r(this,p)===-1){r(this,M).length>0&&(r(this,M).length=0),lt(this,p,0),r(this,M).push(F);return}if(T&&r(this,M)[r(this,p)].type===ct){m&&(F.undo=r(this,M)[r(this,p)].undo),r(this,M)[r(this,p)]=F;return}const L=r(this,p)+1;L===r(this,u)?r(this,M).splice(0,1):(lt(this,p,L),L<r(this,M).length&&r(this,M).splice(L)),r(this,M).push(F)}stopUndoAccumulation(){r(this,p)!==-1&&(r(this,M)[r(this,p)].type=NaN)}undo(){r(this,p)!==-1&&(lt(this,S,!0),r(this,M)[r(this,p)].undo(),lt(this,S,!1),lt(this,p,r(this,p)-1))}redo(){r(this,p)<r(this,M).length-1&&(lt(this,p,r(this,p)+1),lt(this,S,!0),r(this,M)[r(this,p)].cmd(),lt(this,S,!1))}hasSomethingToUndo(){return r(this,p)!==-1}hasSomethingToRedo(){return r(this,p)<r(this,M).length-1}destroy(){lt(this,M,null)}}M=new WeakMap,S=new WeakMap,u=new WeakMap,p=new WeakMap,t.CommandManager=_;class l{constructor(v){q(this,k);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:J}=i.FeatureTest.platform;for(const[gt,ct,T={}]of v)for(const m of gt){const F=m.startsWith("mac+");J&&F?(this.callbacks.set(m.slice(4),{callback:ct,options:T}),this.allKeys.add(m.split("+").at(-1))):!J&&!F&&(this.callbacks.set(m,{callback:ct,options:T}),this.allKeys.add(m.split("+").at(-1)))}}exec(v,J){if(!this.allKeys.has(J.key))return;const gt=this.callbacks.get(nt(this,k,ln).call(this,J));if(!gt)return;const{callback:ct,options:{bubbles:T=!1,args:m=[],checker:F=null}}=gt;F&&!F(v,J)||(ct.bind(v,...m)(),T||(J.stopPropagation(),J.preventDefault()))}}k=new WeakSet,ln=function(v){v.altKey&&this.buffer.push("alt"),v.ctrlKey&&this.buffer.push("ctrl"),v.metaKey&&this.buffer.push("meta"),v.shiftKey&&this.buffer.push("shift"),this.buffer.push(v.key);const J=this.buffer.join("+");return this.buffer.length=0,J},t.KeyboardManager=l;const h=class h{get _colors(){const v=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(v),(0,i.shadow)(this,"_colors",v)}convert(v){const J=(0,s.getRGB)(v);if(!window.matchMedia("(forced-colors: active)").matches)return J;for(const[gt,ct]of this._colors)if(ct.every((T,m)=>T===J[m]))return h._colorsMapping.get(gt);return J}getHexCode(v){const J=this._colors.get(v);return J?i.Util.makeHexColor(...J):v}};qt(h,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let D=h;t.ColorManager=D;const Kt=class Kt{constructor(v,J,gt,ct){q(this,xt);q(this,vt);q(this,yt);q(this,it);q(this,bt);q(this,Dt);q(this,kt);q(this,Ut);q(this,dt);q(this,et);q(this,Bt);q(this,g,null);q(this,f,new Map);q(this,B,new Map);q(this,U,null);q(this,X,new _);q(this,P,0);q(this,Y,new Set);q(this,H,null);q(this,V,new Set);q(this,Q,null);q(this,st,null);q(this,ft,new N);q(this,Et,!1);q(this,W,i.AnnotationEditorType.NONE);q(this,d,new Set);q(this,c,null);q(this,R,this.copy.bind(this));q(this,j,this.cut.bind(this));q(this,$,this.paste.bind(this));q(this,G,this.keydown.bind(this));q(this,z,this.onEditingAction.bind(this));q(this,Z,this.onPageChanging.bind(this));q(this,ut,this.onScaleChanging.bind(this));q(this,ot,this.onRotationChanging.bind(this));q(this,ht,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});q(this,pt,[0,0]);q(this,Tt,null);q(this,At,null);lt(this,At,v),lt(this,Q,J),r(this,Q)._on("editingaction",r(this,z)),r(this,Q)._on("pagechanging",r(this,Z)),r(this,Q)._on("scalechanging",r(this,ut)),r(this,Q)._on("rotationchanging",r(this,ot)),lt(this,U,gt.annotationStorage),lt(this,st,gt.filterFactory),lt(this,c,ct),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const v=Kt.prototype,J=T=>{const{activeElement:m}=document;return m&&r(T,At).contains(m)&&T.hasSomethingToControl()},gt=this.TRANSLATE_SMALL,ct=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],v.selectAll],[["ctrl+z","mac+meta+z"],v.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],v.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],v.delete],[["Escape","mac+Escape"],v.unselectAll],[["ArrowLeft","mac+ArrowLeft"],v.translateSelectedEditors,{args:[-gt,0],checker:J}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],v.translateSelectedEditors,{args:[-ct,0],checker:J}],[["ArrowRight","mac+ArrowRight"],v.translateSelectedEditors,{args:[gt,0],checker:J}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],v.translateSelectedEditors,{args:[ct,0],checker:J}],[["ArrowUp","mac+ArrowUp"],v.translateSelectedEditors,{args:[0,-gt],checker:J}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],v.translateSelectedEditors,{args:[0,-ct],checker:J}],[["ArrowDown","mac+ArrowDown"],v.translateSelectedEditors,{args:[0,gt],checker:J}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],v.translateSelectedEditors,{args:[0,ct],checker:J}]]))}destroy(){nt(this,vt,xe).call(this),r(this,Q)._off("editingaction",r(this,z)),r(this,Q)._off("pagechanging",r(this,Z)),r(this,Q)._off("scalechanging",r(this,ut)),r(this,Q)._off("rotationchanging",r(this,ot));for(const v of r(this,B).values())v.destroy();r(this,B).clear(),r(this,f).clear(),r(this,V).clear(),lt(this,g,null),r(this,d).clear(),r(this,X).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",r(this,c)?r(this,st).addHCMFilter(r(this,c).foreground,r(this,c).background):"none")}onPageChanging({pageNumber:v}){lt(this,P,v-1)}focusMainContainer(){r(this,At).focus()}addShouldRescale(v){r(this,V).add(v)}removeShouldRescale(v){r(this,V).delete(v)}onScaleChanging({scale:v}){this.commitOrRemove(),this.viewParameters.realScale=v*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const J of r(this,V))J.onScaleChanging()}onRotationChanging({pagesRotation:v}){this.commitOrRemove(),this.viewParameters.rotation=v}addToAnnotationStorage(v){!v.isEmpty()&&r(this,U)&&!r(this,U).has(v.id)&&r(this,U).setValue(v.id,v)}copy(v){if(v.preventDefault(),r(this,g)&&r(this,g).commitOrRemove(),!this.hasSelection)return;const J=[];for(const gt of r(this,d)){const ct=gt.serialize(!0);ct&&J.push(ct)}J.length!==0&&v.clipboardData.setData("application/pdfjs",JSON.stringify(J))}cut(v){this.copy(v),this.delete()}paste(v){v.preventDefault();let J=v.clipboardData.getData("application/pdfjs");if(!J)return;try{J=JSON.parse(J)}catch(ct){(0,i.warn)(`paste: "${ct.message}".`);return}if(!Array.isArray(J))return;this.unselectAll();const gt=this.currentLayer;try{const ct=[];for(const F of J){const L=gt.deserialize(F);if(!L)return;ct.push(L)}const T=()=>{for(const F of ct)nt(this,dt,De).call(this,F);nt(this,Bt,Le).call(this,ct)},m=()=>{for(const F of ct)F.remove()};this.addCommands({cmd:T,undo:m,mustExec:!0})}catch(ct){(0,i.warn)(`paste: "${ct.message}".`)}}keydown(v){var J;(J=this.getActive())!=null&&J.shouldGetKeyboardEvents()||Kt._keyboardManager.exec(this,v)}onEditingAction(v){["undo","redo","delete","selectAll"].includes(v.name)&&this[v.name]()}setEditingState(v){v?(nt(this,xt,cn).call(this),nt(this,yt,hn).call(this),nt(this,bt,ee).call(this,{isEditing:r(this,W)!==i.AnnotationEditorType.NONE,isEmpty:nt(this,et,ue).call(this),hasSomethingToUndo:r(this,X).hasSomethingToUndo(),hasSomethingToRedo:r(this,X).hasSomethingToRedo(),hasSelectedEditor:!1})):(nt(this,vt,xe).call(this),nt(this,it,dn).call(this),nt(this,bt,ee).call(this,{isEditing:!1}))}registerEditorTypes(v){if(!r(this,H)){lt(this,H,v);for(const J of r(this,H))nt(this,Dt,de).call(this,J.defaultPropertiesToUpdate)}}getId(){return r(this,ft).getId()}get currentLayer(){return r(this,B).get(r(this,P))}get currentPageIndex(){return r(this,P)}addLayer(v){r(this,B).set(v.pageIndex,v),r(this,Et)?v.enable():v.disable()}removeLayer(v){r(this,B).delete(v.pageIndex)}updateMode(v,J=null){if(lt(this,W,v),v===i.AnnotationEditorType.NONE){this.setEditingState(!1),nt(this,Ut,fn).call(this);return}this.setEditingState(!0),nt(this,kt,un).call(this);for(const gt of r(this,B).values())gt.updateMode(v);if(J){for(const gt of r(this,f).values())if(gt.annotationElementId===J){this.setSelected(gt),gt.enterInEditMode();break}}}updateToolbar(v){v!==r(this,W)&&r(this,Q).dispatch("switchannotationeditormode",{source:this,mode:v})}updateParams(v,J){if(r(this,H)){for(const gt of r(this,d))gt.updateParams(v,J);for(const gt of r(this,H))gt.updateDefaultParams(v,J)}}getEditors(v){const J=[];for(const gt of r(this,f).values())gt.pageIndex===v&&J.push(gt);return J}getEditor(v){return r(this,f).get(v)}addEditor(v){r(this,f).set(v.id,v)}removeEditor(v){var J;r(this,f).delete(v.id),this.unselect(v),(!v.annotationElementId||!r(this,Y).has(v.annotationElementId))&&((J=r(this,U))==null||J.remove(v.id))}addDeletedAnnotationElement(v){r(this,Y).add(v.annotationElementId),v.deleted=!0}isDeletedAnnotationElement(v){return r(this,Y).has(v)}removeDeletedAnnotationElement(v){r(this,Y).delete(v.annotationElementId),v.deleted=!1}setActiveEditor(v){r(this,g)!==v&&(lt(this,g,v),v&&nt(this,Dt,de).call(this,v.propertiesToUpdate))}toggleSelected(v){if(r(this,d).has(v)){r(this,d).delete(v),v.unselect(),nt(this,bt,ee).call(this,{hasSelectedEditor:this.hasSelection});return}r(this,d).add(v),v.select(),nt(this,Dt,de).call(this,v.propertiesToUpdate),nt(this,bt,ee).call(this,{hasSelectedEditor:!0})}setSelected(v){for(const J of r(this,d))J!==v&&J.unselect();r(this,d).clear(),r(this,d).add(v),v.select(),nt(this,Dt,de).call(this,v.propertiesToUpdate),nt(this,bt,ee).call(this,{hasSelectedEditor:!0})}isSelected(v){return r(this,d).has(v)}unselect(v){v.unselect(),r(this,d).delete(v),nt(this,bt,ee).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return r(this,d).size!==0}stopUndoAccumulation(){r(this,X).stopUndoAccumulation()}undo(){r(this,X).undo(),nt(this,bt,ee).call(this,{hasSomethingToUndo:r(this,X).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:nt(this,et,ue).call(this)})}redo(){r(this,X).redo(),nt(this,bt,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:r(this,X).hasSomethingToRedo(),isEmpty:nt(this,et,ue).call(this)})}addCommands(v){r(this,X).add(v),nt(this,bt,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:nt(this,et,ue).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const v=[...r(this,d)],J=()=>{for(const ct of v)ct.remove()},gt=()=>{for(const ct of v)nt(this,dt,De).call(this,ct)};this.addCommands({cmd:J,undo:gt,mustExec:!0})}commitOrRemove(){var v;(v=r(this,g))==null||v.commitOrRemove()}hasSomethingToControl(){return r(this,g)||this.hasSelection}selectAll(){for(const v of r(this,d))v.commit();nt(this,Bt,Le).call(this,r(this,f).values())}unselectAll(){if(r(this,g)){r(this,g).commitOrRemove();return}if(this.hasSelection){for(const v of r(this,d))v.unselect();r(this,d).clear(),nt(this,bt,ee).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(v,J,gt=!1){if(gt||this.commitOrRemove(),!this.hasSelection)return;r(this,pt)[0]+=v,r(this,pt)[1]+=J;const[ct,T]=r(this,pt),m=[...r(this,d)],F=1e3;r(this,Tt)&&clearTimeout(r(this,Tt)),lt(this,Tt,setTimeout(()=>{lt(this,Tt,null),r(this,pt)[0]=r(this,pt)[1]=0,this.addCommands({cmd:()=>{for(const L of m)r(this,f).has(L.id)&&L.translateInPage(ct,T)},undo:()=>{for(const L of m)r(this,f).has(L.id)&&L.translateInPage(-ct,-T)},mustExec:!1})},F));for(const L of m)L.translateInPage(v,J)}isActive(v){return r(this,g)===v}getActive(){return r(this,g)}getMode(){return r(this,W)}get imageManager(){return(0,i.shadow)(this,"imageManager",new y)}};g=new WeakMap,f=new WeakMap,B=new WeakMap,U=new WeakMap,X=new WeakMap,P=new WeakMap,Y=new WeakMap,H=new WeakMap,V=new WeakMap,Q=new WeakMap,st=new WeakMap,ft=new WeakMap,Et=new WeakMap,W=new WeakMap,d=new WeakMap,c=new WeakMap,R=new WeakMap,j=new WeakMap,$=new WeakMap,G=new WeakMap,z=new WeakMap,Z=new WeakMap,ut=new WeakMap,ot=new WeakMap,ht=new WeakMap,pt=new WeakMap,Tt=new WeakMap,At=new WeakMap,xt=new WeakSet,cn=function(){window.addEventListener("keydown",r(this,G),{capture:!0})},vt=new WeakSet,xe=function(){window.removeEventListener("keydown",r(this,G),{capture:!0})},yt=new WeakSet,hn=function(){document.addEventListener("copy",r(this,R)),document.addEventListener("cut",r(this,j)),document.addEventListener("paste",r(this,$))},it=new WeakSet,dn=function(){document.removeEventListener("copy",r(this,R)),document.removeEventListener("cut",r(this,j)),document.removeEventListener("paste",r(this,$))},bt=new WeakSet,ee=function(v){Object.entries(v).some(([gt,ct])=>r(this,ht)[gt]!==ct)&&r(this,Q).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(r(this,ht),v)})},Dt=new WeakSet,de=function(v){r(this,Q).dispatch("annotationeditorparamschanged",{source:this,details:v})},kt=new WeakSet,un=function(){if(!r(this,Et)){lt(this,Et,!0);for(const v of r(this,B).values())v.enable()}},Ut=new WeakSet,fn=function(){if(this.unselectAll(),r(this,Et)){lt(this,Et,!1);for(const v of r(this,B).values())v.disable()}},dt=new WeakSet,De=function(v){const J=r(this,B).get(v.pageIndex);J?J.addOrRebuild(v):this.addEditor(v)},et=new WeakSet,ue=function(){if(r(this,f).size===0)return!0;if(r(this,f).size===1)for(const v of r(this,f).values())return v.isEmpty();return!1},Bt=new WeakSet,Le=function(v){r(this,d).clear();for(const J of v)J.isEmpty()||(r(this,d).add(J),J.select());nt(this,bt,ee).call(this,{hasSelectedEditor:!0})},qt(Kt,"TRANSLATE_SMALL",1),qt(Kt,"TRANSLATE_BIG",10);let I=Kt;t.AnnotationEditorUIManager=I},(n,t,e)=>{var H,V,Q,st,ft,Et,W,d,c,R,j,$,oe,z,le,ut,Me,ht,Ee,Tt,Ae,xt,fe,vt,pe;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=k,t.getColorValues=B,t.getCurrentTransform=U,t.getCurrentTransformInverse=X,t.getFilenameFromUrl=x,t.getPdfFilenameFromUrl=M,t.getRGB=f,t.getXfaPageViewport=g,t.isDataScheme=E,t.isPdfFile=O,t.isValidFetchUrl=u,t.loadScript=p,t.setLayerDimensions=P;var i=e(7),s=e(1);const a="http://www.w3.org/2000/svg",o="pdfjs_internal_id_";t.AnnotationPrefix=o;const Y=class Y{};qt(Y,"CSS",96),qt(Y,"PDF",72),qt(Y,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF);let N=Y;t.PixelsPerInch=N;class y extends i.BaseFilterFactory{constructor({docId:it,ownerDocument:mt=globalThis.document}={}){super();q(this,$);q(this,z);q(this,ut);q(this,ht);q(this,Tt);q(this,xt);q(this,vt);q(this,H,void 0);q(this,V,void 0);q(this,Q,void 0);q(this,st,void 0);q(this,ft,void 0);q(this,Et,void 0);q(this,W,void 0);q(this,d,void 0);q(this,c,void 0);q(this,R,void 0);q(this,j,0);lt(this,Q,it),lt(this,st,mt)}addFilter(it){if(!it)return"none";let mt=r(this,$,oe).get(it);if(mt)return mt;let bt,Pt,Dt,Wt;if(it.length===1){const Vt=it[0],dt=new Array(256);for(let tt=0;tt<256;tt++)dt[tt]=Vt[tt]/255;Wt=bt=Pt=Dt=dt.join(",")}else{const[Vt,dt,tt]=it,et=new Array(256),Ct=new Array(256),Bt=new Array(256);for(let Lt=0;Lt<256;Lt++)et[Lt]=Vt[Lt]/255,Ct[Lt]=dt[Lt]/255,Bt[Lt]=tt[Lt]/255;bt=et.join(","),Pt=Ct.join(","),Dt=Bt.join(","),Wt=`${bt}${Pt}${Dt}`}if(mt=r(this,$,oe).get(Wt),mt)return r(this,$,oe).set(it,mt),mt;const kt=`g_${r(this,Q)}_transfer_map_${ne(this,j)._++}`,Gt=`url(#${kt})`;r(this,$,oe).set(it,Gt),r(this,$,oe).set(Wt,Gt);const Ut=nt(this,ht,Ee).call(this,kt);return nt(this,xt,fe).call(this,bt,Pt,Dt,Ut),Gt}addHCMFilter(it,mt){var dt;const bt=`${it}-${mt}`;if(r(this,Et)===bt)return r(this,W);if(lt(this,Et,bt),lt(this,W,"none"),(dt=r(this,ft))==null||dt.remove(),!it||!mt)return r(this,W);const Pt=nt(this,vt,pe).call(this,it);it=s.Util.makeHexColor(...Pt);const Dt=nt(this,vt,pe).call(this,mt);if(mt=s.Util.makeHexColor(...Dt),r(this,z,le).style.color="",it==="#000000"&&mt==="#ffffff"||it===mt)return r(this,W);const Wt=new Array(256);for(let tt=0;tt<=255;tt++){const et=tt/255;Wt[tt]=et<=.03928?et/12.92:((et+.055)/1.055)**2.4}const kt=Wt.join(","),Gt=`g_${r(this,Q)}_hcm_filter`,Ut=lt(this,d,nt(this,ht,Ee).call(this,Gt));nt(this,xt,fe).call(this,kt,kt,kt,Ut),nt(this,ut,Me).call(this,Ut);const Vt=(tt,et)=>{const Ct=Pt[tt]/255,Bt=Dt[tt]/255,Lt=new Array(et+1);for(let Kt=0;Kt<=et;Kt++)Lt[Kt]=Ct+Kt/et*(Bt-Ct);return Lt.join(",")};return nt(this,xt,fe).call(this,Vt(0,5),Vt(1,5),Vt(2,5),Ut),lt(this,W,`url(#${Gt})`),r(this,W)}addHighlightHCMFilter(it,mt,bt,Pt){var Bt;const Dt=`${it}-${mt}-${bt}-${Pt}`;if(r(this,c)===Dt)return r(this,R);if(lt(this,c,Dt),lt(this,R,"none"),(Bt=r(this,d))==null||Bt.remove(),!it||!mt)return r(this,R);const[Wt,kt]=[it,mt].map(nt(this,vt,pe).bind(this));let Gt=Math.round(.2126*Wt[0]+.7152*Wt[1]+.0722*Wt[2]),Ut=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),[Vt,dt]=[bt,Pt].map(nt(this,vt,pe).bind(this));Ut<Gt&&([Gt,Ut,Vt,dt]=[Ut,Gt,dt,Vt]),r(this,z,le).style.color="";const tt=(Lt,Kt,Xt)=>{const v=new Array(256),J=(Ut-Gt)/Xt,gt=Lt/255,ct=(Kt-Lt)/(255*Xt);let T=0;for(let m=0;m<=Xt;m++){const F=Math.round(Gt+m*J),L=gt+m*ct;for(let K=T;K<=F;K++)v[K]=L;T=F+1}for(let m=T;m<256;m++)v[m]=v[T-1];return v.join(",")},et=`g_${r(this,Q)}_hcm_highlight_filter`,Ct=lt(this,d,nt(this,ht,Ee).call(this,et));return nt(this,ut,Me).call(this,Ct),nt(this,xt,fe).call(this,tt(Vt[0],dt[0],5),tt(Vt[1],dt[1],5),tt(Vt[2],dt[2],5),Ct),lt(this,R,`url(#${et})`),r(this,R)}destroy(it=!1){it&&(r(this,W)||r(this,R))||(r(this,V)&&(r(this,V).parentNode.parentNode.remove(),lt(this,V,null)),r(this,H)&&(r(this,H).clear(),lt(this,H,null)),lt(this,j,0))}}H=new WeakMap,V=new WeakMap,Q=new WeakMap,st=new WeakMap,ft=new WeakMap,Et=new WeakMap,W=new WeakMap,d=new WeakMap,c=new WeakMap,R=new WeakMap,j=new WeakMap,$=new WeakSet,oe=function(){return r(this,H)||lt(this,H,new Map)},z=new WeakSet,le=function(){if(!r(this,V)){const it=r(this,st).createElement("div"),{style:mt}=it;mt.visibility="hidden",mt.contain="strict",mt.width=mt.height=0,mt.position="absolute",mt.top=mt.left=0,mt.zIndex=-1;const bt=r(this,st).createElementNS(a,"svg");bt.setAttribute("width",0),bt.setAttribute("height",0),lt(this,V,r(this,st).createElementNS(a,"defs")),it.append(bt),bt.append(r(this,V)),r(this,st).body.append(it)}return r(this,V)},ut=new WeakSet,Me=function(it){const mt=r(this,st).createElementNS(a,"feColorMatrix");mt.setAttribute("type","matrix"),mt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),it.append(mt)},ht=new WeakSet,Ee=function(it){const mt=r(this,st).createElementNS(a,"filter");return mt.setAttribute("color-interpolation-filters","sRGB"),mt.setAttribute("id",it),r(this,z,le).append(mt),mt},Tt=new WeakSet,Ae=function(it,mt,bt){const Pt=r(this,st).createElementNS(a,mt);Pt.setAttribute("type","discrete"),Pt.setAttribute("tableValues",bt),it.append(Pt)},xt=new WeakSet,fe=function(it,mt,bt,Pt){const Dt=r(this,st).createElementNS(a,"feComponentTransfer");Pt.append(Dt),nt(this,Tt,Ae).call(this,Dt,"feFuncR",it),nt(this,Tt,Ae).call(this,Dt,"feFuncG",mt),nt(this,Tt,Ae).call(this,Dt,"feFuncB",bt)},vt=new WeakSet,pe=function(it){return r(this,z,le).style.color=it,f(getComputedStyle(r(this,z,le)).getPropertyValue("color"))},t.DOMFilterFactory=y;class _ extends i.BaseCanvasFactory{constructor({ownerDocument:at=globalThis.document}={}){super(),this._document=at}_createCanvas(at,it){const mt=this._document.createElement("canvas");return mt.width=at,mt.height=it,mt}}t.DOMCanvasFactory=_;async function l(yt,at=!1){if(u(yt,document.baseURI)){const it=await fetch(yt);if(!it.ok)throw new Error(it.statusText);return at?new Uint8Array(await it.arrayBuffer()):(0,s.stringToBytes)(await it.text())}return new Promise((it,mt)=>{const bt=new XMLHttpRequest;bt.open("GET",yt,!0),at&&(bt.responseType="arraybuffer"),bt.onreadystatechange=()=>{if(bt.readyState===XMLHttpRequest.DONE){if(bt.status===200||bt.status===0){let Pt;if(at&&bt.response?Pt=new Uint8Array(bt.response):!at&&bt.responseText&&(Pt=(0,s.stringToBytes)(bt.responseText)),Pt){it(Pt);return}}mt(new Error(bt.statusText))}},bt.send(null)})}class D extends i.BaseCMapReaderFactory{_fetchData(at,it){return l(at,this.isCompressed).then(mt=>({cMapData:mt,compressionType:it}))}}t.DOMCMapReaderFactory=D;class I extends i.BaseStandardFontDataFactory{_fetchData(at){return l(at,!0)}}t.DOMStandardFontDataFactory=I;class C extends i.BaseSVGFactory{_createSVG(at){return document.createElementNS(a,at)}}t.DOMSVGFactory=C;class A{constructor({viewBox:at,scale:it,rotation:mt,offsetX:bt=0,offsetY:Pt=0,dontFlip:Dt=!1}){this.viewBox=at,this.scale=it,this.rotation=mt,this.offsetX=bt,this.offsetY=Pt;const Wt=(at[2]+at[0])/2,kt=(at[3]+at[1])/2;let Gt,Ut,Vt,dt;switch(mt%=360,mt<0&&(mt+=360),mt){case 180:Gt=-1,Ut=0,Vt=0,dt=1;break;case 90:Gt=0,Ut=1,Vt=1,dt=0;break;case 270:Gt=0,Ut=-1,Vt=-1,dt=0;break;case 0:Gt=1,Ut=0,Vt=0,dt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Vt=-Vt,dt=-dt);let tt,et,Ct,Bt;Gt===0?(tt=Math.abs(kt-at[1])*it+bt,et=Math.abs(Wt-at[0])*it+Pt,Ct=(at[3]-at[1])*it,Bt=(at[2]-at[0])*it):(tt=Math.abs(Wt-at[0])*it+bt,et=Math.abs(kt-at[1])*it+Pt,Ct=(at[2]-at[0])*it,Bt=(at[3]-at[1])*it),this.transform=[Gt*it,Ut*it,Vt*it,dt*it,tt-Gt*it*Wt-Vt*it*kt,et-Ut*it*Wt-dt*it*kt],this.width=Ct,this.height=Bt}get rawDims(){const{viewBox:at}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:at[2]-at[0],pageHeight:at[3]-at[1],pageX:at[0],pageY:at[1]})}clone({scale:at=this.scale,rotation:it=this.rotation,offsetX:mt=this.offsetX,offsetY:bt=this.offsetY,dontFlip:Pt=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:at,rotation:it,offsetX:mt,offsetY:bt,dontFlip:Pt})}convertToViewportPoint(at,it){return s.Util.applyTransform([at,it],this.transform)}convertToViewportRectangle(at){const it=s.Util.applyTransform([at[0],at[1]],this.transform),mt=s.Util.applyTransform([at[2],at[3]],this.transform);return[it[0],it[1],mt[0],mt[1]]}convertToPdfPoint(at,it){return s.Util.applyInverseTransform([at,it],this.transform)}}t.PageViewport=A;class b extends s.BaseException{constructor(at,it=0){super(at,"RenderingCancelledException"),this.extraDelay=it}}t.RenderingCancelledException=b;function E(yt){const at=yt.length;let it=0;for(;it<at&&yt[it].trim()==="";)it++;return yt.substring(it,it+5).toLowerCase()==="data:"}function O(yt){return typeof yt=="string"&&/\.pdf$/i.test(yt)}function x(yt,at=!1){return at||([yt]=yt.split(/[#?]/,1)),yt.substring(yt.lastIndexOf("/")+1)}function M(yt,at="document.pdf"){if(typeof yt!="string")return at;if(E(yt))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),at;const it=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,mt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,bt=it.exec(yt);let Pt=mt.exec(bt[1])||mt.exec(bt[2])||mt.exec(bt[3]);if(Pt&&(Pt=Pt[0],Pt.includes("%")))try{Pt=mt.exec(decodeURIComponent(Pt))[0]}catch{}return Pt||at}class S{constructor(){qt(this,"started",Object.create(null));qt(this,"times",[])}time(at){at in this.started&&(0,s.warn)(`Timer is already running for ${at}`),this.started[at]=Date.now()}timeEnd(at){at in this.started||(0,s.warn)(`Timer has not been started for ${at}`),this.times.push({name:at,start:this.started[at],end:Date.now()}),delete this.started[at]}toString(){const at=[];let it=0;for(const{name:mt}of this.times)it=Math.max(mt.length,it);for(const{name:mt,start:bt,end:Pt}of this.times)at.push(`${mt.padEnd(it)} ${Pt-bt}ms
`);return at.join("")}}t.StatTimer=S;function u(yt,at){try{const{protocol:it}=at?new URL(yt,at):new URL(yt);return it==="http:"||it==="https:"}catch{return!1}}function p(yt,at=!1){return new Promise((it,mt)=>{const bt=document.createElement("script");bt.src=yt,bt.onload=function(Pt){at&&bt.remove(),it(Pt)},bt.onerror=function(){mt(new Error(`Cannot load script at: ${bt.src}`))},(document.head||document.documentElement).append(bt)})}function k(yt){console.log("Deprecated API usage: "+yt)}let w;class h{static toDateObject(at){if(!at||typeof at!="string")return null;w||(w=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const it=w.exec(at);if(!it)return null;const mt=parseInt(it[1],10);let bt=parseInt(it[2],10);bt=bt>=1&&bt<=12?bt-1:0;let Pt=parseInt(it[3],10);Pt=Pt>=1&&Pt<=31?Pt:1;let Dt=parseInt(it[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let Wt=parseInt(it[5],10);Wt=Wt>=0&&Wt<=59?Wt:0;let kt=parseInt(it[6],10);kt=kt>=0&&kt<=59?kt:0;const Gt=it[7]||"Z";let Ut=parseInt(it[8],10);Ut=Ut>=0&&Ut<=23?Ut:0;let Vt=parseInt(it[9],10)||0;return Vt=Vt>=0&&Vt<=59?Vt:0,Gt==="-"?(Dt+=Ut,Wt+=Vt):Gt==="+"&&(Dt-=Ut,Wt-=Vt),new Date(Date.UTC(mt,bt,Pt,Dt,Wt,kt))}}t.PDFDateString=h;function g(yt,{scale:at=1,rotation:it=0}){const{width:mt,height:bt}=yt.attributes.style,Pt=[0,0,parseInt(mt),parseInt(bt)];return new A({viewBox:Pt,scale:at,rotation:it})}function f(yt){if(yt.startsWith("#")){const at=parseInt(yt.slice(1),16);return[(at&16711680)>>16,(at&65280)>>8,at&255]}return yt.startsWith("rgb(")?yt.slice(4,-1).split(",").map(at=>parseInt(at)):yt.startsWith("rgba(")?yt.slice(5,-1).split(",").map(at=>parseInt(at)).slice(0,3):((0,s.warn)(`Not a valid color format: "${yt}"`),[0,0,0])}function B(yt){const at=document.createElement("span");at.style.visibility="hidden",document.body.append(at);for(const it of yt.keys()){at.style.color=it;const mt=window.getComputedStyle(at).color;yt.set(it,f(mt))}at.remove()}function U(yt){const{a:at,b:it,c:mt,d:bt,e:Pt,f:Dt}=yt.getTransform();return[at,it,mt,bt,Pt,Dt]}function X(yt){const{a:at,b:it,c:mt,d:bt,e:Pt,f:Dt}=yt.getTransform().invertSelf();return[at,it,mt,bt,Pt,Dt]}function P(yt,at,it=!1,mt=!0){if(at instanceof A){const{pageWidth:bt,pageHeight:Pt}=at.rawDims,{style:Dt}=yt,Wt=`calc(var(--scale-factor) * ${bt}px)`,kt=`calc(var(--scale-factor) * ${Pt}px)`;!it||at.rotation%180===0?(Dt.width=Wt,Dt.height=kt):(Dt.width=kt,Dt.height=Wt)}mt&&yt.setAttribute("data-main-rotation",at.rotation)}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=e(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,D){return"none"}addHighlightHCMFilter(l,D,I,C){return"none"}destroy(l=!1){}}t.BaseFilterFactory=s;class a{constructor(){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,D){if(l<=0||D<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(l,D);return{canvas:I,context:I.getContext("2d")}}reset(l,D,I){if(!l.canvas)throw new Error("Canvas is not specified");if(D<=0||I<=0)throw new Error("Invalid canvas size");l.canvas.width=D,l.canvas.height=I}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,D){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class o{constructor({baseUrl:l=null,isCompressed:D=!0}){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=D}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const D=this.baseUrl+l+(this.isCompressed?".bcmap":""),I=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(D,I).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${D}`)})}_fetchData(l,D){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class N{constructor({baseUrl:l=null}){this.constructor===N&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const D=`${this.baseUrl}${l}`;return this._fetchData(D).catch(I=>{throw new Error(`Unable to load font data at: ${D}`)})}_fetchData(l){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=N;class y{constructor(){this.constructor===y&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,D,I=!1){if(l<=0||D<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),I||(C.setAttribute("width",`${l}px`),C.setAttribute("height",`${D}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${l} ${D}`),C}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=y},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=e(1);const s=3285377520,a=4294901760,o=65535;class N{constructor(_){this.h1=_?_&4294967295:s,this.h2=_?_&4294967295:s}update(_){let l,D;if(typeof _=="string"){l=new Uint8Array(_.length*2),D=0;for(let k=0,w=_.length;k<w;k++){const h=_.charCodeAt(k);h<=255?l[D++]=h:(l[D++]=h>>>8,l[D++]=h&255)}}else if((0,i.isArrayBuffer)(_))l=_.slice(),D=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const I=D>>2,C=D-I*4,A=new Uint32Array(l.buffer,0,I);let b=0,E=0,O=this.h1,x=this.h2;const M=3432918353,S=461845907,u=M&o,p=S&o;for(let k=0;k<I;k++)k&1?(b=A[k],b=b*M&a|b*u&o,b=b<<15|b>>>17,b=b*S&a|b*p&o,O^=b,O=O<<13|O>>>19,O=O*5+3864292196):(E=A[k],E=E*M&a|E*u&o,E=E<<15|E>>>17,E=E*S&a|E*p&o,x^=E,x=x<<13|x>>>19,x=x*5+3864292196);switch(b=0,C){case 3:b^=l[I*4+2]<<16;case 2:b^=l[I*4+1]<<8;case 1:b^=l[I*4],b=b*M&a|b*u&o,b=b<<15|b>>>17,b=b*S&a|b*p&o,I&1?O^=b:x^=b}this.h1=O,this.h2=x}hexdigest(){let _=this.h1,l=this.h2;return _^=l>>>1,_=_*3981806797&a|_*36045&o,l=l*4283543511&a|((l<<16|_>>>16)*2950163797&a)>>>16,_^=l>>>1,_=_*444984403&a|_*60499&o,l=l*3301882366&a|((l<<16|_>>>16)*3120437893&a)>>>16,_^=l>>>1,(_>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=N},(n,t,e)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=e(1);class s{constructor({ownerDocument:y=globalThis.document,styleElement:_=null}){q(this,o,new Set);this._document=y,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(y){this.nativeFontFaces.add(y),this._document.fonts.add(y)}removeNativeFontFace(y){this.nativeFontFaces.delete(y),this._document.fonts.delete(y)}insertRule(y){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(y,_.cssRules.length)}clear(){for(const y of this.nativeFontFaces)this._document.fonts.delete(y);this.nativeFontFaces.clear(),r(this,o).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(y){if(!(!y||r(this,o).has(y.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:l,style:D}=y,I=new FontFace(_,l,D);this.addNativeFontFace(I);try{await I.load(),r(this,o).add(_)}catch{(0,i.warn)(`Cannot load system font: ${y.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(I)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(y){if(y.attached||y.missingFile&&!y.systemFontInfo)return;if(y.attached=!0,y.systemFontInfo){await this.loadSystemFont(y.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=y.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(D){throw(0,i.warn)(`Failed to load font '${l.family}': '${D}'.`),y.disableFontFace=!0,D}}return}const _=y.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const D=this._queueLoadingCallback(l);this._prepareFontLoadEvent(y,D)})}}get isFontLoadingAPISupported(){var _;const y=!!((_=this._document)!=null&&_.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){let y=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(y=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",y)}_queueLoadingCallback(y){function _(){for((0,i.assert)(!D.done,"completeRequest() cannot be called twice."),D.done=!0;l.length>0&&l[0].done;){const I=l.shift();setTimeout(I.callback,0)}}const{loadingRequests:l}=this,D={done:!1,complete:_,callback:y};return l.push(D),D}get _loadTestFont(){const y=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",y)}_prepareFontLoadEvent(y,_){function l(f,B){return f.charCodeAt(B)<<24|f.charCodeAt(B+1)<<16|f.charCodeAt(B+2)<<8|f.charCodeAt(B+3)&255}function D(f,B,U,X){const P=f.substring(0,B),Y=f.substring(B+U);return P+X+Y}let I,C;const A=this._document.createElement("canvas");A.width=1,A.height=1;const b=A.getContext("2d");let E=0;function O(f,B){if(++E>30){(0,i.warn)("Load test font never loaded."),B();return}if(b.font="30px "+f,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(O.bind(null,f,B))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=D(M,976,x.length,x);const u=16,p=1482184792;let k=l(M,u);for(I=0,C=x.length-3;I<C;I+=4)k=k-p+l(x,I)|0;I<x.length&&(k=k-p+l(x+"XXX",I)|0),M=D(M,u,4,(0,i.string32)(k));const w=`url(data:font/opentype;base64,${btoa(M)});`,h=`@font-face {font-family:"${x}";src:${w}}`;this.insertRule(h);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const f of[y.loadedName,x]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=f,g.append(B)}this._document.body.append(g),O(x,()=>{g.remove(),_.complete()})}}o=new WeakMap,t.FontLoader=s;class a{constructor(y,{isEvalSupported:_=!0,disableFontFace:l=!1,ignoreErrors:D=!1,inspectFont:I=null}){this.compiledGlyphs=Object.create(null);for(const C in y)this[C]=y[C];this.isEvalSupported=_!==!1,this.disableFontFace=l===!0,this.ignoreErrors=D===!0,this._inspectFont=I}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let y;if(!this.cssFontInfo)y=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),y=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(_=this._inspectFont)==null||_.call(this,this),y}createFontFaceRule(){var D;if(!this.data||this.disableFontFace)return null;const y=(0,i.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(y)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let I=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(I+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${I}src:${_}}`}return(D=this._inspectFont)==null||D.call(this,this,_),l}getPathGenerator(y,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let l;try{l=y.get(this.loadedName+"_path_"+_)}catch(D){if(!this.ignoreErrors)throw D;return(0,i.warn)(`getPathGenerator - ignoring character: "${D}".`),this.compiledGlyphs[_]=function(I,C){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const D=[];for(const I of l){const C=I.args!==void 0?I.args.join(","):"";D.push("c.",I.cmd,"(",C,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",D.join(""))}return this.compiledGlyphs[_]=function(D,I){for(const C of l)C.cmd==="scale"&&(C.args=[I,-I]),D[C.cmd].apply(D,C.args)}}}t.FontFaceObject=a},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=e(7);e(1);const s=function(_){return new Promise((l,D)=>{require$$5.readFile(_,(C,A)=>{if(C||!A){D(new Error(C));return}l(new Uint8Array(A))})})};class a extends i.BaseFilterFactory{}t.NodeFilterFactory=a;class o extends i.BaseCanvasFactory{_createCanvas(l,D){return require$$5.createCanvas(l,D)}}t.NodeCanvasFactory=o;class N extends i.BaseCMapReaderFactory{_fetchData(l,D){return s(l).then(I=>({cMapData:I,compressionType:D}))}}t.NodeCMapReaderFactory=N;class y extends i.BaseStandardFontDataFactory{_fetchData(l){return s(l)}}t.NodeStandardFontDataFactory=y},(n,t,e)=>{var V,Ie,st,ke;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=e(1),s=e(6),a=e(12),o=e(13);const N=16,y=100,_=4096,l=15,D=10,I=1e3,C=16;function A(W,d){if(W._removeMirroring)throw new Error("Context is already forwarding operations.");W.__originalSave=W.save,W.__originalRestore=W.restore,W.__originalRotate=W.rotate,W.__originalScale=W.scale,W.__originalTranslate=W.translate,W.__originalTransform=W.transform,W.__originalSetTransform=W.setTransform,W.__originalResetTransform=W.resetTransform,W.__originalClip=W.clip,W.__originalMoveTo=W.moveTo,W.__originalLineTo=W.lineTo,W.__originalBezierCurveTo=W.bezierCurveTo,W.__originalRect=W.rect,W.__originalClosePath=W.closePath,W.__originalBeginPath=W.beginPath,W._removeMirroring=()=>{W.save=W.__originalSave,W.restore=W.__originalRestore,W.rotate=W.__originalRotate,W.scale=W.__originalScale,W.translate=W.__originalTranslate,W.transform=W.__originalTransform,W.setTransform=W.__originalSetTransform,W.resetTransform=W.__originalResetTransform,W.clip=W.__originalClip,W.moveTo=W.__originalMoveTo,W.lineTo=W.__originalLineTo,W.bezierCurveTo=W.__originalBezierCurveTo,W.rect=W.__originalRect,W.closePath=W.__originalClosePath,W.beginPath=W.__originalBeginPath,delete W._removeMirroring},W.save=function(){d.save(),this.__originalSave()},W.restore=function(){d.restore(),this.__originalRestore()},W.translate=function(R,j){d.translate(R,j),this.__originalTranslate(R,j)},W.scale=function(R,j){d.scale(R,j),this.__originalScale(R,j)},W.transform=function(R,j,$,G,z,Z){d.transform(R,j,$,G,z,Z),this.__originalTransform(R,j,$,G,z,Z)},W.setTransform=function(R,j,$,G,z,Z){d.setTransform(R,j,$,G,z,Z),this.__originalSetTransform(R,j,$,G,z,Z)},W.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},W.rotate=function(R){d.rotate(R),this.__originalRotate(R)},W.clip=function(R){d.clip(R),this.__originalClip(R)},W.moveTo=function(c,R){d.moveTo(c,R),this.__originalMoveTo(c,R)},W.lineTo=function(c,R){d.lineTo(c,R),this.__originalLineTo(c,R)},W.bezierCurveTo=function(c,R,j,$,G,z){d.bezierCurveTo(c,R,j,$,G,z),this.__originalBezierCurveTo(c,R,j,$,G,z)},W.rect=function(c,R,j,$){d.rect(c,R,j,$),this.__originalRect(c,R,j,$)},W.closePath=function(){d.closePath(),this.__originalClosePath()},W.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class b{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,c,R){let j;return this.cache[d]!==void 0?(j=this.cache[d],this.canvasFactory.reset(j,c,R)):(j=this.canvasFactory.create(c,R),this.cache[d]=j),j}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const c=this.cache[d];this.canvasFactory.destroy(c),delete this.cache[d]}}}function E(W,d,c,R,j,$,G,z,Z,ut){const[ot,ht,pt,Tt,At,xt]=(0,s.getCurrentTransform)(W);if(ht===0&&pt===0){const It=G*ot+At,yt=Math.round(It),at=z*Tt+xt,it=Math.round(at),mt=(G+Z)*ot+At,bt=Math.abs(Math.round(mt)-yt)||1,Pt=(z+ut)*Tt+xt,Dt=Math.abs(Math.round(Pt)-it)||1;return W.setTransform(Math.sign(ot),0,0,Math.sign(Tt),yt,it),W.drawImage(d,c,R,j,$,0,0,bt,Dt),W.setTransform(ot,ht,pt,Tt,At,xt),[bt,Dt]}if(ot===0&&Tt===0){const It=z*pt+At,yt=Math.round(It),at=G*ht+xt,it=Math.round(at),mt=(z+ut)*pt+At,bt=Math.abs(Math.round(mt)-yt)||1,Pt=(G+Z)*ht+xt,Dt=Math.abs(Math.round(Pt)-it)||1;return W.setTransform(0,Math.sign(ht),Math.sign(pt),0,yt,it),W.drawImage(d,c,R,j,$,0,0,Dt,bt),W.setTransform(ot,ht,pt,Tt,At,xt),[Dt,bt]}W.drawImage(d,c,R,j,$,G,z,Z,ut);const Ht=Math.hypot(ot,ht),vt=Math.hypot(pt,Tt);return[Ht*Z,vt*ut]}function O(W){const{width:d,height:c}=W;if(d>I||c>I)return null;const R=1e3,j=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),$=d+1;let G=new Uint8Array($*(c+1)),z,Z,ut;const ot=d+7&-8;let ht=new Uint8Array(ot*c),pt=0;for(const vt of W.data){let It=128;for(;It>0;)ht[pt++]=vt&It?0:255,It>>=1}let Tt=0;for(pt=0,ht[pt]!==0&&(G[0]=1,++Tt),Z=1;Z<d;Z++)ht[pt]!==ht[pt+1]&&(G[Z]=ht[pt]?2:1,++Tt),pt++;for(ht[pt]!==0&&(G[Z]=2,++Tt),z=1;z<c;z++){pt=z*ot,ut=z*$,ht[pt-ot]!==ht[pt]&&(G[ut]=ht[pt]?1:8,++Tt);let vt=(ht[pt]?4:0)+(ht[pt-ot]?8:0);for(Z=1;Z<d;Z++)vt=(vt>>2)+(ht[pt+1]?4:0)+(ht[pt-ot+1]?8:0),j[vt]&&(G[ut+Z]=j[vt],++Tt),pt++;if(ht[pt-ot]!==ht[pt]&&(G[ut+Z]=ht[pt]?2:4,++Tt),Tt>R)return null}for(pt=ot*(c-1),ut=z*$,ht[pt]!==0&&(G[ut]=8,++Tt),Z=1;Z<d;Z++)ht[pt]!==ht[pt+1]&&(G[ut+Z]=ht[pt]?4:8,++Tt),pt++;if(ht[pt]!==0&&(G[ut+Z]=4,++Tt),Tt>R)return null;const At=new Int32Array([0,$,-1,0,-$,0,0,0,1]),xt=new Path2D;for(z=0;Tt&&z<=c;z++){let vt=z*$;const It=vt+d;for(;vt<It&&!G[vt];)vt++;if(vt===It)continue;xt.moveTo(vt%$,z);const yt=vt;let at=G[vt];do{const it=At[at];do vt+=it;while(!G[vt]);const mt=G[vt];mt!==5&&mt!==10?(at=mt,G[vt]=0):(at=mt&51*at>>4,G[vt]&=at>>2|at<<2),xt.lineTo(vt%$,vt/$|0),G[vt]||--Tt}while(yt!==vt);--z}return ht=null,G=null,function(vt){vt.save(),vt.scale(1/d,-1/c),vt.translate(0,-c),vt.fill(xt),vt.beginPath(),vt.restore()}}class x{constructor(d,c){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,c])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,c){this.x=d,this.y=c}updatePathMinMax(d,c,R){[c,R]=i.Util.applyTransform([c,R],d),this.minX=Math.min(this.minX,c),this.minY=Math.min(this.minY,R),this.maxX=Math.max(this.maxX,c),this.maxY=Math.max(this.maxY,R)}updateRectMinMax(d,c){const R=i.Util.applyTransform(c,d),j=i.Util.applyTransform(c.slice(2),d);this.minX=Math.min(this.minX,R[0],j[0]),this.minY=Math.min(this.minY,R[1],j[1]),this.maxX=Math.max(this.maxX,R[0],j[0]),this.maxY=Math.max(this.maxY,R[1],j[1])}updateScalingPathMinMax(d,c){i.Util.scaleMinMax(d,c),this.minX=Math.min(this.minX,c[0]),this.maxX=Math.max(this.maxX,c[1]),this.minY=Math.min(this.minY,c[2]),this.maxY=Math.max(this.maxY,c[3])}updateCurvePathMinMax(d,c,R,j,$,G,z,Z,ut,ot){const ht=i.Util.bezierBoundingBox(c,R,j,$,G,z,Z,ut);if(ot){ot[0]=Math.min(ot[0],ht[0],ht[2]),ot[1]=Math.max(ot[1],ht[0],ht[2]),ot[2]=Math.min(ot[2],ht[1],ht[3]),ot[3]=Math.max(ot[3],ht[1],ht[3]);return}this.updateRectMinMax(d,ht)}getPathBoundingBox(d=a.PathType.FILL,c=null){const R=[this.minX,this.minY,this.maxX,this.maxY];if(d===a.PathType.STROKE){c||(0,i.unreachable)("Stroke bounding box must include transform.");const j=i.Util.singularValueDecompose2dScale(c),$=j[0]*this.lineWidth/2,G=j[1]*this.lineWidth/2;R[0]-=$,R[1]-=G,R[2]+=$,R[3]+=G}return R}updateClipFromPath(){const d=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=a.PathType.FILL,c=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(d,c))}}function M(W,d){if(typeof ImageData<"u"&&d instanceof ImageData){W.putImageData(d,0,0);return}const c=d.height,R=d.width,j=c%C,$=(c-j)/C,G=j===0?$:$+1,z=W.createImageData(R,C);let Z=0,ut;const ot=d.data,ht=z.data;let pt,Tt,At,xt;if(d.kind===i.ImageKind.GRAYSCALE_1BPP){const Ht=ot.byteLength,vt=new Uint32Array(ht.buffer,0,ht.byteLength>>2),It=vt.length,yt=R+7>>3,at=4294967295,it=i.FeatureTest.isLittleEndian?4278190080:255;for(pt=0;pt<G;pt++){for(At=pt<$?C:j,ut=0,Tt=0;Tt<At;Tt++){const mt=Ht-Z;let bt=0;const Pt=mt>yt?R:mt*8-7,Dt=Pt&-8;let Wt=0,kt=0;for(;bt<Dt;bt+=8)kt=ot[Z++],vt[ut++]=kt&128?at:it,vt[ut++]=kt&64?at:it,vt[ut++]=kt&32?at:it,vt[ut++]=kt&16?at:it,vt[ut++]=kt&8?at:it,vt[ut++]=kt&4?at:it,vt[ut++]=kt&2?at:it,vt[ut++]=kt&1?at:it;for(;bt<Pt;bt++)Wt===0&&(kt=ot[Z++],Wt=128),vt[ut++]=kt&Wt?at:it,Wt>>=1}for(;ut<It;)vt[ut++]=0;W.putImageData(z,0,pt*C)}}else if(d.kind===i.ImageKind.RGBA_32BPP){for(Tt=0,xt=R*C*4,pt=0;pt<$;pt++)ht.set(ot.subarray(Z,Z+xt)),Z+=xt,W.putImageData(z,0,Tt),Tt+=C;pt<G&&(xt=R*j*4,ht.set(ot.subarray(Z,Z+xt)),W.putImageData(z,0,Tt))}else if(d.kind===i.ImageKind.RGB_24BPP)for(At=C,xt=R*At,pt=0;pt<G;pt++){for(pt>=$&&(At=j,xt=R*At),ut=0,Tt=xt;Tt--;)ht[ut++]=ot[Z++],ht[ut++]=ot[Z++],ht[ut++]=ot[Z++],ht[ut++]=255;W.putImageData(z,0,pt*C)}else throw new Error(`bad image kind: ${d.kind}`)}function S(W,d){if(d.bitmap){W.drawImage(d.bitmap,0,0);return}const c=d.height,R=d.width,j=c%C,$=(c-j)/C,G=j===0?$:$+1,z=W.createImageData(R,C);let Z=0;const ut=d.data,ot=z.data;for(let ht=0;ht<G;ht++){const pt=ht<$?C:j;({srcPos:Z}=(0,o.convertBlackAndWhiteToRGBA)({src:ut,srcPos:Z,dest:ot,width:R,height:pt,nonBlackColor:0})),W.putImageData(z,0,ht*C)}}function u(W,d){const c=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const R of c)W[R]!==void 0&&(d[R]=W[R]);W.setLineDash!==void 0&&(d.setLineDash(W.getLineDash()),d.lineDashOffset=W.lineDashOffset)}function p(W){if(W.strokeStyle=W.fillStyle="#000000",W.fillRule="nonzero",W.globalAlpha=1,W.lineWidth=1,W.lineCap="butt",W.lineJoin="miter",W.miterLimit=10,W.globalCompositeOperation="source-over",W.font="10px sans-serif",W.setLineDash!==void 0&&(W.setLineDash([]),W.lineDashOffset=0),!i.isNodeJS){const{filter:d}=W;d!=="none"&&d!==""&&(W.filter="none")}}function k(W,d,c,R){const j=W.length;for(let $=3;$<j;$+=4){const G=W[$];if(G===0)W[$-3]=d,W[$-2]=c,W[$-1]=R;else if(G<255){const z=255-G;W[$-3]=W[$-3]*G+d*z>>8,W[$-2]=W[$-2]*G+c*z>>8,W[$-1]=W[$-1]*G+R*z>>8}}}function w(W,d,c){const R=W.length,j=1/255;for(let $=3;$<R;$+=4){const G=c?c[W[$]]:W[$];d[$]=d[$]*G*j|0}}function h(W,d,c){const R=W.length;for(let j=3;j<R;j+=4){const $=W[j-3]*77+W[j-2]*152+W[j-1]*28;d[j]=c?d[j]*c[$>>8]>>8:d[j]*$>>16}}function g(W,d,c,R,j,$,G,z,Z,ut,ot){const ht=!!$,pt=ht?$[0]:0,Tt=ht?$[1]:0,At=ht?$[2]:0,xt=j==="Luminosity"?h:w,vt=Math.min(R,Math.ceil(1048576/c));for(let It=0;It<R;It+=vt){const yt=Math.min(vt,R-It),at=W.getImageData(z-ut,It+(Z-ot),c,yt),it=d.getImageData(z,It+Z,c,yt);ht&&k(at.data,pt,Tt,At),xt(at.data,it.data,G),d.putImageData(it,z,It+Z)}}function f(W,d,c,R){const j=R[0],$=R[1],G=R[2]-j,z=R[3]-$;G===0||z===0||(g(d.context,c,G,z,d.subtype,d.backdrop,d.transferMap,j,$,d.offsetX,d.offsetY),W.save(),W.globalAlpha=1,W.globalCompositeOperation="source-over",W.setTransform(1,0,0,1,0,0),W.drawImage(c.canvas,0,0),W.restore())}function B(W,d){const c=i.Util.singularValueDecompose2dScale(W);c[0]=Math.fround(c[0]),c[1]=Math.fround(c[1]);const R=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:c[0]<=R||c[1]<=R}const U=["butt","round","square"],X=["miter","round","bevel"],P={},Y={},Et=class Et{constructor(d,c,R,j,$,{optionalContentConfig:G,markedContentStack:z=null},Z,ut){q(this,V);q(this,st);this.ctx=d,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=c,this.objs=R,this.canvasFactory=j,this.filterFactory=$,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=z||[],this.optionalContentConfig=G,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Z,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ut,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,c=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):c}beginDrawing({transform:d,viewport:c,transparency:R=!1,background:j=null}){const $=this.ctx.canvas.width,G=this.ctx.canvas.height,z=this.ctx.fillStyle;if(this.ctx.fillStyle=j||"#ffffff",this.ctx.fillRect(0,0,$,G),this.ctx.fillStyle=z,R){const Z=this.cachedCanvases.getCanvas("transparent",$,G);this.compositeCtx=this.ctx,this.transparentCanvas=Z.canvas,this.ctx=Z.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),p(this.ctx),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...c.transform),this.viewportScale=c.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(d,c,R,j){const $=d.argsArray,G=d.fnArray;let z=c||0;const Z=$.length;if(Z===z)return z;const ut=Z-z>D&&typeof R=="function",ot=ut?Date.now()+l:0;let ht=0;const pt=this.commonObjs,Tt=this.objs;let At;for(;;){if(j!==void 0&&z===j.nextBreakPoint)return j.breakIt(z,R),z;if(At=G[z],At!==i.OPS.dependency)this[At].apply(this,$[z]);else for(const xt of $[z]){const Ht=xt.startsWith("g_")?pt:Tt;if(!Ht.has(xt))return Ht.get(xt,R),z}if(z++,z===Z)return z;if(ut&&++ht>D){if(Date.now()>ot)return R(),z;ht=0}}}endDrawing(){nt(this,V,Ie).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const c of d.values())typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement&&(c.width=c.height=0);d.clear()}this._cachedBitmapsMap.clear(),nt(this,st,ke).call(this)}_scaleImage(d,c){const R=d.width,j=d.height;let $=Math.max(Math.hypot(c[0],c[1]),1),G=Math.max(Math.hypot(c[2],c[3]),1),z=R,Z=j,ut="prescale1",ot,ht;for(;$>2&&z>1||G>2&&Z>1;){let pt=z,Tt=Z;$>2&&z>1&&(pt=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z/2),$/=z/pt),G>2&&Z>1&&(Tt=Z>=16384?Math.floor(Z/2)-1||1:Math.ceil(Z)/2,G/=Z/Tt),ot=this.cachedCanvases.getCanvas(ut,pt,Tt),ht=ot.context,ht.clearRect(0,0,pt,Tt),ht.drawImage(d,0,0,z,Z,0,0,pt,Tt),d=ot.canvas,z=pt,Z=Tt,ut=ut==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:z,paintHeight:Z}}_createMaskCanvas(d){const c=this.ctx,{width:R,height:j}=d,$=this.current.fillColor,G=this.current.patternFill,z=(0,s.getCurrentTransform)(c);let Z,ut,ot,ht;if((d.bitmap||d.data)&&d.count>1){const bt=d.bitmap||d.data.buffer;ut=JSON.stringify(G?z:[z.slice(0,4),$]),Z=this._cachedBitmapsMap.get(bt),Z||(Z=new Map,this._cachedBitmapsMap.set(bt,Z));const Pt=Z.get(ut);if(Pt&&!G){const Dt=Math.round(Math.min(z[0],z[2])+z[4]),Wt=Math.round(Math.min(z[1],z[3])+z[5]);return{canvas:Pt,offsetX:Dt,offsetY:Wt}}ot=Pt}ot||(ht=this.cachedCanvases.getCanvas("maskCanvas",R,j),S(ht.context,d));let pt=i.Util.transform(z,[1/R,0,0,-1/j,0,0]);pt=i.Util.transform(pt,[1,0,0,1,0,-j]);const Tt=i.Util.applyTransform([0,0],pt),At=i.Util.applyTransform([R,j],pt),xt=i.Util.normalizeRect([Tt[0],Tt[1],At[0],At[1]]),Ht=Math.round(xt[2]-xt[0])||1,vt=Math.round(xt[3]-xt[1])||1,It=this.cachedCanvases.getCanvas("fillCanvas",Ht,vt),yt=It.context,at=Math.min(Tt[0],At[0]),it=Math.min(Tt[1],At[1]);yt.translate(-at,-it),yt.transform(...pt),ot||(ot=this._scaleImage(ht.canvas,(0,s.getCurrentTransformInverse)(yt)),ot=ot.img,Z&&G&&Z.set(ut,ot)),yt.imageSmoothingEnabled=B((0,s.getCurrentTransform)(yt),d.interpolate),E(yt,ot,0,0,ot.width,ot.height,0,0,R,j),yt.globalCompositeOperation="source-in";const mt=i.Util.transform((0,s.getCurrentTransformInverse)(yt),[1,0,0,1,-at,-it]);return yt.fillStyle=G?$.getPattern(c,this,mt,a.PathType.FILL):$,yt.fillRect(0,0,R,j),Z&&!G&&(this.cachedCanvases.delete("fillCanvas"),Z.set(ut,It.canvas)),{canvas:It.canvas,offsetX:Math.round(at),offsetY:Math.round(it)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=U[d]}setLineJoin(d){this.ctx.lineJoin=X[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,c){const R=this.ctx;R.setLineDash!==void 0&&(R.setLineDash(d),R.lineDashOffset=c)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[c,R]of d)switch(c){case"LW":this.setLineWidth(R);break;case"LC":this.setLineCap(R);break;case"LJ":this.setLineJoin(R);break;case"ML":this.setMiterLimit(R);break;case"D":this.setDash(R[0],R[1]);break;case"RI":this.setRenderingIntent(R);break;case"FL":this.setFlatness(R);break;case"Font":this.setFont(R[0],R[1]);break;case"CA":this.current.strokeAlpha=R;break;case"ca":this.current.fillAlpha=R,this.ctx.globalAlpha=R;break;case"BM":this.ctx.globalCompositeOperation=R;break;case"SMask":this.current.activeSMask=R?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(R);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,c=this.ctx.canvas.height,R="smaskGroupAt"+this.groupLevel,j=this.cachedCanvases.getCanvas(R,d,c);this.suspendedCtx=this.ctx,this.ctx=j.context;const $=this.ctx;$.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),u(this.suspendedCtx,$),A($,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const c=this.current.activeSMask,R=this.suspendedCtx;f(R,c,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(d,c,R,j,$,G){this.ctx.transform(d,c,R,j,$,G),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(d,c,R){const j=this.ctx,$=this.current;let G=$.x,z=$.y,Z,ut;const ot=(0,s.getCurrentTransform)(j),ht=ot[0]===0&&ot[3]===0||ot[1]===0&&ot[2]===0,pt=ht?R.slice(0):null;for(let Tt=0,At=0,xt=d.length;Tt<xt;Tt++)switch(d[Tt]|0){case i.OPS.rectangle:G=c[At++],z=c[At++];const Ht=c[At++],vt=c[At++],It=G+Ht,yt=z+vt;j.moveTo(G,z),Ht===0||vt===0?j.lineTo(It,yt):(j.lineTo(It,z),j.lineTo(It,yt),j.lineTo(G,yt)),ht||$.updateRectMinMax(ot,[G,z,It,yt]),j.closePath();break;case i.OPS.moveTo:G=c[At++],z=c[At++],j.moveTo(G,z),ht||$.updatePathMinMax(ot,G,z);break;case i.OPS.lineTo:G=c[At++],z=c[At++],j.lineTo(G,z),ht||$.updatePathMinMax(ot,G,z);break;case i.OPS.curveTo:Z=G,ut=z,G=c[At+4],z=c[At+5],j.bezierCurveTo(c[At],c[At+1],c[At+2],c[At+3],G,z),$.updateCurvePathMinMax(ot,Z,ut,c[At],c[At+1],c[At+2],c[At+3],G,z,pt),At+=6;break;case i.OPS.curveTo2:Z=G,ut=z,j.bezierCurveTo(G,z,c[At],c[At+1],c[At+2],c[At+3]),$.updateCurvePathMinMax(ot,Z,ut,G,z,c[At],c[At+1],c[At+2],c[At+3],pt),G=c[At+2],z=c[At+3],At+=4;break;case i.OPS.curveTo3:Z=G,ut=z,G=c[At+2],z=c[At+3],j.bezierCurveTo(c[At],c[At+1],G,z,G,z),$.updateCurvePathMinMax(ot,Z,ut,c[At],c[At+1],G,z,G,z,pt),At+=4;break;case i.OPS.closePath:j.closePath();break}ht&&$.updateScalingPathMinMax(ot,pt),$.setCurrentPoint(G,z)}closePath(){this.ctx.closePath()}stroke(d=!0){const c=this.ctx,R=this.current.strokeColor;c.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof R=="object"&&(R!=null&&R.getPattern)?(c.save(),c.strokeStyle=R.getPattern(c,this,(0,s.getCurrentTransformInverse)(c),a.PathType.STROKE),this.rescaleAndStroke(!1),c.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),c.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d=!0){const c=this.ctx,R=this.current.fillColor,j=this.current.patternFill;let $=!1;j&&(c.save(),c.fillStyle=R.getPattern(c,this,(0,s.getCurrentTransformInverse)(c),a.PathType.FILL),$=!0);const G=this.current.getClippedPathBoundingBox();this.contentVisible&&G!==null&&(this.pendingEOFill?(c.fill("evenodd"),this.pendingEOFill=!1):c.fill()),$&&c.restore(),d&&this.consumePath(G)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=P}eoClip(){this.pendingClip=Y}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,c=this.ctx;if(d===void 0){c.beginPath();return}c.save(),c.beginPath();for(const R of d)c.setTransform(...R.transform),c.translate(R.x,R.y),R.addToPath(c,R.fontSize);c.restore(),c.clip(),c.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,c){var ot;const R=this.commonObjs.get(d),j=this.current;if(!R)throw new Error(`Can't find font for ${d}`);if(j.fontMatrix=R.fontMatrix||i.FONT_IDENTITY_MATRIX,(j.fontMatrix[0]===0||j.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+d),c<0?(c=-c,j.fontDirection=-1):j.fontDirection=1,this.current.font=R,this.current.fontSize=c,R.isType3Font)return;const $=R.loadedName||"sans-serif",G=((ot=R.systemFontInfo)==null?void 0:ot.css)||`"${$}", ${R.fallbackName}`;let z="normal";R.black?z="900":R.bold&&(z="bold");const Z=R.italic?"italic":"normal";let ut=c;c<N?ut=N:c>y&&(ut=y),this.current.fontSizeScale=c/ut,this.ctx.font=`${Z} ${z} ${ut}px ${G}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,c){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=c}setLeadingMoveText(d,c){this.setLeading(-c),this.moveText(d,c)}setTextMatrix(d,c,R,j,$,G){this.current.textMatrix=[d,c,R,j,$,G],this.current.textMatrixScale=Math.hypot(d,c),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,c,R,j){const $=this.ctx,G=this.current,z=G.font,Z=G.textRenderingMode,ut=G.fontSize/G.fontSizeScale,ot=Z&i.TextRenderingMode.FILL_STROKE_MASK,ht=!!(Z&i.TextRenderingMode.ADD_TO_PATH_FLAG),pt=G.patternFill&&!z.missingFile;let Tt;(z.disableFontFace||ht||pt)&&(Tt=z.getPathGenerator(this.commonObjs,d)),z.disableFontFace||pt?($.save(),$.translate(c,R),$.beginPath(),Tt($,ut),j&&$.setTransform(...j),(ot===i.TextRenderingMode.FILL||ot===i.TextRenderingMode.FILL_STROKE)&&$.fill(),(ot===i.TextRenderingMode.STROKE||ot===i.TextRenderingMode.FILL_STROKE)&&$.stroke(),$.restore()):((ot===i.TextRenderingMode.FILL||ot===i.TextRenderingMode.FILL_STROKE)&&$.fillText(d,c,R),(ot===i.TextRenderingMode.STROKE||ot===i.TextRenderingMode.FILL_STROKE)&&$.strokeText(d,c,R)),ht&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)($),x:c,y:R,fontSize:ut,addToPath:Tt})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const c=d.getImageData(0,0,10,10).data;let R=!1;for(let j=3;j<c.length;j+=4)if(c[j]>0&&c[j]<255){R=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",R)}showText(d){const c=this.current,R=c.font;if(R.isType3Font)return this.showType3Text(d);const j=c.fontSize;if(j===0)return;const $=this.ctx,G=c.fontSizeScale,z=c.charSpacing,Z=c.wordSpacing,ut=c.fontDirection,ot=c.textHScale*ut,ht=d.length,pt=R.vertical,Tt=pt?1:-1,At=R.defaultVMetrics,xt=j*c.fontMatrix[0],Ht=c.textRenderingMode===i.TextRenderingMode.FILL&&!R.disableFontFace&&!c.patternFill;$.save(),$.transform(...c.textMatrix),$.translate(c.x,c.y+c.textRise),ut>0?$.scale(ot,-1):$.scale(ot,1);let vt;if(c.patternFill){$.save();const mt=c.fillColor.getPattern($,this,(0,s.getCurrentTransformInverse)($),a.PathType.FILL);vt=(0,s.getCurrentTransform)($),$.restore(),$.fillStyle=mt}let It=c.lineWidth;const yt=c.textMatrixScale;if(yt===0||It===0){const mt=c.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(mt===i.TextRenderingMode.STROKE||mt===i.TextRenderingMode.FILL_STROKE)&&(It=this.getSinglePixelWidth())}else It/=yt;if(G!==1&&($.scale(G,G),It/=G),$.lineWidth=It,R.isInvalidPDFjsFont){const mt=[];let bt=0;for(const Pt of d)mt.push(Pt.unicode),bt+=Pt.width;$.fillText(mt.join(""),0,0),c.x+=bt*xt*ot,$.restore(),this.compose();return}let at=0,it;for(it=0;it<ht;++it){const mt=d[it];if(typeof mt=="number"){at+=Tt*mt*j/1e3;continue}let bt=!1;const Pt=(mt.isSpace?Z:0)+z,Dt=mt.fontChar,Wt=mt.accent;let kt,Gt,Ut=mt.width;if(pt){const dt=mt.vmetric||At,tt=-(mt.vmetric?dt[1]:Ut*.5)*xt,et=dt[2]*xt;Ut=dt?-dt[0]:Ut,kt=tt/G,Gt=(at+et)/G}else kt=at/G,Gt=0;if(R.remeasure&&Ut>0){const dt=$.measureText(Dt).width*1e3/j*G;if(Ut<dt&&this.isFontSubpixelAAEnabled){const tt=Ut/dt;bt=!0,$.save(),$.scale(tt,1),kt/=tt}else Ut!==dt&&(kt+=(Ut-dt)/2e3*j/G)}if(this.contentVisible&&(mt.isInFont||R.missingFile)){if(Ht&&!Wt)$.fillText(Dt,kt,Gt);else if(this.paintChar(Dt,kt,Gt,vt),Wt){const dt=kt+j*Wt.offset.x/G,tt=Gt-j*Wt.offset.y/G;this.paintChar(Wt.fontChar,dt,tt,vt)}}const Vt=pt?Ut*xt-Pt*ut:Ut*xt+Pt*ut;at+=Vt,bt&&$.restore()}pt?c.y-=at:c.x+=at*ot,$.restore(),this.compose()}showType3Text(d){const c=this.ctx,R=this.current,j=R.font,$=R.fontSize,G=R.fontDirection,z=j.vertical?1:-1,Z=R.charSpacing,ut=R.wordSpacing,ot=R.textHScale*G,ht=R.fontMatrix||i.FONT_IDENTITY_MATRIX,pt=d.length,Tt=R.textRenderingMode===i.TextRenderingMode.INVISIBLE;let At,xt,Ht,vt;if(!(Tt||$===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,c.save(),c.transform(...R.textMatrix),c.translate(R.x,R.y),c.scale(ot,G),At=0;At<pt;++At){if(xt=d[At],typeof xt=="number"){vt=z*xt*$/1e3,this.ctx.translate(vt,0),R.x+=vt*ot;continue}const It=(xt.isSpace?ut:0)+Z,yt=j.charProcOperatorList[xt.operatorListId];if(!yt){(0,i.warn)(`Type3 character "${xt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=xt,this.save(),c.scale($,$),c.transform(...ht),this.executeOperatorList(yt),this.restore()),Ht=i.Util.applyTransform([xt.width,0],ht)[0]*$+It,c.translate(Ht,0),R.x+=Ht*ot}c.restore(),this.processingType3=null}}setCharWidth(d,c){}setCharWidthAndBounds(d,c,R,j,$,G){this.ctx.rect(R,j,$-R,G-j),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let c;if(d[0]==="TilingPattern"){const R=d[1],j=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),$={createCanvasGraphics:G=>new Et(G,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};c=new a.TilingPattern(d,R,this.ctx,$,j)}else c=this._getPattern(d[1],d[2]);return c}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,c,R){const j=i.Util.makeHexColor(d,c,R);this.ctx.strokeStyle=j,this.current.strokeColor=j}setFillRGBColor(d,c,R){const j=i.Util.makeHexColor(d,c,R);this.ctx.fillStyle=j,this.current.fillColor=j,this.current.patternFill=!1}_getPattern(d,c=null){let R;return this.cachedPatterns.has(d)?R=this.cachedPatterns.get(d):(R=(0,a.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,R)),c&&(R.matrix=c),R}shadingFill(d){if(!this.contentVisible)return;const c=this.ctx;this.save();const R=this._getPattern(d);c.fillStyle=R.getPattern(c,this,(0,s.getCurrentTransformInverse)(c),a.PathType.SHADING);const j=(0,s.getCurrentTransformInverse)(c);if(j){const{width:$,height:G}=c.canvas,[z,Z,ut,ot]=i.Util.getAxialAlignedBoundingBox([0,0,$,G],j);this.ctx.fillRect(z,Z,ut-z,ot-Z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,c){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),c)){const R=c[2]-c[0],j=c[3]-c[1];this.ctx.rect(c[0],c[1],R,j),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),c),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const c=this.ctx;d.isolated||(0,i.info)("TODO: Support non-isolated groups."),d.knockout&&(0,i.warn)("Knockout groups not supported.");const R=(0,s.getCurrentTransform)(c);if(d.matrix&&c.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let j=i.Util.getAxialAlignedBoundingBox(d.bbox,(0,s.getCurrentTransform)(c));const $=[0,0,c.canvas.width,c.canvas.height];j=i.Util.intersect(j,$)||[0,0,0,0];const G=Math.floor(j[0]),z=Math.floor(j[1]);let Z=Math.max(Math.ceil(j[2])-G,1),ut=Math.max(Math.ceil(j[3])-z,1),ot=1,ht=1;Z>_&&(ot=Z/_,Z=_),ut>_&&(ht=ut/_,ut=_),this.current.startNewPathAndClipBox([0,0,Z,ut]);let pt="groupAt"+this.groupLevel;d.smask&&(pt+="_smask_"+this.smaskCounter++%2);const Tt=this.cachedCanvases.getCanvas(pt,Z,ut),At=Tt.context;At.scale(1/ot,1/ht),At.translate(-G,-z),At.transform(...R),d.smask?this.smaskStack.push({canvas:Tt.canvas,context:At,offsetX:G,offsetY:z,scaleX:ot,scaleY:ht,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(c.setTransform(1,0,0,1,0,0),c.translate(G,z),c.scale(ot,ht),c.save()),u(c,At),this.ctx=At,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(c),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const c=this.ctx,R=this.groupStack.pop();if(this.ctx=R,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const j=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...j);const $=i.Util.getAxialAlignedBoundingBox([0,0,c.canvas.width,c.canvas.height],j);this.ctx.drawImage(c.canvas,0,0),this.ctx.restore(),this.compose($)}}beginAnnotation(d,c,R,j,$){if(nt(this,V,Ie).call(this),p(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(c)&&c.length===4){const G=c[2]-c[0],z=c[3]-c[1];if($&&this.annotationCanvasMap){R=R.slice(),R[4]-=c[0],R[5]-=c[1],c=c.slice(),c[0]=c[1]=0,c[2]=G,c[3]=z;const[Z,ut]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:ot}=this,ht=Math.ceil(G*this.outputScaleX*ot),pt=Math.ceil(z*this.outputScaleY*ot);this.annotationCanvas=this.canvasFactory.create(ht,pt);const{canvas:Tt,context:At}=this.annotationCanvas;this.annotationCanvasMap.set(d,Tt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=At,this.ctx.save(),this.ctx.setTransform(Z,0,0,-ut,0,z*ut),p(this.ctx)}else p(this.ctx),this.ctx.rect(c[0],c[1],G,z),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...R),this.transform(...j)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),nt(this,st,ke).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const c=d.count;d=this.getObject(d.data,d),d.count=c;const R=this.ctx,j=this.processingType3;if(j&&(j.compiled===void 0&&(j.compiled=O(d)),j.compiled)){j.compiled(R);return}const $=this._createMaskCanvas(d),G=$.canvas;R.save(),R.setTransform(1,0,0,1,0,0),R.drawImage(G,$.offsetX,$.offsetY),R.restore(),this.compose()}paintImageMaskXObjectRepeat(d,c,R=0,j=0,$,G){if(!this.contentVisible)return;d=this.getObject(d.data,d);const z=this.ctx;z.save();const Z=(0,s.getCurrentTransform)(z);z.transform(c,R,j,$,0,0);const ut=this._createMaskCanvas(d);z.setTransform(1,0,0,1,ut.offsetX-Z[4],ut.offsetY-Z[5]);for(let ot=0,ht=G.length;ot<ht;ot+=2){const pt=i.Util.transform(Z,[c,R,j,$,G[ot],G[ot+1]]),[Tt,At]=i.Util.applyTransform([0,0],pt);z.drawImage(ut.canvas,Tt,At)}z.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const c=this.ctx,R=this.current.fillColor,j=this.current.patternFill;for(const $ of d){const{data:G,width:z,height:Z,transform:ut}=$,ot=this.cachedCanvases.getCanvas("maskCanvas",z,Z),ht=ot.context;ht.save();const pt=this.getObject(G,$);S(ht,pt),ht.globalCompositeOperation="source-in",ht.fillStyle=j?R.getPattern(ht,this,(0,s.getCurrentTransformInverse)(c),a.PathType.FILL):R,ht.fillRect(0,0,z,Z),ht.restore(),c.save(),c.transform(...ut),c.scale(1,-1),E(c,ot.canvas,0,0,z,Z,0,-1,1,1),c.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const c=this.getObject(d);if(!c){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(c)}paintImageXObjectRepeat(d,c,R,j){if(!this.contentVisible)return;const $=this.getObject(d);if(!$){(0,i.warn)("Dependent image isn't ready yet");return}const G=$.width,z=$.height,Z=[];for(let ut=0,ot=j.length;ut<ot;ut+=2)Z.push({transform:[c,0,0,R,j[ut],j[ut+1]],x:0,y:0,w:G,h:z});this.paintInlineImageXObjectGroup($,Z)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:c,width:R,height:j}=d,$=this.cachedCanvases.getCanvas("inlineImage",R,j),G=$.context;return G.filter=this.current.transferMaps,G.drawImage(c,0,0),G.filter="none",$.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const c=d.width,R=d.height,j=this.ctx;if(this.save(),!i.isNodeJS){const{filter:z}=j;z!=="none"&&z!==""&&(j.filter="none")}j.scale(1/c,-1/R);let $;if(d.bitmap)$=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)$=d;else{const Z=this.cachedCanvases.getCanvas("inlineImage",c,R).context;M(Z,d),$=this.applyTransferMapsToCanvas(Z)}const G=this._scaleImage($,(0,s.getCurrentTransformInverse)(j));j.imageSmoothingEnabled=B((0,s.getCurrentTransform)(j),d.interpolate),E(j,G.img,0,0,G.paintWidth,G.paintHeight,0,-R,c,R),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,c){if(!this.contentVisible)return;const R=this.ctx;let j;if(d.bitmap)j=d.bitmap;else{const $=d.width,G=d.height,Z=this.cachedCanvases.getCanvas("inlineImage",$,G).context;M(Z,d),j=this.applyTransferMapsToCanvas(Z)}for(const $ of c)R.save(),R.transform(...$.transform),R.scale(1,-1),E(R,j,$.x,$.y,$.w,$.h,0,-1,1,1),R.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,c){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,c){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(c)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const c=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const R=this.ctx;this.pendingClip&&(c||(this.pendingClip===Y?R.clip("evenodd"):R.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),R.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,s.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const c=Math.abs(d[0]*d[3]-d[2]*d[1]),R=Math.hypot(d[0],d[2]),j=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(R,j)/c}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:d}=this.current,{a:c,b:R,c:j,d:$}=this.ctx.getTransform();let G,z;if(R===0&&j===0){const Z=Math.abs(c),ut=Math.abs($);if(Z===ut)if(d===0)G=z=1/Z;else{const ot=Z*d;G=z=ot<1?1/ot:1}else if(d===0)G=1/Z,z=1/ut;else{const ot=Z*d,ht=ut*d;G=ot<1?1/ot:1,z=ht<1?1/ht:1}}else{const Z=Math.abs(c*$-R*j),ut=Math.hypot(c,R),ot=Math.hypot(j,$);if(d===0)G=ot/Z,z=ut/Z;else{const ht=d*Z;G=ot>ht?ot/ht:1,z=ut>ht?ut/ht:1}}this._cachedScaleForStroking[0]=G,this._cachedScaleForStroking[1]=z}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:c}=this,{lineWidth:R}=this.current,[j,$]=this.getScaleForStroking();if(c.lineWidth=R||1,j===1&&$===1){c.stroke();return}const G=c.getLineDash();if(d&&c.save(),c.scale(j,$),G.length>0){const z=Math.max(j,$);c.setLineDash(G.map(Z=>Z/z)),c.lineDashOffset/=z}c.stroke(),d&&c.restore()}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};V=new WeakSet,Ie=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},st=new WeakSet,ke=function(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const c=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=c}}};let H=Et;t.CanvasGraphics=H;for(const W in i.OPS)H.prototype[W]!==void 0&&(H.prototype[i.OPS[W]]=H.prototype[W])},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=C;var i=e(1),s=e(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=a;function o(O,x){if(!x)return;const M=x[2]-x[0],S=x[3]-x[1],u=new Path2D;u.rect(x[0],x[1],M,S),O.clip(u)}class N{constructor(){this.constructor===N&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class y extends N{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let M;this._type==="axial"?M=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(M=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)M.addColorStop(S[0],S[1]);return M}getPattern(x,M,S,u){let p;if(u===a.STROKE||u===a.FILL){const k=M.current.getClippedPathBoundingBox(u,(0,s.getCurrentTransform)(x))||[0,0,0,0],w=Math.ceil(k[2]-k[0])||1,h=Math.ceil(k[3]-k[1])||1,g=M.cachedCanvases.getCanvas("pattern",w,h,!0),f=g.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-k[0],-k[1]),S=i.Util.transform(S,[1,0,0,1,k[0],k[1]]),f.transform(...M.baseTransform),this.matrix&&f.transform(...this.matrix),o(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),p=x.createPattern(g.canvas,"no-repeat");const B=new DOMMatrix(S);p.setTransform(B)}else o(x,this._bbox),p=this._createGradient(x);return p}}function _(O,x,M,S,u,p,k,w){const h=x.coords,g=x.colors,f=O.data,B=O.width*4;let U;h[M+1]>h[S+1]&&(U=M,M=S,S=U,U=p,p=k,k=U),h[S+1]>h[u+1]&&(U=S,S=u,u=U,U=k,k=w,w=U),h[M+1]>h[S+1]&&(U=M,M=S,S=U,U=p,p=k,k=U);const X=(h[M]+x.offsetX)*x.scaleX,P=(h[M+1]+x.offsetY)*x.scaleY,Y=(h[S]+x.offsetX)*x.scaleX,H=(h[S+1]+x.offsetY)*x.scaleY,V=(h[u]+x.offsetX)*x.scaleX,Q=(h[u+1]+x.offsetY)*x.scaleY;if(P>=Q)return;const st=g[p],ft=g[p+1],Et=g[p+2],W=g[k],d=g[k+1],c=g[k+2],R=g[w],j=g[w+1],$=g[w+2],G=Math.round(P),z=Math.round(Q);let Z,ut,ot,ht,pt,Tt,At,xt;for(let Ht=G;Ht<=z;Ht++){if(Ht<H){const it=Ht<P?0:(P-Ht)/(P-H);Z=X-(X-Y)*it,ut=st-(st-W)*it,ot=ft-(ft-d)*it,ht=Et-(Et-c)*it}else{let it;Ht>Q?it=1:H===Q?it=0:it=(H-Ht)/(H-Q),Z=Y-(Y-V)*it,ut=W-(W-R)*it,ot=d-(d-j)*it,ht=c-(c-$)*it}let vt;Ht<P?vt=0:Ht>Q?vt=1:vt=(P-Ht)/(P-Q),pt=X-(X-V)*vt,Tt=st-(st-R)*vt,At=ft-(ft-j)*vt,xt=Et-(Et-$)*vt;const It=Math.round(Math.min(Z,pt)),yt=Math.round(Math.max(Z,pt));let at=B*Ht+It*4;for(let it=It;it<=yt;it++)vt=(Z-it)/(Z-pt),vt<0?vt=0:vt>1&&(vt=1),f[at++]=ut-(ut-Tt)*vt|0,f[at++]=ot-(ot-At)*vt|0,f[at++]=ht-(ht-xt)*vt|0,f[at++]=255}}function l(O,x,M){const S=x.coords,u=x.colors;let p,k;switch(x.type){case"lattice":const w=x.verticesPerRow,h=Math.floor(S.length/w)-1,g=w-1;for(p=0;p<h;p++){let f=p*w;for(let B=0;B<g;B++,f++)_(O,M,S[f],S[f+1],S[f+w],u[f],u[f+1],u[f+w]),_(O,M,S[f+w+1],S[f+1],S[f+w],u[f+w+1],u[f+1],u[f+w])}break;case"triangles":for(p=0,k=S.length;p<k;p+=3)_(O,M,S[p],S[p+1],S[p+2],u[p],u[p+1],u[p+2]);break;default:throw new Error("illegal figure")}}class D extends N{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,M,S){const w=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-w,f=Math.ceil(this._bounds[3])-h,B=Math.min(Math.ceil(Math.abs(g*x[0]*1.1)),3e3),U=Math.min(Math.ceil(Math.abs(f*x[1]*1.1)),3e3),X=g/B,P=f/U,Y={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-h,scaleX:1/X,scaleY:1/P},H=B+2*2,V=U+2*2,Q=S.getCanvas("mesh",H,V,!1),st=Q.context,ft=st.createImageData(B,U);if(M){const W=ft.data;for(let d=0,c=W.length;d<c;d+=4)W[d]=M[0],W[d+1]=M[1],W[d+2]=M[2],W[d+3]=255}for(const W of this._figures)l(ft,W,Y);return st.putImageData(ft,2,2),{canvas:Q.canvas,offsetX:w-2*X,offsetY:h-2*P,scaleX:X,scaleY:P}}getPattern(x,M,S,u){o(x,this._bbox);let p;if(u===a.SHADING)p=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(x));else if(p=i.Util.singularValueDecompose2dScale(M.baseTransform),this.matrix){const w=i.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*w[0],p[1]*w[1]]}const k=this._createMeshCanvas(p,u===a.SHADING?null:this._background,M.cachedCanvases);return u!==a.SHADING&&(x.setTransform(...M.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(k.offsetX,k.offsetY),x.scale(k.scaleX,k.scaleY),x.createPattern(k.canvas,"no-repeat")}}class I extends N{getPattern(){return"hotpink"}}function C(O){switch(O[0]){case"RadialAxial":return new y(O);case"Mesh":return new D(O);case"Dummy":return new I}throw new Error(`Unknown IR type: ${O[0]}`)}const A={COLORED:1,UNCOLORED:2},E=class E{constructor(x,M,S,u,p){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=M,this.ctx=S,this.canvasGraphicsFactory=u,this.baseTransform=p}createPatternCanvas(x){const M=this.operatorList,S=this.bbox,u=this.xstep,p=this.ystep,k=this.paintType,w=this.tilingType,h=this.color,g=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+w);const f=S[0],B=S[1],U=S[2],X=S[3],P=i.Util.singularValueDecompose2dScale(this.matrix),Y=i.Util.singularValueDecompose2dScale(this.baseTransform),H=[P[0]*Y[0],P[1]*Y[1]],V=this.getSizeAndScale(u,this.ctx.canvas.width,H[0]),Q=this.getSizeAndScale(p,this.ctx.canvas.height,H[1]),st=x.cachedCanvases.getCanvas("pattern",V.size,Q.size,!0),ft=st.context,Et=g.createCanvasGraphics(ft);Et.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(Et,k,h);let W=f,d=B,c=U,R=X;return f<0&&(W=0,c+=Math.abs(f)),B<0&&(d=0,R+=Math.abs(B)),ft.translate(-(V.scale*W),-(Q.scale*d)),Et.transform(V.scale,0,0,Q.scale,0,0),ft.save(),this.clipBbox(Et,W,d,c,R),Et.baseTransform=(0,s.getCurrentTransform)(Et.ctx),Et.executeOperatorList(M),Et.endDrawing(),{canvas:st.canvas,scaleX:V.scale,scaleY:Q.scale,offsetX:W,offsetY:d}}getSizeAndScale(x,M,S){x=Math.abs(x);const u=Math.max(E.MAX_PATTERN_SIZE,M);let p=Math.ceil(x*S);return p>=u?p=u:S=p/x,{scale:S,size:p}}clipBbox(x,M,S,u,p){const k=u-M,w=p-S;x.ctx.rect(M,S,k,w),x.current.updateRectMinMax((0,s.getCurrentTransform)(x.ctx),[M,S,u,p]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,M,S){const u=x.ctx,p=x.current;switch(M){case A.COLORED:const k=this.ctx;u.fillStyle=k.fillStyle,u.strokeStyle=k.strokeStyle,p.fillColor=k.fillStyle,p.strokeColor=k.strokeStyle;break;case A.UNCOLORED:const w=i.Util.makeHexColor(S[0],S[1],S[2]);u.fillStyle=w,u.strokeStyle=w,p.fillColor=w,p.strokeColor=w;break;default:throw new i.FormatError(`Unsupported paint type: ${M}`)}}getPattern(x,M,S,u){let p=S;u!==a.SHADING&&(p=i.Util.transform(p,M.baseTransform),this.matrix&&(p=i.Util.transform(p,this.matrix)));const k=this.createPatternCanvas(M);let w=new DOMMatrix(p);w=w.translate(k.offsetX,k.offsetY),w=w.scale(1/k.scaleX,1/k.scaleY);const h=x.createPattern(k.canvas,"repeat");return h.setTransform(w),h}};qt(E,"MAX_PATTERN_SIZE",3e3);let b=E;t.TilingPattern=b},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=a,t.convertToRGBA=s,t.grayToRGBA=N;var i=e(1);function s(y){switch(y.kind){case i.ImageKind.GRAYSCALE_1BPP:return a(y);case i.ImageKind.RGB_24BPP:return o(y)}return null}function a({src:y,srcPos:_=0,dest:l,width:D,height:I,nonBlackColor:C=4294967295,inverseDecode:A=!1}){const b=i.FeatureTest.isLittleEndian?4278190080:255,[E,O]=A?[C,b]:[b,C],x=D>>3,M=D&7,S=y.length;l=new Uint32Array(l.buffer);let u=0;for(let p=0;p<I;p++){for(const w=_+x;_<w;_++){const h=_<S?y[_]:255;l[u++]=h&128?O:E,l[u++]=h&64?O:E,l[u++]=h&32?O:E,l[u++]=h&16?O:E,l[u++]=h&8?O:E,l[u++]=h&4?O:E,l[u++]=h&2?O:E,l[u++]=h&1?O:E}if(M===0)continue;const k=_<S?y[_++]:255;for(let w=0;w<M;w++)l[u++]=k&1<<7-w?O:E}return{srcPos:_,destPos:u}}function o({src:y,srcPos:_=0,dest:l,destPos:D=0,width:I,height:C}){let A=0;const b=y.length>>2,E=new Uint32Array(y.buffer,_,b);if(i.FeatureTest.isLittleEndian){for(;A<b-2;A+=3,D+=4){const O=E[A],x=E[A+1],M=E[A+2];l[D]=O|4278190080,l[D+1]=O>>>24|x<<8|4278190080,l[D+2]=x>>>16|M<<16|4278190080,l[D+3]=M>>>8|4278190080}for(let O=A*4,x=y.length;O<x;O+=3)l[D++]=y[O]|y[O+1]<<8|y[O+2]<<16|4278190080}else{for(;A<b-2;A+=3,D+=4){const O=E[A],x=E[A+1],M=E[A+2];l[D]=O|255,l[D+1]=O<<24|x>>>8|255,l[D+2]=x<<16|M>>>16|255,l[D+3]=M<<8|255}for(let O=A*4,x=y.length;O<x;O+=3)l[D++]=y[O]<<24|y[O+1]<<16|y[O+2]<<8|255}return{srcPos:_,destPos:D}}function N(y,_){if(i.FeatureTest.isLittleEndian)for(let l=0,D=y.length;l<D;l++)_[l]=y[l]*65793|4278190080;else for(let l=0,D=y.length;l<D;l++)_[l]=y[l]*16843008|255}},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const e=Object.create(null);t.GlobalWorkerOptions=e,e.workerPort=null,e.workerSrc=""},(n,t,e)=>{var y,pn,l,gn,I,be;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=e(1);const s={UNKNOWN:0,DATA:1,ERROR:2},a={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(A){switch(A instanceof Error||typeof A=="object"&&A!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new i.AbortException(A.message);case"MissingPDFException":return new i.MissingPDFException(A.message);case"PasswordException":return new i.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new i.UnknownErrorException(A.message,A.details);default:return new i.UnknownErrorException(A.message,A.toString())}}class N{constructor(b,E,O){q(this,y);q(this,l);q(this,I);this.sourceName=b,this.targetName=E,this.comObj=O,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const M=x.data;if(M.targetName!==this.sourceName)return;if(M.stream){nt(this,l,gn).call(this,M);return}if(M.callback){const u=M.callbackId,p=this.callbackCapabilities[u];if(!p)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],M.callback===s.DATA)p.resolve(M.data);else if(M.callback===s.ERROR)p.reject(o(M.reason));else throw new Error("Unexpected callback case");return}const S=this.actionHandler[M.action];if(!S)throw new Error(`Unknown action from worker: ${M.action}`);if(M.callbackId){const u=this.sourceName,p=M.sourceName;new Promise(function(k){k(S(M.data))}).then(function(k){O.postMessage({sourceName:u,targetName:p,callback:s.DATA,callbackId:M.callbackId,data:k})},function(k){O.postMessage({sourceName:u,targetName:p,callback:s.ERROR,callbackId:M.callbackId,reason:o(k)})});return}if(M.streamId){nt(this,y,pn).call(this,M);return}S(M.data)},O.addEventListener("message",this._onComObjOnMessage)}on(b,E){const O=this.actionHandler;if(O[b])throw new Error(`There is already an actionName called "${b}"`);O[b]=E}send(b,E,O){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,data:E},O)}sendWithPromise(b,E,O){const x=this.callbackId++,M=new i.PromiseCapability;this.callbackCapabilities[x]=M;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,callbackId:x,data:E},O)}catch(S){M.reject(S)}return M.promise}sendWithStream(b,E,O,x){const M=this.streamId++,S=this.sourceName,u=this.targetName,p=this.comObj;return new ReadableStream({start:k=>{const w=new i.PromiseCapability;return this.streamControllers[M]={controller:k,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:S,targetName:u,action:b,streamId:M,data:E,desiredSize:k.desiredSize},x),w.promise},pull:k=>{const w=new i.PromiseCapability;return this.streamControllers[M].pullCall=w,p.postMessage({sourceName:S,targetName:u,stream:a.PULL,streamId:M,desiredSize:k.desiredSize}),w.promise},cancel:k=>{(0,i.assert)(k instanceof Error,"cancel must have a valid reason");const w=new i.PromiseCapability;return this.streamControllers[M].cancelCall=w,this.streamControllers[M].isClosed=!0,p.postMessage({sourceName:S,targetName:u,stream:a.CANCEL,streamId:M,reason:o(k)}),w.promise}},O)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}y=new WeakSet,pn=function(b){const E=b.streamId,O=this.sourceName,x=b.sourceName,M=this.comObj,S=this,u=this.actionHandler[b.action],p={enqueue(k,w=1,h){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=w,g>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),M.postMessage({sourceName:O,targetName:x,stream:a.ENQUEUE,streamId:E,chunk:k},h)},close(){this.isCancelled||(this.isCancelled=!0,M.postMessage({sourceName:O,targetName:x,stream:a.CLOSE,streamId:E}),delete S.streamSinks[E])},error(k){(0,i.assert)(k instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,M.postMessage({sourceName:O,targetName:x,stream:a.ERROR,streamId:E,reason:o(k)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:b.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[E]=p,new Promise(function(k){k(u(b.data,p))}).then(function(){M.postMessage({sourceName:O,targetName:x,stream:a.START_COMPLETE,streamId:E,success:!0})},function(k){M.postMessage({sourceName:O,targetName:x,stream:a.START_COMPLETE,streamId:E,reason:o(k)})})},l=new WeakSet,gn=function(b){const E=b.streamId,O=this.sourceName,x=b.sourceName,M=this.comObj,S=this.streamControllers[E],u=this.streamSinks[E];switch(b.stream){case a.START_COMPLETE:b.success?S.startCall.resolve():S.startCall.reject(o(b.reason));break;case a.PULL_COMPLETE:b.success?S.pullCall.resolve():S.pullCall.reject(o(b.reason));break;case a.PULL:if(!u){M.postMessage({sourceName:O,targetName:x,stream:a.PULL_COMPLETE,streamId:E,success:!0});break}u.desiredSize<=0&&b.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=b.desiredSize,new Promise(function(p){var k;p((k=u.onPull)==null?void 0:k.call(u))}).then(function(){M.postMessage({sourceName:O,targetName:x,stream:a.PULL_COMPLETE,streamId:E,success:!0})},function(p){M.postMessage({sourceName:O,targetName:x,stream:a.PULL_COMPLETE,streamId:E,reason:o(p)})});break;case a.ENQUEUE:if((0,i.assert)(S,"enqueue should have stream controller"),S.isClosed)break;S.controller.enqueue(b.chunk);break;case a.CLOSE:if((0,i.assert)(S,"close should have stream controller"),S.isClosed)break;S.isClosed=!0,S.controller.close(),nt(this,I,be).call(this,S,E);break;case a.ERROR:(0,i.assert)(S,"error should have stream controller"),S.controller.error(o(b.reason)),nt(this,I,be).call(this,S,E);break;case a.CANCEL_COMPLETE:b.success?S.cancelCall.resolve():S.cancelCall.reject(o(b.reason)),nt(this,I,be).call(this,S,E);break;case a.CANCEL:if(!u)break;new Promise(function(p){var k;p((k=u.onCancel)==null?void 0:k.call(u,o(b.reason)))}).then(function(){M.postMessage({sourceName:O,targetName:x,stream:a.CANCEL_COMPLETE,streamId:E,success:!0})},function(p){M.postMessage({sourceName:O,targetName:x,stream:a.CANCEL_COMPLETE,streamId:E,reason:o(p)})}),u.sinkCapability.reject(o(b.reason)),u.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}},I=new WeakSet,be=async function(b,E){var O,x,M;await Promise.allSettled([(O=b.startCall)==null?void 0:O.promise,(x=b.pullCall)==null?void 0:x.promise,(M=b.cancelCall)==null?void 0:M.promise]),delete this.streamControllers[E]},t.MessageHandler=N},(n,t,e)=>{var a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=e(1);class s{constructor({parsedData:y,rawData:_}){q(this,a,void 0);q(this,o,void 0);lt(this,a,y),lt(this,o,_)}getRaw(){return r(this,o)}get(y){return r(this,a).get(y)??null}getAll(){return(0,i.objectFromMap)(r(this,a))}has(y){return r(this,a).has(y)}}a=new WeakMap,o=new WeakMap,t.Metadata=s},(n,t,e)=>{var y,_,l,D,I,C,Fe;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=e(1),s=e(8);const a=Symbol("INTERNAL");class o{constructor(E,O){q(this,y,!0);this.name=E,this.intent=O}get visible(){return r(this,y)}_setVisible(E,O){E!==a&&(0,i.unreachable)("Internal method `_setVisible` called."),lt(this,y,O)}}y=new WeakMap;class N{constructor(E){q(this,C);q(this,_,null);q(this,l,new Map);q(this,D,null);q(this,I,null);if(this.name=null,this.creator=null,E!==null){this.name=E.name,this.creator=E.creator,lt(this,I,E.order);for(const O of E.groups)r(this,l).set(O.id,new o(O.name,O.intent));if(E.baseState==="OFF")for(const O of r(this,l).values())O._setVisible(a,!1);for(const O of E.on)r(this,l).get(O)._setVisible(a,!0);for(const O of E.off)r(this,l).get(O)._setVisible(a,!1);lt(this,D,this.getHash())}}isVisible(E){if(r(this,l).size===0)return!0;if(!E)return(0,i.warn)("Optional content group not defined."),!0;if(E.type==="OCG")return r(this,l).has(E.id)?r(this,l).get(E.id).visible:((0,i.warn)(`Optional content group not found: ${E.id}`),!0);if(E.type==="OCMD"){if(E.expression)return nt(this,C,Fe).call(this,E.expression);if(!E.policy||E.policy==="AnyOn"){for(const O of E.ids){if(!r(this,l).has(O))return(0,i.warn)(`Optional content group not found: ${O}`),!0;if(r(this,l).get(O).visible)return!0}return!1}else if(E.policy==="AllOn"){for(const O of E.ids){if(!r(this,l).has(O))return(0,i.warn)(`Optional content group not found: ${O}`),!0;if(!r(this,l).get(O).visible)return!1}return!0}else if(E.policy==="AnyOff"){for(const O of E.ids){if(!r(this,l).has(O))return(0,i.warn)(`Optional content group not found: ${O}`),!0;if(!r(this,l).get(O).visible)return!0}return!1}else if(E.policy==="AllOff"){for(const O of E.ids){if(!r(this,l).has(O))return(0,i.warn)(`Optional content group not found: ${O}`),!0;if(r(this,l).get(O).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,i.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,O=!0){if(!r(this,l).has(E)){(0,i.warn)(`Optional content group not found: ${E}`);return}r(this,l).get(E)._setVisible(a,!!O),lt(this,_,null)}get hasInitialVisibility(){return this.getHash()===r(this,D)}getOrder(){return r(this,l).size?r(this,I)?r(this,I).slice():[...r(this,l).keys()]:null}getGroups(){return r(this,l).size>0?(0,i.objectFromMap)(r(this,l)):null}getGroup(E){return r(this,l).get(E)||null}getHash(){if(r(this,_)!==null)return r(this,_);const E=new s.MurmurHash3_64;for(const[O,x]of r(this,l))E.update(`${O}:${x.visible}`);return lt(this,_,E.hexdigest())}}_=new WeakMap,l=new WeakMap,D=new WeakMap,I=new WeakMap,C=new WeakSet,Fe=function(E){const O=E.length;if(O<2)return!0;const x=E[0];for(let M=1;M<O;M++){const S=E[M];let u;if(Array.isArray(S))u=nt(this,C,Fe).call(this,S);else if(r(this,l).has(S))u=r(this,l).get(S).visible;else return(0,i.warn)(`Optional content group not found: ${S}`),!0;switch(x){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return x==="And"},t.OptionalContentConfig=N},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=e(1),s=e(6);class a{constructor({length:_,initialData:l,progressiveDone:D=!1,contentDispositionFilename:I=null,disableRange:C=!1,disableStream:A=!1},b){if((0,i.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=D,this._contentDispositionFilename=I,(l==null?void 0:l.length)>0){const E=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!A,this._isRangeSupported=!C,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,O)=>{this._onReceiveData({begin:E,chunk:O})}),this._pdfDataRangeTransport.addProgressListener((E,O)=>{this._onProgress({loaded:E,total:O})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:l}){const D=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(D):this._queuedChunks.push(D);else{const I=this._rangeReaders.some(function(C){return C._begin!==_?!1:(C._enqueue(D),!0)});(0,i.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var l,D,I,C;_.total===void 0?(D=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||D.call(l,{loaded:_.loaded}):(C=(I=this._fullRequestReader)==null?void 0:I.onProgress)==null||C.call(I,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const l=this._rangeReaders.indexOf(_);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new o(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,l){if(l<=this._progressiveDataLength)return null;const D=new N(this,_,l);return this._pdfDataRangeTransport.requestDataRange(_,l),this._rangeReaders.push(D),D}cancelAllRequests(_){var l;(l=this._fullRequestReader)==null||l.cancel(_);for(const D of this._rangeReaders.slice(0))D.cancel(_);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=a;class o{constructor(_,l,D=!1,I=null){this._stream=_,this._done=D||!1,this._filename=(0,s.isPdfFile)(I)?I:null,this._queuedChunks=l||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new i.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class N{constructor(_,l,D){this._stream=_,this._begin=l,this._end=D,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new i.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=e(1),s=e(20);function a(D,I,C){return{method:"GET",headers:D,signal:C.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function o(D){const I=new Headers;for(const C in D){const A=D[C];A!==void 0&&I.append(C,A)}return I}function N(D){return D instanceof Uint8Array?D.buffer:D instanceof ArrayBuffer?D:((0,i.warn)(`getArrayBuffer - unexpected data format: ${D}`),new Uint8Array(D).buffer)}class y{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var I;return((I=this._fullRequestReader)==null?void 0:I._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(I,C){if(C<=this._progressiveDataLength)return null;const A=new l(this,I,C);return this._rangeRequestReaders.push(A),A}cancelAllRequests(I){var C;(C=this._fullRequestReader)==null||C.cancel(I);for(const A of this._rangeRequestReaders.slice(0))A.cancel(I)}}t.PDFFetchStream=y;class _{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const C=I.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new i.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=o(this._stream.httpHeaders);const A=C.url;fetch(A,a(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,s.validateResponseStatus)(b.status))throw(0,s.createResponseStatusError)(b.status,A);this._reader=b.body.getReader(),this._headersCapability.resolve();const E=M=>b.headers.get(M),{allowRangeRequests:O,suggestedLength:x}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=O,this._contentLength=x||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(E),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._headersCapability.promise;const{value:I,done:C}=await this._reader.read();return C?{value:I,done:C}:(this._loaded+=I.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:N(I),done:!1})}cancel(I){var C;(C=this._reader)==null||C.cancel(I),this._abortController.abort()}}class l{constructor(I,C,A){this._stream=I,this._reader=null,this._loaded=0;const b=I.source;this._withCredentials=b.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${A-1}`);const E=b.url;fetch(E,a(this._headers,this._withCredentials,this._abortController)).then(O=>{if(!(0,s.validateResponseStatus)(O.status))throw(0,s.createResponseStatusError)(O.status,E);this._readCapability.resolve(),this._reader=O.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._readCapability.promise;const{value:I,done:C}=await this._reader.read();return C?{value:I,done:C}:(this._loaded+=I.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:N(I),done:!1})}cancel(I){var C;(C=this._reader)==null||C.cancel(I),this._abortController.abort()}}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=y,t.extractFilenameFromHeader=N,t.validateRangeRequestCapabilities=o,t.validateResponseStatus=_;var i=e(1),s=e(21),a=e(6);function o({getResponseHeader:l,isHttp:D,rangeChunkSize:I,disableRange:C}){const A={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(l("Content-Length"),10);return!Number.isInteger(b)||(A.suggestedLength=b,b<=2*I)||C||!D||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function N(l){const D=l("Content-Disposition");if(D){let I=(0,s.getFilenameFromContentDispositionHeader)(D);if(I.includes("%"))try{I=decodeURIComponent(I)}catch{}if((0,a.isPdfFile)(I))return I}return null}function y(l,D){return l===404||l===0&&D.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+D+'".'):new i.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${D}".`,l)}function _(l){return l===200||l===206}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=s;var i=e(1);function s(a){let o=!0,N=y("filename\\*","i").exec(a);if(N){N=N[1];let b=I(N);return b=unescape(b),b=C(b),b=A(b),l(b)}if(N=D(a),N){const b=A(N);return l(b)}if(N=y("filename","i").exec(a),N){N=N[1];let b=I(N);return b=A(b),l(b)}function y(b,E){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function _(b,E){if(b){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const O=new TextDecoder(b,{fatal:!0}),x=(0,i.stringToBytes)(E);E=O.decode(x),o=!1}catch{}}return E}function l(b){return o&&/[\x80-\xff]/.test(b)&&(b=_("utf-8",b),o&&(b=_("iso-8859-1",b))),b}function D(b){const E=[];let O;const x=y("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=x.exec(b))!==null;){let[,S,u,p]=O;if(S=parseInt(S,10),S in E){if(S===0)break;continue}E[S]=[u,p]}const M=[];for(let S=0;S<E.length&&S in E;++S){let[u,p]=E[S];p=I(p),u&&(p=unescape(p),S===0&&(p=C(p))),M.push(p)}return M.join("")}function I(b){if(b.startsWith('"')){const E=b.slice(1).split('\\"');for(let O=0;O<E.length;++O){const x=E[O].indexOf('"');x!==-1&&(E[O]=E[O].slice(0,x),E.length=O+1),E[O]=E[O].replaceAll(/\\(.)/g,"$1")}b=E.join('"')}return b}function C(b){const E=b.indexOf("'");if(E===-1)return b;const O=b.slice(0,E),M=b.slice(E+1).replace(/^[^']*'/,"");return _(O,M)}function A(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,O,x,M){if(x==="q"||x==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,u){return String.fromCharCode(parseInt(u,16))}),_(O,M);try{M=atob(M)}catch{}return _(O,M)})}return""}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=e(1),s=e(20);const a=200,o=206;function N(I){const C=I.response;return typeof C!="string"?C:(0,i.stringToBytes)(C).buffer}class y{constructor(C,A={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&A.httpHeaders||Object.create(null),this.withCredentials=A.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,A,b){const E={begin:C,end:A};for(const O in b)E[O]=b[O];return this.request(E)}requestFull(C){return this.request(C)}request(C){const A=new XMLHttpRequest,b=this.currXhrId++,E=this.pendingRequests[b]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const O in this.httpHeaders){const x=this.httpHeaders[O];x!==void 0&&A.setRequestHeader(O,x)}return this.isHttp&&"begin"in C&&"end"in C?(A.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),E.expectedStatus=o):E.expectedStatus=a,A.responseType="arraybuffer",C.onError&&(A.onerror=function(O){C.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,b),A.onprogress=this.onProgress.bind(this,b),E.onHeadersReceived=C.onHeadersReceived,E.onDone=C.onDone,E.onError=C.onError,E.onProgress=C.onProgress,A.send(null),b}onProgress(C,A){var E;const b=this.pendingRequests[C];b&&((E=b.onProgress)==null||E.call(b,A))}onStateChange(C,A){var S,u,p;const b=this.pendingRequests[C];if(!b)return;const E=b.xhr;if(E.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),E.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],E.status===0&&this.isHttp){(S=b.onError)==null||S.call(b,E.status);return}const O=E.status||a;if(!(O===a&&b.expectedStatus===o)&&O!==b.expectedStatus){(u=b.onError)==null||u.call(b,E.status);return}const M=N(E);if(O===o){const k=E.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);b.onDone({begin:parseInt(w[1],10),chunk:M})}else M?b.onDone({begin:0,chunk:M}):(p=b.onError)==null||p.call(b,E.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const A=this.pendingRequests[C].xhr;delete this.pendingRequests[C],A.abort()}}class _{constructor(C){this._source=C,this._manager=new y(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const A=this._rangeRequestReaders.indexOf(C);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(C,A){const b=new D(this._manager,C,A);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(C){var A;(A=this._fullRequestReader)==null||A.cancel(C);for(const b of this._rangeRequestReaders.slice(0))b.cancel(C)}}t.PDFNetworkStream=_;class l{constructor(C,A){this._manager=C;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=C.requestFull(b),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,A=this._manager.getRequestXhr(C),b=x=>A.getResponseHeader(x),{allowRangeRequests:E,suggestedLength:O}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=O||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,s.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var A;(A=this.onProgress)==null||A.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new i.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class D{constructor(C,A,b){this._manager=C;const E={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(A,b,E),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const A=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,s.createResponseStatusError)(C,this._url);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var A;this.isStreamingSupported||(A=this.onProgress)==null||A.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new i.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=e(1),s=e(20);const a=/^file:\/\/\/[a-zA-Z]:\//;function o(b){const E=require$$5,O=E.parse(b);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test(b)?E.parse(`file:///${b}`):(O.host||(O.protocol="file:"),O)}class N{constructor(E){this.source=E,this.url=o(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new D(this),this._fullRequestReader}getRangeReader(E,O){if(O<=this._progressiveDataLength)return null;const x=this.isFsUrl?new A(this,E,O):new I(this,E,O);return this._rangeRequestReaders.push(x),x}cancelAllRequests(E){var O;(O=this._fullRequestReader)==null||O.cancel(E);for(const x of this._rangeRequestReaders.slice(0))x.cancel(E)}}t.PDFNodeStream=N;class y{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const O=E.source;this._contentLength=O.length,this._loaded=0,this._filename=null,this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=E.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",O=>{this._error(O)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const O=E.source;this._isStreamingSupported=!O.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=E.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",O=>{this._error(O)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(b,E){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:E}}class D extends y{constructor(E){super(E);const O=x=>{if(x.statusCode===404){const p=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p,this._headersCapability.reject(p);return}this._headersCapability.resolve(),this._setReadableStream(x);const M=p=>this._readableStream.headers[p.toLowerCase()],{allowRangeRequests:S,suggestedLength:u}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=u||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(M)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(l(this._url,E.httpHeaders),O)}else{const x=require$$5;this._request=x.request(l(this._url,E.httpHeaders),O)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class I extends _{constructor(E,O,x){super(E),this._httpHeaders={};for(const S in E.httpHeaders){const u=E.httpHeaders[S];u!==void 0&&(this._httpHeaders[S]=u)}this._httpHeaders.Range=`bytes=${O}-${x-1}`;const M=S=>{if(S.statusCode===404){const u=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(S)};if(this._request=null,this._url.protocol==="http:"){const S=require$$5;this._request=S.request(l(this._url,this._httpHeaders),M)}else{const S=require$$5;this._request=S.request(l(this._url,this._httpHeaders),M)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class C extends y{constructor(E){super(E);let O=decodeURIComponent(this._url.path);a.test(this._url.href)&&(O=O.replace(/^\//,""));const x=require$$5;x.lstat(O,(M,S)=>{if(M){M.code==="ENOENT"&&(M=new i.MissingPDFException(`Missing PDF "${O}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=S.size,this._setReadableStream(x.createReadStream(O)),this._headersCapability.resolve()})}}class A extends _{constructor(E,O,x){super(E);let M=decodeURIComponent(this._url.path);a.test(this._url.href)&&(M=M.replace(/^\//,""));const S=require$$5;this._setReadableStream(S.createReadStream(M,{start:O,end:x-1}))}}},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=e(6),s=e(1);const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/1999/xlink",y=["butt","round","square"],_=["miter","round","bevel"],l=function(S,u="",p=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!p)return URL.createObjectURL(new Blob([S],{type:u}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let w=`data:${u};base64,`;for(let h=0,g=S.length;h<g;h+=3){const f=S[h]&255,B=S[h+1]&255,U=S[h+2]&255,X=f>>2,P=(f&3)<<4|B>>4,Y=h+1<g?(B&15)<<2|U>>6:64,H=h+2<g?U&63:64;w+=k[X]+k[P]+k[Y]+k[H]}return w},D=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),u=12,p=new Int32Array(256);for(let U=0;U<256;U++){let X=U;for(let P=0;P<8;P++)X=X&1?3988292384^X>>1&2147483647:X>>1&2147483647;p[U]=X}function k(U,X,P){let Y=-1;for(let H=X;H<P;H++){const V=(Y^U[H])&255,Q=p[V];Y=Y>>>8^Q}return Y^-1}function w(U,X,P,Y){let H=Y;const V=X.length;P[H]=V>>24&255,P[H+1]=V>>16&255,P[H+2]=V>>8&255,P[H+3]=V&255,H+=4,P[H]=U.charCodeAt(0)&255,P[H+1]=U.charCodeAt(1)&255,P[H+2]=U.charCodeAt(2)&255,P[H+3]=U.charCodeAt(3)&255,H+=4,P.set(X,H),H+=X.length;const Q=k(P,Y+4,H);P[H]=Q>>24&255,P[H+1]=Q>>16&255,P[H+2]=Q>>8&255,P[H+3]=Q&255}function h(U,X,P){let Y=1,H=0;for(let V=X;V<P;++V)Y=(Y+(U[V]&255))%65521,H=(H+Y)%65521;return H<<16|Y}function g(U){if(!s.isNodeJS)return f(U);try{const X=parseInt(process.versions.node)>=8?U:Buffer.from(U),P=require$$5.deflateSync(X,{level:9});return P instanceof Uint8Array?P:new Uint8Array(P)}catch(X){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return f(U)}function f(U){let X=U.length;const P=65535,Y=Math.ceil(X/P),H=new Uint8Array(2+X+Y*5+4);let V=0;H[V++]=120,H[V++]=156;let Q=0;for(;X>P;)H[V++]=0,H[V++]=255,H[V++]=255,H[V++]=0,H[V++]=0,H.set(U.subarray(Q,Q+P),V),V+=P,Q+=P,X-=P;H[V++]=1,H[V++]=X&255,H[V++]=X>>8&255,H[V++]=~X&65535&255,H[V++]=(~X&65535)>>8&255,H.set(U.subarray(Q),V),V+=U.length-Q;const st=h(U,0,U.length);return H[V++]=st>>24&255,H[V++]=st>>16&255,H[V++]=st>>8&255,H[V++]=st&255,H}function B(U,X,P,Y){const H=U.width,V=U.height;let Q,st,ft;const Et=U.data;switch(X){case s.ImageKind.GRAYSCALE_1BPP:st=0,Q=1,ft=H+7>>3;break;case s.ImageKind.RGB_24BPP:st=2,Q=8,ft=H*3;break;case s.ImageKind.RGBA_32BPP:st=6,Q=8,ft=H*4;break;default:throw new Error("invalid format")}const W=new Uint8Array((1+ft)*V);let d=0,c=0;for(let Z=0;Z<V;++Z)W[d++]=0,W.set(Et.subarray(c,c+ft),d),c+=ft,d+=ft;if(X===s.ImageKind.GRAYSCALE_1BPP&&Y){d=0;for(let Z=0;Z<V;Z++){d++;for(let ut=0;ut<ft;ut++)W[d++]^=255}}const R=new Uint8Array([H>>24&255,H>>16&255,H>>8&255,H&255,V>>24&255,V>>16&255,V>>8&255,V&255,Q,st,0,0,0]),j=g(W),$=S.length+u*3+R.length+j.length,G=new Uint8Array($);let z=0;return G.set(S,z),z+=S.length,w("IHDR",R,G,z),z+=u+R.length,w("IDATA",j,G,z),z+=u+j.length,w("IEND",new Uint8Array(0),G,z),l(G,"image/png",P)}return function(X,P,Y){const H=X.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:X.kind;return B(X,H,P,Y)}}();class I{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(u,p){this.x=u,this.y=p}}function C(S){let u=[];const p=[];for(const k of S){if(k.fn==="save"){u.push({fnId:92,fn:"group",items:[]}),p.push(u),u=u.at(-1).items;continue}k.fn==="restore"?u=p.pop():u.push(k)}return u}function A(S){if(Number.isInteger(S))return S.toString();const u=S.toFixed(10);let p=u.length-1;if(u[p]!=="0")return u;do p--;while(u[p]==="0");return u.substring(0,u[p]==="."?p:p+1)}function b(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${A(S[0])} ${A(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const u=Math.acos(S[0])*180/Math.PI;return`rotate(${A(u)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${A(S[4])} ${A(S[5])})`;return`matrix(${A(S[0])} ${A(S[1])} ${A(S[2])} ${A(S[3])} ${A(S[4])} ${A(S[5])})`}let E=0,O=0,x=0;class M{constructor(u,p,k=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new I,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=p,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!k,this._operatorIdMapping=[];for(const w in s.OPS)this._operatorIdMapping[s.OPS[w]]=w}getObject(u,p=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):p}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const p=u.fnArray,k=u.argsArray;for(let w=0,h=p.length;w<h;w++)if(p[w]===s.OPS.dependency)for(const g of k[w]){const f=g.startsWith("g_")?this.commonObjs:this.objs,B=new Promise(U=>{f.get(g,U)});this.current.dependencies.push(B)}return Promise.all(this.current.dependencies)}transform(u,p,k,w,h,g){const f=[u,p,k,w,h,g];this.transformMatrix=s.Util.transform(this.transformMatrix,f),this.tgrp=null}getSVG(u,p){this.viewport=p;const k=this._initialize(p);return this.loadDependencies(u).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),k))}convertOpList(u){const p=this._operatorIdMapping,k=u.argsArray,w=u.fnArray,h=[];for(let g=0,f=w.length;g<f;g++){const B=w[g];h.push({fnId:B,fn:p[B],args:k[g]})}return C(h)}executeOpTree(u){for(const p of u){const k=p.fn,w=p.fnId,h=p.args;switch(w|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(h);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(h[0],h[1]);break;case s.OPS.setFont:this.setFont(h);break;case s.OPS.showText:this.showText(h[0]);break;case s.OPS.showSpacedText:this.showText(h[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(h[0],h[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(h[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(h[0]);break;case s.OPS.setHScale:this.setHScale(h[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(h[0],h[1],h[2],h[3],h[4],h[5]);break;case s.OPS.setTextRise:this.setTextRise(h[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(h[0]);break;case s.OPS.setLineWidth:this.setLineWidth(h[0]);break;case s.OPS.setLineJoin:this.setLineJoin(h[0]);break;case s.OPS.setLineCap:this.setLineCap(h[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(h[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(h[0],h[1],h[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(h[0],h[1],h[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(h);break;case s.OPS.setFillColorN:this.setFillColorN(h);break;case s.OPS.shadingFill:this.shadingFill(h[0]);break;case s.OPS.setDash:this.setDash(h[0],h[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(h[0]);break;case s.OPS.setFlatness:this.setFlatness(h[0]);break;case s.OPS.setGState:this.setGState(h[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(h[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(h[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(h[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(h[0],h[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(h[0],h[1],h[2],h[3],h[4],h[5]);break;case s.OPS.constructPath:this.constructPath(h[0],h[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(p.items);break;default:(0,s.warn)(`Unimplemented operator ${k}`);break}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,p,k,w,h,g){const f=this.current;f.textMatrix=f.lineMatrix=[u,p,k,w,h,g],f.textMatrixScale=Math.hypot(u,p),f.x=f.lineX=0,f.y=f.lineY=0,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${A(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",A(-f.y)),f.txtElement=this.svgFactory.createElement("svg:text"),f.txtElement.append(f.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=s.IDENTITY_MATRIX,u.lineMatrix=s.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,p){const k=this.current;k.x=k.lineX+=u,k.y=k.lineY+=p,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${A(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",A(-k.y))}showText(u){const p=this.current,k=p.font,w=p.fontSize;if(w===0)return;const h=p.fontSizeScale,g=p.charSpacing,f=p.wordSpacing,B=p.fontDirection,U=p.textHScale*B,X=k.vertical,P=X?1:-1,Y=k.defaultVMetrics,H=w*p.fontMatrix[0];let V=0;for(const ft of u){if(ft===null){V+=B*f;continue}else if(typeof ft=="number"){V+=P*ft*w/1e3;continue}const Et=(ft.isSpace?f:0)+g,W=ft.fontChar;let d,c,R=ft.width;if(X){let $;const G=ft.vmetric||Y;$=ft.vmetric?G[1]:R*.5,$=-$*H;const z=G[2]*H;R=G?-G[0]:R,d=$/h,c=(V+z)/h}else d=V/h,c=0;(ft.isInFont||k.missingFile)&&(p.xcoords.push(p.x+d),X&&p.ycoords.push(-p.y+c),p.tspan.textContent+=W);const j=X?R*H-Et*B:R*H+Et*B;V+=j}p.tspan.setAttributeNS(null,"x",p.xcoords.map(A).join(" ")),X?p.tspan.setAttributeNS(null,"y",p.ycoords.map(A).join(" ")):p.tspan.setAttributeNS(null,"y",A(-p.y)),X?p.y-=V:p.x+=V*U,p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${A(p.fontSize)}px`),p.fontStyle!==a.fontStyle&&p.tspan.setAttributeNS(null,"font-style",p.fontStyle),p.fontWeight!==a.fontWeight&&p.tspan.setAttributeNS(null,"font-weight",p.fontWeight);const Q=p.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(Q===s.TextRenderingMode.FILL||Q===s.TextRenderingMode.FILL_STROKE?(p.fillColor!==a.fillColor&&p.tspan.setAttributeNS(null,"fill",p.fillColor),p.fillAlpha<1&&p.tspan.setAttributeNS(null,"fill-opacity",p.fillAlpha)):p.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?p.tspan.setAttributeNS(null,"fill","transparent"):p.tspan.setAttributeNS(null,"fill","none"),Q===s.TextRenderingMode.STROKE||Q===s.TextRenderingMode.FILL_STROKE){const ft=1/(p.textMatrixScale||1);this._setStrokeAttributes(p.tspan,ft)}let st=p.textMatrix;p.textRise!==0&&(st=st.slice(),st[5]+=p.textRise),p.txtElement.setAttributeNS(null,"transform",`${b(st)} scale(${A(U)}, -1)`),p.txtElement.setAttributeNS(o,"xml:space","preserve"),p.txtElement.append(p.tspan),p.txtgrp.append(p.txtElement),this._ensureTransformGroup().append(p.txtElement)}setLeadingMoveText(u,p){this.setLeading(-p),this.moveText(u,p)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const p=l(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${p}); }
`}setFont(u){const p=this.current,k=this.commonObjs.get(u[0]);let w=u[1];p.font=k,this.embedFonts&&!k.missingFile&&!this.embeddedFonts[k.loadedName]&&(this.addFontStyle(k),this.embeddedFonts[k.loadedName]=k),p.fontMatrix=k.fontMatrix||s.FONT_IDENTITY_MATRIX;let h="normal";k.black?h="900":k.bold&&(h="bold");const g=k.italic?"italic":"normal";w<0?(w=-w,p.fontDirection=-1):p.fontDirection=1,p.fontSize=w,p.fontFamily=k.loadedName,p.fontWeight=h,p.fontStyle=g,p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"y",A(-p.y)),p.xcoords=[],p.ycoords=[]}endText(){var p;const u=this.current;u.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((p=u.txtElement)!=null&&p.hasChildNodes())&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=y[u]}setLineJoin(u){this.current.lineJoin=_[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,p,k){this.current.strokeColor=s.Util.makeHexColor(u,p,k)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,p,k){this.current.fillColor=s.Util.makeHexColor(u,p,k),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const{width:p,height:k}=this.viewport,w=s.Util.inverseTransform(this.transformMatrix),[h,g,f,B]=s.Util.getAxialAlignedBoundingBox([0,0,p,k],w),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",h),U.setAttributeNS(null,"y",g),U.setAttributeNS(null,"width",f-h),U.setAttributeNS(null,"height",B-g),U.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&U.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(U)}_makeColorN_Pattern(u){return u[0]==="TilingPattern"?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const p=u[1],k=u[2],w=u[3]||s.IDENTITY_MATRIX,[h,g,f,B]=u[4],U=u[5],X=u[6],P=u[7],Y=`shading${x++}`,[H,V,Q,st]=s.Util.normalizeRect([...s.Util.applyTransform([h,g],w),...s.Util.applyTransform([f,B],w)]),[ft,Et]=s.Util.singularValueDecompose2dScale(w),W=U*ft,d=X*Et,c=this.svgFactory.createElement("svg:pattern");c.setAttributeNS(null,"id",Y),c.setAttributeNS(null,"patternUnits","userSpaceOnUse"),c.setAttributeNS(null,"width",W),c.setAttributeNS(null,"height",d),c.setAttributeNS(null,"x",`${H}`),c.setAttributeNS(null,"y",`${V}`);const R=this.svg,j=this.transformMatrix,$=this.current.fillColor,G=this.current.strokeColor,z=this.svgFactory.create(Q-H,st-V);if(this.svg=z,this.transformMatrix=w,P===2){const Z=s.Util.makeHexColor(...p);this.current.fillColor=Z,this.current.strokeColor=Z}return this.executeOpTree(this.convertOpList(k)),this.svg=R,this.transformMatrix=j,this.current.fillColor=$,this.current.strokeColor=G,c.append(z.childNodes[0]),this.defs.append(c),`url(#${Y})`}_makeShadingPattern(u){switch(typeof u=="string"&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const p=`shading${x++}`,k=u[3];let w;switch(u[1]){case"axial":const h=u[4],g=u[5];w=this.svgFactory.createElement("svg:linearGradient"),w.setAttributeNS(null,"id",p),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"x1",h[0]),w.setAttributeNS(null,"y1",h[1]),w.setAttributeNS(null,"x2",g[0]),w.setAttributeNS(null,"y2",g[1]);break;case"radial":const f=u[4],B=u[5],U=u[6],X=u[7];w=this.svgFactory.createElement("svg:radialGradient"),w.setAttributeNS(null,"id",p),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"cx",B[0]),w.setAttributeNS(null,"cy",B[1]),w.setAttributeNS(null,"r",X),w.setAttributeNS(null,"fx",f[0]),w.setAttributeNS(null,"fy",f[1]),w.setAttributeNS(null,"fr",U);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const h of k){const g=this.svgFactory.createElement("svg:stop");g.setAttributeNS(null,"offset",h[0]),g.setAttributeNS(null,"stop-color",h[1]),w.append(g)}return this.defs.append(w),`url(#${p})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,p){this.current.dashArray=u,this.current.dashPhase=p}constructPath(u,p){const k=this.current;let w=k.x,h=k.y,g=[],f=0;for(const B of u)switch(B|0){case s.OPS.rectangle:w=p[f++],h=p[f++];const U=p[f++],X=p[f++],P=w+U,Y=h+X;g.push("M",A(w),A(h),"L",A(P),A(h),"L",A(P),A(Y),"L",A(w),A(Y),"Z");break;case s.OPS.moveTo:w=p[f++],h=p[f++],g.push("M",A(w),A(h));break;case s.OPS.lineTo:w=p[f++],h=p[f++],g.push("L",A(w),A(h));break;case s.OPS.curveTo:w=p[f+4],h=p[f+5],g.push("C",A(p[f]),A(p[f+1]),A(p[f+2]),A(p[f+3]),A(w),A(h)),f+=6;break;case s.OPS.curveTo2:g.push("C",A(w),A(h),A(p[f]),A(p[f+1]),A(p[f+2]),A(p[f+3])),w=p[f+2],h=p[f+3],f+=4;break;case s.OPS.curveTo3:w=p[f+2],h=p[f+3],g.push("C",A(p[f]),A(p[f+1]),A(w),A(h),A(w),A(h)),f+=4;break;case s.OPS.closePath:g.push("Z");break}g=g.join(" "),k.path&&u.length>0&&u[0]!==s.OPS.rectangle&&u[0]!==s.OPS.moveTo?g=k.path.getAttributeNS(null,"d")+g:(k.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(k.path)),k.path.setAttributeNS(null,"d",g),k.path.setAttributeNS(null,"fill","none"),k.element=k.path,k.setCurrentPoint(w,h)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element){this.pendingClip=null;return}const p=`clippath${E++}`,k=this.svgFactory.createElement("svg:clipPath");k.setAttributeNS(null,"id",p),k.setAttributeNS(null,"transform",b(this.transformMatrix));const w=u.element.cloneNode(!0);if(this.pendingClip==="evenodd"?w.setAttributeNS(null,"clip-rule","evenodd"):w.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,k.append(w),this.defs.append(k),u.activeClipUrl){u.clipGroup=null;for(const h of this.extraStack)h.clipGroup=null;k.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${p})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const p=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",p)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[p,k]of u)switch(p){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k);break;case"CA":this.setStrokeAlpha(k);break;case"ca":this.setFillAlpha(k);break;default:(0,s.warn)(`Unimplemented graphic state operator ${p}`);break}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,p=1){const k=this.current;let w=k.dashArray;p!==1&&w.length>0&&(w=w.map(function(h){return p*h})),u.setAttributeNS(null,"stroke",k.strokeColor),u.setAttributeNS(null,"stroke-opacity",k.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",A(k.miterLimit)),u.setAttributeNS(null,"stroke-linecap",k.lineCap),u.setAttributeNS(null,"stroke-linejoin",k.lineJoin),u.setAttributeNS(null,"stroke-width",A(p*k.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",w.map(A).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",A(p*k.dashPhase)+"px")}eoFill(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(u)}paintImageXObject(u){const p=this.getObject(u);if(!p){(0,s.warn)(`Dependent image with object ID ${u} is not ready yet`);return}this.paintInlineImageXObject(p)}paintInlineImageXObject(u,p){const k=u.width,w=u.height,h=D(u,this.forceDataSchema,!!p),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",A(k)),g.setAttributeNS(null,"height",A(w)),this.current.element=g,this.clip("nonzero");const f=this.svgFactory.createElement("svg:image");f.setAttributeNS(N,"xlink:href",h),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y",A(-w)),f.setAttributeNS(null,"width",A(k)+"px"),f.setAttributeNS(null,"height",A(w)+"px"),f.setAttributeNS(null,"transform",`scale(${A(1/k)} ${A(-1/w)})`),p?p.append(f):this._ensureTransformGroup().append(f)}paintImageMaskXObject(u){const p=this.getObject(u.data,u);if(p.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const k=this.current,w=p.width,h=p.height,g=k.fillColor;k.maskId=`mask${O++}`;const f=this.svgFactory.createElement("svg:mask");f.setAttributeNS(null,"id",k.maskId);const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",A(w)),B.setAttributeNS(null,"height",A(h)),B.setAttributeNS(null,"fill",g),B.setAttributeNS(null,"mask",`url(#${k.maskId})`),this.defs.append(f),this._ensureTransformGroup().append(B),this.paintInlineImageXObject(p,f)}paintFormXObjectBegin(u,p){if(Array.isArray(u)&&u.length===6&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),p){const k=p[2]-p[0],w=p[3]-p[1],h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",p[0]),h.setAttributeNS(null,"y",p[1]),h.setAttributeNS(null,"width",A(k)),h.setAttributeNS(null,"height",A(w)),this.current.element=h,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const p=this.svgFactory.create(u.width,u.height),k=this.svgFactory.createElement("svg:defs");p.append(k),this.defs=k;const w=this.svgFactory.createElement("svg:g");return w.setAttributeNS(null,"transform",b(u.transform)),p.append(w),this.svg=w,p}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=M},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class e{static textContent(s){const a=[],o={items:a,styles:Object.create(null)};function N(y){var D;if(!y)return;let _=null;const l=y.name;if(l==="#text")_=y.value;else if(e.shouldBuildText(l))(D=y==null?void 0:y.attributes)!=null&&D.textContent?_=y.attributes.textContent:y.value&&(_=y.value);else return;if(_!==null&&a.push({str:_}),!!y.children)for(const I of y.children)N(I)}return N(s),o}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}t.XfaText=e},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=b,t.updateTextLayer=E;var i=e(1),s=e(6);const a=1e5,o=30,N=.8,y=new Map;function _(O,x){let M;if(x&&i.FeatureTest.isOffscreenCanvasSupported)M=new OffscreenCanvas(O,O).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=O,M=S.getContext("2d",{alpha:!1})}return M}function l(O,x){const M=y.get(O);if(M)return M;const S=_(o,x);S.font=`${o}px ${O}`;const u=S.measureText("");let p=u.fontBoundingBoxAscent,k=Math.abs(u.fontBoundingBoxDescent);if(p){const h=p/(p+k);return y.set(O,h),S.canvas.width=S.canvas.height=0,h}S.strokeStyle="red",S.clearRect(0,0,o,o),S.strokeText("g",0,0);let w=S.getImageData(0,0,o,o).data;k=0;for(let h=w.length-1-3;h>=0;h-=4)if(w[h]>0){k=Math.ceil(h/4/o);break}S.clearRect(0,0,o,o),S.strokeText("A",0,o),w=S.getImageData(0,0,o,o).data,p=0;for(let h=0,g=w.length;h<g;h+=4)if(w[h]>0){p=o-Math.floor(h/4/o);break}if(S.canvas.width=S.canvas.height=0,p){const h=p/(p+k);return y.set(O,h),h}return y.set(O,N),N}function D(O,x,M){const S=document.createElement("span"),u={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};O._textDivs.push(S);const p=i.Util.transform(O._transform,x.transform);let k=Math.atan2(p[1],p[0]);const w=M[x.fontName];w.vertical&&(k+=Math.PI/2);const h=Math.hypot(p[2],p[3]),g=h*l(w.fontFamily,O._isOffscreenCanvasSupported);let f,B;k===0?(f=p[4],B=p[5]-g):(f=p[4]+g*Math.sin(k),B=p[5]-g*Math.cos(k));const U="calc(var(--scale-factor)*",X=S.style;O._container===O._rootContainer?(X.left=`${(100*f/O._pageWidth).toFixed(2)}%`,X.top=`${(100*B/O._pageHeight).toFixed(2)}%`):(X.left=`${U}${f.toFixed(2)}px)`,X.top=`${U}${B.toFixed(2)}px)`),X.fontSize=`${U}${h.toFixed(2)}px)`,X.fontFamily=w.fontFamily,u.fontSize=h,S.setAttribute("role","presentation"),S.textContent=x.str,S.dir=x.dir,O._fontInspectorEnabled&&(S.dataset.fontName=x.fontName),k!==0&&(u.angle=k*(180/Math.PI));let P=!1;if(x.str.length>1)P=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const Y=Math.abs(x.transform[0]),H=Math.abs(x.transform[3]);Y!==H&&Math.max(Y,H)/Math.min(Y,H)>1.5&&(P=!0)}P&&(u.canvasWidth=w.vertical?x.height:x.width),O._textDivProperties.set(S,u),O._isReadableStream&&O._layoutText(S)}function I(O){const{div:x,scale:M,properties:S,ctx:u,prevFontSize:p,prevFontFamily:k}=O,{style:w}=x;let h="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:g}=w,{canvasWidth:f,fontSize:B}=S;(p!==B||k!==g)&&(u.font=`${B*M}px ${g}`,O.prevFontSize=B,O.prevFontFamily=g);const{width:U}=u.measureText(x.textContent);U>0&&(h=`scaleX(${f*M/U})`)}S.angle!==0&&(h=`rotate(${S.angle}deg) ${h}`),h.length>0&&(w.transform=h)}function C(O){if(O._canceled)return;const x=O._textDivs,M=O._capability;if(x.length>a){M.resolve();return}if(!O._isReadableStream)for(const u of x)O._layoutText(u);M.resolve()}class A{constructor({textContentSource:x,container:M,viewport:S,textDivs:u,textDivProperties:p,textContentItemsStr:k,isOffscreenCanvasSupported:w}){var U;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=u||[],this._textContentItemsStr=k||[],this._isOffscreenCanvasSupported=w,this._fontInspectorEnabled=!!((U=globalThis.FontInspector)!=null&&U.enabled),this._reader=null,this._textDivProperties=p||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,w)};const{pageWidth:h,pageHeight:g,pageX:f,pageY:B}=S.rawDims;this._transform=[1,0,0,-1,-f,B+g],this._pageWidth=h,this._pageHeight=g,(0,s.setLayerDimensions)(M,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(x,M){for(const S of x){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),u.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),D(this,S,M)}}_layoutText(x){const M=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,I(this._layoutTextParams),M.hasText&&this._container.append(x),M.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const x=new i.PromiseCapability;let M=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:u,done:p})=>{if(p){x.resolve();return}Object.assign(M,u.styles),this._processItems(u.items,M),S()},x.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:u}=this._textContentSource;this._processItems(S,u),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{M=null,C(this)},this._capability.reject)}}t.TextLayerRenderTask=A;function b(O){!O.textContentSource&&(O.textContent||O.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),O.textContentSource=O.textContent||O.textContentStream);const{container:x,viewport:M}=O,S=getComputedStyle(x),u=S.getPropertyValue("visibility"),p=parseFloat(S.getPropertyValue("--scale-factor"));u==="visible"&&(!p||Math.abs(p-M.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const k=new A(O);return k._render(),k}function E({container:O,viewport:x,textDivs:M,textDivProperties:S,isOffscreenCanvasSupported:u,mustRotate:p=!0,mustRescale:k=!0}){if(p&&(0,s.setLayerDimensions)(O,{rotation:x.rotation}),k){const w=_(0,u),g={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:w};for(const f of M)g.properties=S.get(f),g.div=f,I(g)}}},(n,t,e)=>{var D,I,C,A,b,E,O,x,M,S,u,$e,k,mn,h,He,f,Ve;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=e(1),s=e(4),a=e(5),o=e(28),N=e(33),y=e(6),_=e(34);const U=class U{constructor({uiManager:P,pageIndex:Y,div:H,accessibilityManager:V,annotationLayer:Q,viewport:st,l10n:ft}){q(this,u);q(this,k);q(this,h);q(this,f);q(this,D,void 0);q(this,I,!1);q(this,C,null);q(this,A,this.pointerup.bind(this));q(this,b,this.pointerdown.bind(this));q(this,E,new Map);q(this,O,!1);q(this,x,!1);q(this,M,!1);q(this,S,void 0);const Et=[o.FreeTextEditor,N.InkEditor,_.StampEditor];if(!U._initialized){U._initialized=!0;for(const W of Et)W.initialize(ft)}P.registerEditorTypes(Et),lt(this,S,P),this.pageIndex=Y,this.div=H,lt(this,D,V),lt(this,C,Q),this.viewport=st,r(this,S).addLayer(this)}get isEmpty(){return r(this,E).size===0}updateToolbar(P){r(this,S).updateToolbar(P)}updateMode(P=r(this,S).getMode()){nt(this,f,Ve).call(this),P===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),r(this,S).unselectAll(),P!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",P===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",P===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",P===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(P){if(!P&&r(this,S).getMode()!==i.AnnotationEditorType.INK)return;if(!P){for(const H of r(this,E).values())if(H.isEmpty()){H.setInBackground();return}}nt(this,h,He).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(P){r(this,S).setEditingState(P)}addCommands(P){r(this,S).addCommands(P)}enable(){this.div.style.pointerEvents="auto";const P=new Set;for(const H of r(this,E).values())H.enableEditing(),H.annotationElementId&&P.add(H.annotationElementId);if(!r(this,C))return;const Y=r(this,C).getEditableAnnotations();for(const H of Y){if(H.hide(),r(this,S).isDeletedAnnotationElement(H.data.id)||P.has(H.data.id))continue;const V=this.deserialize(H);V&&(this.addOrRebuild(V),V.enableEditing())}}disable(){var Y;lt(this,M,!0),this.div.style.pointerEvents="none";const P=new Set;for(const H of r(this,E).values()){if(H.disableEditing(),!H.annotationElementId||H.serialize()!==null){P.add(H.annotationElementId);continue}(Y=this.getEditableAnnotation(H.annotationElementId))==null||Y.show(),H.remove()}if(r(this,C)){const H=r(this,C).getEditableAnnotations();for(const V of H){const{id:Q}=V.data;P.has(Q)||r(this,S).isDeletedAnnotationElement(Q)||V.show()}}nt(this,f,Ve).call(this),this.isEmpty&&(this.div.hidden=!0),lt(this,M,!1)}getEditableAnnotation(P){var Y;return((Y=r(this,C))==null?void 0:Y.getEditableAnnotation(P))||null}setActiveEditor(P){r(this,S).getActive()!==P&&r(this,S).setActiveEditor(P)}enableClick(){this.div.addEventListener("pointerdown",r(this,b)),this.div.addEventListener("pointerup",r(this,A))}disableClick(){this.div.removeEventListener("pointerdown",r(this,b)),this.div.removeEventListener("pointerup",r(this,A))}attach(P){r(this,E).set(P.id,P);const{annotationElementId:Y}=P;Y&&r(this,S).isDeletedAnnotationElement(Y)&&r(this,S).removeDeletedAnnotationElement(P)}detach(P){var Y;r(this,E).delete(P.id),(Y=r(this,D))==null||Y.removePointerInTextLayer(P.contentDiv),!r(this,M)&&P.annotationElementId&&r(this,S).addDeletedAnnotationElement(P)}remove(P){this.detach(P),r(this,S).removeEditor(P),P.div.style.display="none",setTimeout(()=>{P.div.style.display="",P.div.remove(),P.isAttachedToDOM=!1,document.activeElement===document.body&&r(this,S).focusMainContainer()},0),r(this,x)||this.addInkEditorIfNeeded(!1)}add(P){if(nt(this,u,$e).call(this,P),r(this,S).addEditor(P),this.attach(P),!P.isAttachedToDOM){const Y=P.render();this.div.append(Y),P.isAttachedToDOM=!0}this.moveEditorInDOM(P),P.onceAdded(),r(this,S).addToAnnotationStorage(P)}moveEditorInDOM(P){var Y;(Y=r(this,D))==null||Y.moveElementInDOM(this.div,P.div,P.contentDiv,!0)}addOrRebuild(P){P.needsToBeRebuilt()?P.rebuild():this.add(P)}addUndoableEditor(P){const Y=()=>{this.addOrRebuild(P)},H=()=>{P.remove()};this.addCommands({cmd:Y,undo:H,mustExec:!1})}getNextId(){return r(this,S).getId()}deserialize(P){switch(P.annotationType??P.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(P,this,r(this,S));case i.AnnotationEditorType.INK:return N.InkEditor.deserialize(P,this,r(this,S));case i.AnnotationEditorType.STAMP:return _.StampEditor.deserialize(P,this,r(this,S))}return null}setSelected(P){r(this,S).setSelected(P)}toggleSelected(P){r(this,S).toggleSelected(P)}isSelected(P){return r(this,S).isSelected(P)}unselect(P){r(this,S).unselect(P)}pointerup(P){const{isMac:Y}=i.FeatureTest.platform;if(!(P.button!==0||P.ctrlKey&&Y)&&P.target===this.div&&r(this,O)){if(lt(this,O,!1),!r(this,I)){lt(this,I,!0);return}nt(this,h,He).call(this,P)}}pointerdown(P){if(r(this,O)){lt(this,O,!1);return}const{isMac:Y}=i.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&Y||P.target!==this.div)return;lt(this,O,!0);const H=r(this,S).getActive();lt(this,I,!H||H.isEmpty())}drop(P){const Y=P.dataTransfer.getData("text/plain"),H=r(this,S).getEditor(Y);if(!H)return;P.preventDefault(),P.dataTransfer.dropEffect="move",nt(this,u,$e).call(this,H);const V=this.div.getBoundingClientRect(),Q=P.clientX-V.x,st=P.clientY-V.y;H.translate(Q-H.startX,st-H.startY),this.moveEditorInDOM(H),H.div.focus()}dragover(P){P.preventDefault()}destroy(){var P,Y;((P=r(this,S).getActive())==null?void 0:P.parent)===this&&r(this,S).setActiveEditor(null);for(const H of r(this,E).values())(Y=r(this,D))==null||Y.removePointerInTextLayer(H.contentDiv),H.setParent(null),H.isAttachedToDOM=!1,H.div.remove();this.div=null,r(this,E).clear(),r(this,S).removeLayer(this)}render({viewport:P}){this.viewport=P,(0,y.setLayerDimensions)(this.div,P),(0,a.bindEvents)(this,this.div,["dragover","drop"]);for(const Y of r(this,S).getEditors(this.pageIndex))this.add(Y);this.updateMode()}update({viewport:P}){r(this,S).commitOrRemove(),this.viewport=P,(0,y.setLayerDimensions)(this.div,{rotation:P.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:P,pageHeight:Y}=this.viewport.rawDims;return[P,Y]}};D=new WeakMap,I=new WeakMap,C=new WeakMap,A=new WeakMap,b=new WeakMap,E=new WeakMap,O=new WeakMap,x=new WeakMap,M=new WeakMap,S=new WeakMap,u=new WeakSet,$e=function(P){var Y;P.parent!==this&&(P.annotationElementId&&(r(this,S).addDeletedAnnotationElement(P.annotationElementId),s.AnnotationEditor.deleteAnnotationElement(P),P.annotationElementId=null),this.attach(P),(Y=P.parent)==null||Y.detach(P),P.setParent(this),P.div&&P.isAttachedToDOM&&(P.div.remove(),this.div.append(P.div)))},k=new WeakSet,mn=function(P){switch(r(this,S).getMode()){case i.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(P);case i.AnnotationEditorType.INK:return new N.InkEditor(P);case i.AnnotationEditorType.STAMP:return new _.StampEditor(P)}return null},h=new WeakSet,He=function(P){const Y=this.getNextId(),H=nt(this,k,mn).call(this,{parent:this,id:Y,x:P.offsetX,y:P.offsetY,uiManager:r(this,S)});return H&&this.add(H),H},f=new WeakSet,Ve=function(){lt(this,x,!0);for(const P of r(this,E).values())P.isEmpty()&&P.remove();lt(this,x,!1)},qt(U,"_initialized",!1);let l=U;t.AnnotationEditorLayer=l},(n,t,e)=>{var y,_,l,D,I,C,A,b,E,O,_n,M,En,u,An,k,ge,h,Be,f,bn,U,Ue;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=e(1),s=e(5),a=e(4),o=e(29);const P=class P extends a.AnnotationEditor{constructor(V){super({...V,name:"freeTextEditor"});q(this,O);q(this,M);q(this,u);q(this,k);q(this,h);q(this,f);q(this,U);q(this,y,this.editorDivBlur.bind(this));q(this,_,this.editorDivFocus.bind(this));q(this,l,this.editorDivInput.bind(this));q(this,D,this.editorDivKeydown.bind(this));q(this,I,void 0);q(this,C,"");q(this,A,`${this.id}-editor`);q(this,b,void 0);q(this,E,null);lt(this,I,V.color||P._defaultColor||a.AnnotationEditor._defaultLineColor),lt(this,b,V.fontSize||P._defaultFontSize)}static get _keyboardManager(){const V=P.prototype,Q=Et=>Et.isEmpty(),st=s.AnnotationEditorUIManager.TRANSLATE_SMALL,ft=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],V.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],V.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],V._translateEmpty,{args:[-st,0],checker:Q}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],V._translateEmpty,{args:[-ft,0],checker:Q}],[["ArrowRight","mac+ArrowRight"],V._translateEmpty,{args:[st,0],checker:Q}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],V._translateEmpty,{args:[ft,0],checker:Q}],[["ArrowUp","mac+ArrowUp"],V._translateEmpty,{args:[0,-st],checker:Q}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],V._translateEmpty,{args:[0,-ft],checker:Q}],[["ArrowDown","mac+ArrowDown"],V._translateEmpty,{args:[0,st],checker:Q}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],V._translateEmpty,{args:[0,ft],checker:Q}]]))}static initialize(V){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(st=>[st,V.get(st)]));const Q=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Q.getPropertyValue("--freetext-padding"))}static updateDefaultParams(V,Q){switch(V){case i.AnnotationEditorParamsType.FREETEXT_SIZE:P._defaultFontSize=Q;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:P._defaultColor=Q;break}}updateParams(V,Q){switch(V){case i.AnnotationEditorParamsType.FREETEXT_SIZE:nt(this,O,_n).call(this,Q);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:nt(this,M,En).call(this,Q);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,P._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,P._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,r(this,b)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,r(this,I)]]}_translateEmpty(V,Q){this._uiManager.translateSelectedEditors(V,Q,!0)}getInitialTranslation(){const V=this.parentScale;return[-P._internalPadding*V,-(P._internalPadding+r(this,b))*V]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",r(this,D)),this.editorDiv.addEventListener("focus",r(this,_)),this.editorDiv.addEventListener("blur",r(this,y)),this.editorDiv.addEventListener("input",r(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",r(this,A)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",r(this,D)),this.editorDiv.removeEventListener("focus",r(this,_)),this.editorDiv.removeEventListener("blur",r(this,y)),this.editorDiv.removeEventListener("input",r(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(V){super.focusin(V),V.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(this.width){nt(this,U,Ue).call(this);return}this.enableEditMode(),this.editorDiv.focus()}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const V=r(this,C),Q=lt(this,C,nt(this,u,An).call(this).trimEnd());if(V===Q)return;const st=ft=>{if(lt(this,C,ft),!ft){this.remove();return}nt(this,h,Be).call(this),this.rebuild(),nt(this,k,ge).call(this)};this.addCommands({cmd:()=>{st(Q)},undo:()=>{st(V)},mustExec:!1}),nt(this,k,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(V){this.enterInEditMode()}keydown(V){V.target===this.div&&V.key==="Enter"&&this.enterInEditMode()}editorDivKeydown(V){P._keyboardManager.exec(this,V)}editorDivFocus(V){this.isEditing=!0}editorDivBlur(V){this.isEditing=!1}editorDivInput(V){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let V,Q;this.width&&(V=this.x,Q=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",r(this,A)),this.enableEditing(),P._l10nPromise.get("editor_free_text2_aria_label").then(ft=>{var Et;return(Et=this.editorDiv)==null?void 0:Et.setAttribute("aria-label",ft)}),P._l10nPromise.get("free_text2_default_content").then(ft=>{var Et;return(Et=this.editorDiv)==null?void 0:Et.setAttribute("default-content",ft)}),this.editorDiv.contentEditable=!0;const{style:st}=this.editorDiv;if(st.fontSize=`calc(${r(this,b)}px * var(--scale-factor))`,st.color=r(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ft,Et]=this.parentDimensions;if(this.annotationElementId){const{position:W}=r(this,E);let[d,c]=this.getInitialTranslation();[d,c]=this.pageTranslationToScreen(d,c);const[R,j]=this.pageDimensions,[$,G]=this.pageTranslation;let z,Z;switch(this.rotation){case 0:z=V+(W[0]-$)/R,Z=Q+this.height-(W[1]-G)/j;break;case 90:z=V+(W[0]-$)/R,Z=Q-(W[1]-G)/j,[d,c]=[c,-d];break;case 180:z=V-this.width+(W[0]-$)/R,Z=Q-(W[1]-G)/j,[d,c]=[-d,-c];break;case 270:z=V+(W[0]-$-this.height*j)/R,Z=Q+(W[1]-G-this.width*R)/j,[d,c]=[-c,d];break}this.setAt(z*ft,Z*Et,d,c)}else this.setAt(V*ft,Q*Et,this.width*ft,this.height*Et);nt(this,h,Be).call(this),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(V,Q,st){let ft=null;if(V instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:W,fontColor:d},rect:c,rotation:R,id:j},textContent:$,textPosition:G,parent:{page:{pageNumber:z}}}=V;if(!$||$.length===0)return null;ft=V={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(d),fontSize:W,value:$.join(`
`),position:G,pageIndex:z-1,rect:c,rotation:R,id:j,deleted:!1}}const Et=super.deserialize(V,Q,st);return lt(Et,b,V.fontSize),lt(Et,I,i.Util.makeHexColor(...V.color)),lt(Et,C,V.value),Et.annotationElementId=V.id||null,lt(Et,E,ft),Et}serialize(V=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Q=P._internalPadding*this.parentScale,st=this.getRect(Q,Q),ft=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:r(this,I)),Et={annotationType:i.AnnotationEditorType.FREETEXT,color:ft,fontSize:r(this,b),value:r(this,C),pageIndex:this.pageIndex,rect:st,rotation:this.rotation};return V?Et:this.annotationElementId&&!nt(this,f,bn).call(this,Et)?null:(Et.id=this.annotationElementId,Et)}};y=new WeakMap,_=new WeakMap,l=new WeakMap,D=new WeakMap,I=new WeakMap,C=new WeakMap,A=new WeakMap,b=new WeakMap,E=new WeakMap,O=new WeakSet,_n=function(V){const Q=ft=>{this.editorDiv.style.fontSize=`calc(${ft}px * var(--scale-factor))`,this.translate(0,-(ft-r(this,b))*this.parentScale),lt(this,b,ft),nt(this,k,ge).call(this)},st=r(this,b);this.addCommands({cmd:()=>{Q(V)},undo:()=>{Q(st)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,En=function(V){const Q=r(this,I);this.addCommands({cmd:()=>{lt(this,I,this.editorDiv.style.color=V)},undo:()=>{lt(this,I,this.editorDiv.style.color=Q)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,An=function(){const V=this.editorDiv.getElementsByTagName("div");if(V.length===0)return this.editorDiv.innerText;const Q=[];for(const st of V)Q.push(st.innerText.replace(/\r\n?|\n/,""));return Q.join(`
`)},k=new WeakSet,ge=function(){const[V,Q]=this.parentDimensions;let st;if(this.isAttachedToDOM)st=this.div.getBoundingClientRect();else{const{currentLayer:ft,div:Et}=this,W=Et.style.display;Et.style.display="hidden",ft.div.append(this.div),st=Et.getBoundingClientRect(),Et.remove(),Et.style.display=W}this.rotation%180===this.parentRotation%180?(this.width=st.width/V,this.height=st.height/Q):(this.width=st.height/V,this.height=st.width/Q),this.fixAndSetPosition()},h=new WeakSet,Be=function(){if(this.editorDiv.replaceChildren(),!!r(this,C))for(const V of r(this,C).split(`
`)){const Q=document.createElement("div");Q.append(V?document.createTextNode(V):document.createElement("br")),this.editorDiv.append(Q)}},f=new WeakSet,bn=function(V){const{value:Q,fontSize:st,color:ft,rect:Et,pageIndex:W}=r(this,E);return V.value!==Q||V.fontSize!==st||V.rect.some((d,c)=>Math.abs(d-Et[c])>=1)||V.color.some((d,c)=>d!==ft[c])||V.pageIndex!==W},U=new WeakSet,Ue=function(V=!1){if(!this.annotationElementId)return;if(nt(this,k,ge).call(this),!V&&(this.width===0||this.height===0)){setTimeout(()=>nt(this,U,Ue).call(this,!0),0);return}const Q=P._internalPadding*this.parentScale;r(this,E).rect=this.getRect(Q,Q)},qt(P,"_freeTextDefaultContent",""),qt(P,"_l10nPromise"),qt(P,"_internalPadding",0),qt(P,"_defaultColor",null),qt(P,"_defaultFontSize",10),qt(P,"_type","freetext");let N=P;t.FreeTextEditor=N},(n,t,e)=>{var c,R,re,$,vn,z,Z,ut,ot,ht,pt,Tt,At,xt,Ht,vt,It,yt,at,it,mt,bt,We,Dt,je,kt,Ge,Ut,Vt,dt,tt,et,Ct,Bt,Lt,Kt,Xt,yn,J,Ke;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var i=e(1),s=e(6),a=e(3),o=e(30),N=e(31),y=e(32);const _=1e3,l=9,D=new WeakSet;function I(ct){return{width:ct[2]-ct[0],height:ct[3]-ct[1]}}class C{static create(T){switch(T.data.annotationType){case i.AnnotationType.LINK:return new b(T);case i.AnnotationType.TEXT:return new E(T);case i.AnnotationType.WIDGET:switch(T.data.fieldType){case"Tx":return new x(T);case"Btn":return T.data.radioButton?new u(T):T.data.checkBox?new S(T):new p(T);case"Ch":return new k(T);case"Sig":return new M(T)}return new O(T);case i.AnnotationType.POPUP:return new w(T);case i.AnnotationType.FREETEXT:return new g(T);case i.AnnotationType.LINE:return new f(T);case i.AnnotationType.SQUARE:return new B(T);case i.AnnotationType.CIRCLE:return new U(T);case i.AnnotationType.POLYLINE:return new X(T);case i.AnnotationType.CARET:return new Y(T);case i.AnnotationType.INK:return new H(T);case i.AnnotationType.POLYGON:return new P(T);case i.AnnotationType.HIGHLIGHT:return new V(T);case i.AnnotationType.UNDERLINE:return new Q(T);case i.AnnotationType.SQUIGGLY:return new st(T);case i.AnnotationType.STRIKEOUT:return new ft(T);case i.AnnotationType.STAMP:return new Et(T);case i.AnnotationType.FILEATTACHMENT:return new W(T);default:return new A(T)}}}class A{constructor(T,{isRenderable:m=!1,ignoreBorder:F=!1,createQuadrilaterals:L=!1}={}){q(this,c,!1);this.isRenderable=m,this.data=T.data,this.layer=T.layer,this.linkService=T.linkService,this.downloadManager=T.downloadManager,this.imageResourcesPath=T.imageResourcesPath,this.renderForms=T.renderForms,this.svgFactory=T.svgFactory,this.annotationStorage=T.annotationStorage,this.enableScripting=T.enableScripting,this.hasJSActions=T.hasJSActions,this._fieldObjects=T.fieldObjects,this.parent=T.parent,m&&(this.container=this._createContainer(F)),L&&this._createQuadrilaterals()}_createContainer(T){const{data:m,parent:{page:F,viewport:L}}=this,K=document.createElement("section");K.setAttribute("data-annotation-id",m.id),K.style.zIndex=this.parent.zIndex++,this.data.popupRef&&K.setAttribute("aria-haspopup","dialog"),m.noRotate&&K.classList.add("norotate");const{pageWidth:rt,pageHeight:_t,pageX:Rt,pageY:Nt}=L.rawDims;if(!m.rect||this instanceof w){const{rotation:Mt}=m;return!m.hasOwnCanvas&&Mt!==0&&this.setRotation(Mt,K),K}const{width:St,height:Ft}=I(m.rect),wt=i.Util.normalizeRect([m.rect[0],F.view[3]-m.rect[1]+F.view[1],m.rect[2],F.view[3]-m.rect[3]+F.view[1]]);if(!T&&m.borderStyle.width>0){K.style.borderWidth=`${m.borderStyle.width}px`;const Mt=m.borderStyle.horizontalCornerRadius,$t=m.borderStyle.verticalCornerRadius;if(Mt>0||$t>0){const Yt=`calc(${Mt}px * var(--scale-factor)) / calc(${$t}px * var(--scale-factor))`;K.style.borderRadius=Yt}else if(this instanceof u){const Yt=`calc(${St}px * var(--scale-factor)) / calc(${Ft}px * var(--scale-factor))`;K.style.borderRadius=Yt}switch(m.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:K.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:K.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:K.style.borderBottomStyle="solid";break}const jt=m.borderColor||null;jt?(lt(this,c,!0),K.style.borderColor=i.Util.makeHexColor(jt[0]|0,jt[1]|0,jt[2]|0)):K.style.borderWidth=0}K.style.left=`${100*(wt[0]-Rt)/rt}%`,K.style.top=`${100*(wt[1]-Nt)/_t}%`;const{rotation:Ot}=m;return m.hasOwnCanvas||Ot===0?(K.style.width=`${100*St/rt}%`,K.style.height=`${100*Ft/_t}%`):this.setRotation(Ot,K),K}setRotation(T,m=this.container){if(!this.data.rect)return;const{pageWidth:F,pageHeight:L}=this.parent.viewport.rawDims,{width:K,height:rt}=I(this.data.rect);let _t,Rt;T%180===0?(_t=100*K/F,Rt=100*rt/L):(_t=100*rt/F,Rt=100*K/L),m.style.width=`${_t}%`,m.style.height=`${Rt}%`,m.setAttribute("data-main-rotation",(360-T)%360)}get _commonActions(){const T=(m,F,L)=>{const K=L.detail[m];L.target.style[F]=o.ColorConverters[`${K[0]}_HTML`](K.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:m=>{const F=m.detail.display%2===1;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:F,print:m.detail.display===0||m.detail.display===3})},print:m=>{this.annotationStorage.setValue(this.data.id,{print:m.detail.print})},hidden:m=>{this.container.style.visibility=m.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:m.detail.hidden})},focus:m=>{setTimeout(()=>m.target.focus({preventScroll:!1}),0)},userName:m=>{m.target.title=m.detail.userName},readonly:m=>{m.detail.readonly?m.target.setAttribute("readonly",""):m.target.removeAttribute("readonly")},required:m=>{this._setRequired(m.target,m.detail.required)},bgColor:m=>{T("bgColor","backgroundColor",m)},fillColor:m=>{T("fillColor","backgroundColor",m)},fgColor:m=>{T("fgColor","color",m)},textColor:m=>{T("textColor","color",m)},borderColor:m=>{T("borderColor","borderColor",m)},strokeColor:m=>{T("strokeColor","borderColor",m)},rotation:m=>{const F=m.detail.rotation;this.setRotation(F),this.annotationStorage.setValue(this.data.id,{rotation:F})}})}_dispatchEventFromSandbox(T,m){const F=this._commonActions;for(const L of Object.keys(m.detail)){const K=T[L]||F[L];K==null||K(m)}}_setDefaultPropertiesFromJS(T){if(!this.enableScripting)return;const m=this.annotationStorage.getRawValue(this.data.id);if(!m)return;const F=this._commonActions;for(const[L,K]of Object.entries(m)){const rt=F[L];if(rt){const _t={detail:{[L]:K},target:T};rt(_t),delete m[L]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:T}=this.data;if(!T)return;const[m,F,L,K]=this.data.rect;if(T.length===1){const[,{x:$t,y:jt},{x:Yt,y:Jt}]=T[0];if(L===$t&&K===jt&&m===Yt&&F===Jt)return}const{style:rt}=this.container;let _t;if(r(this,c)){const{borderColor:$t,borderWidth:jt}=rt;rt.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$t}" stroke-width="${jt}">`],this.container.classList.add("hasBorder")}const Rt=L-m,Nt=K-F,{svgFactory:St}=this,Ft=St.createElement("svg");Ft.classList.add("quadrilateralsContainer"),Ft.setAttribute("width",0),Ft.setAttribute("height",0);const wt=St.createElement("defs");Ft.append(wt);const Ot=St.createElement("clipPath"),Mt=`clippath_${this.data.id}`;Ot.setAttribute("id",Mt),Ot.setAttribute("clipPathUnits","objectBoundingBox"),wt.append(Ot);for(const[,{x:$t,y:jt},{x:Yt,y:Jt}]of T){const zt=St.createElement("rect"),Qt=(Yt-m)/Rt,te=(K-jt)/Nt,Zt=($t-Yt)/Rt,se=(jt-Jt)/Nt;zt.setAttribute("x",Qt),zt.setAttribute("y",te),zt.setAttribute("width",Zt),zt.setAttribute("height",se),Ot.append(zt),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${Qt}" y="${te}" width="${Zt}" height="${se}"/>`)}r(this,c)&&(_t.push("</g></svg>')"),rt.backgroundImage=_t.join("")),this.container.append(Ft),this.container.style.clipPath=`url(#${Mt})`}_createPopup(){const{container:T,data:m}=this;T.setAttribute("aria-haspopup","dialog");const F=new w({data:{color:m.color,titleObj:m.titleObj,modificationDate:m.modificationDate,contentsObj:m.contentsObj,richText:m.richText,parentRect:m.rect,borderStyle:0,id:`popup_${m.id}`,rotation:m.rotation},parent:this.parent,elements:[this]});this.parent.div.append(F.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(T,m=null){const F=[];if(this._fieldObjects){const L=this._fieldObjects[T];if(L)for(const{page:K,id:rt,exportValues:_t}of L){if(K===-1||rt===m)continue;const Rt=typeof _t=="string"?_t:null,Nt=document.querySelector(`[data-element-id="${rt}"]`);if(Nt&&!D.has(Nt)){(0,i.warn)(`_getElementsByName - element not allowed: ${rt}`);continue}F.push({id:rt,exportValue:Rt,domElement:Nt})}return F}for(const L of document.getElementsByName(T)){const{exportValue:K}=L,rt=L.getAttribute("data-element-id");rt!==m&&D.has(L)&&F.push({id:rt,exportValue:K,domElement:L})}return F}show(){var T;this.container&&(this.container.hidden=!1),(T=this.popup)==null||T.maybeShow()}hide(){var T;this.container&&(this.container.hidden=!0),(T=this.popup)==null||T.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const T=this.getElementsToTriggerPopup();if(Array.isArray(T))for(const m of T)m.classList.add("highlightArea");else T.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:T,data:{id:m}}=this;this.container.addEventListener("dblclick",()=>{var F;(F=this.linkService.eventBus)==null||F.dispatch("switchannotationeditormode",{source:this,mode:T,editId:m})})}}c=new WeakMap;class b extends A{constructor(m,F=null){super(m,{isRenderable:!0,ignoreBorder:!!(F!=null&&F.ignoreBorder),createQuadrilaterals:!0});q(this,R);q(this,$);this.isTooltipOnly=m.data.isTooltipOnly}render(){const{data:m,linkService:F}=this,L=document.createElement("a");L.setAttribute("data-element-id",m.id);let K=!1;return m.url?(F.addLinkAttributes(L,m.url,m.newWindow),K=!0):m.action?(this._bindNamedAction(L,m.action),K=!0):m.attachment?(this._bindAttachment(L,m.attachment),K=!0):m.setOCGState?(nt(this,$,vn).call(this,L,m.setOCGState),K=!0):m.dest?(this._bindLink(L,m.dest),K=!0):(m.actions&&(m.actions.Action||m.actions["Mouse Up"]||m.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,m),K=!0),m.resetForm?(this._bindResetFormAction(L,m.resetForm),K=!0):this.isTooltipOnly&&!K&&(this._bindLink(L,""),K=!0)),this.container.classList.add("linkAnnotation"),K&&this.container.append(L),this.container}_bindLink(m,F){m.href=this.linkService.getDestinationHash(F),m.onclick=()=>(F&&this.linkService.goToDestination(F),!1),(F||F==="")&&nt(this,R,re).call(this)}_bindNamedAction(m,F){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeNamedAction(F),!1),nt(this,R,re).call(this)}_bindAttachment(m,F){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>{var L;return(L=this.downloadManager)==null||L.openOrDownloadData(this.container,F.content,F.filename),!1},nt(this,R,re).call(this)}_bindJSAction(m,F){m.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(F.actions)){const rt=L.get(K);rt&&(m[rt]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F.id,name:K}}),!1})}m.onclick||(m.onclick=()=>!1),nt(this,R,re).call(this)}_bindResetFormAction(m,F){const L=m.onclick;if(L||(m.href=this.linkService.getAnchorUrl("")),nt(this,R,re).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(m.onclick=()=>!1);return}m.onclick=()=>{var Ft;L==null||L();const{fields:K,refs:rt,include:_t}=F,Rt=[];if(K.length!==0||rt.length!==0){const wt=new Set(rt);for(const Ot of K){const Mt=this._fieldObjects[Ot]||[];for(const{id:$t}of Mt)wt.add($t)}for(const Ot of Object.values(this._fieldObjects))for(const Mt of Ot)wt.has(Mt.id)===_t&&Rt.push(Mt)}else for(const wt of Object.values(this._fieldObjects))Rt.push(...wt);const Nt=this.annotationStorage,St=[];for(const wt of Rt){const{id:Ot}=wt;switch(St.push(Ot),wt.type){case"text":{const $t=wt.defaultValue||"";Nt.setValue(Ot,{value:$t});break}case"checkbox":case"radiobutton":{const $t=wt.defaultValue===wt.exportValues;Nt.setValue(Ot,{value:$t});break}case"combobox":case"listbox":{const $t=wt.defaultValue||"";Nt.setValue(Ot,{value:$t});break}default:continue}const Mt=document.querySelector(`[data-element-id="${Ot}"]`);if(Mt){if(!D.has(Mt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Ot}`);continue}}else continue;Mt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:St,name:"ResetForm"}})),!1}}}R=new WeakSet,re=function(){this.container.setAttribute("data-internal-link","")},$=new WeakSet,vn=function(m,F){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeSetOCGState(F),!1),nt(this,R,re).call(this)};class E extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m})}render(){this.container.classList.add("textAnnotation");const T=document.createElement("img");return T.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",T.alt="[{{type}} Annotation]",T.dataset.l10nId="text_annotation_type",T.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(T),this.container}}class O extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(T){var m;this.data.hasOwnCanvas&&(((m=T.previousSibling)==null?void 0:m.nodeName)==="CANVAS"&&(T.previousSibling.hidden=!0),T.hidden=!1)}_getKeyModifier(T){const{isWin:m,isMac:F}=i.FeatureTest.platform;return m&&T.ctrlKey||F&&T.metaKey}_setEventListener(T,m,F,L){m.includes("mouse")?T.addEventListener(m,K=>{var rt;(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:L(K),shift:K.shiftKey,modifier:this._getKeyModifier(K)}})}):T.addEventListener(m,K=>{var rt;(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:L(K)}})})}_setEventListeners(T,m,F){var L;for(const[K,rt]of m)(rt==="Action"||(L=this.data.actions)!=null&&L[rt])&&this._setEventListener(T,K,rt,F)}_setBackgroundColor(T){const m=this.data.backgroundColor||null;T.style.backgroundColor=m===null?"transparent":i.Util.makeHexColor(m[0],m[1],m[2])}_setTextStyle(T){const m=["left","center","right"],{fontColor:F}=this.data.defaultAppearanceData,L=this.data.defaultAppearanceData.fontSize||l,K=T.style;let rt;const _t=2,Rt=Nt=>Math.round(10*Nt)/10;if(this.data.multiLine){const Nt=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),St=Math.round(Nt/(i.LINE_FACTOR*L))||1,Ft=Nt/St;rt=Math.min(L,Rt(Ft/i.LINE_FACTOR))}else{const Nt=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);rt=Math.min(L,Rt(Nt/i.LINE_FACTOR))}K.fontSize=`calc(${rt}px * var(--scale-factor))`,K.color=i.Util.makeHexColor(F[0],F[1],F[2]),this.data.textAlignment!==null&&(K.textAlign=m[this.data.textAlignment])}_setRequired(T,m){m?T.setAttribute("required",!0):T.removeAttribute("required"),T.setAttribute("aria-required",m)}}class x extends O{constructor(T){const m=T.renderForms||!T.data.hasAppearance&&!!T.data.fieldValue;super(T,{isRenderable:m})}setPropertyOnSiblings(T,m,F,L){const K=this.annotationStorage;for(const rt of this._getElementsByName(T.name,T.id))rt.domElement&&(rt.domElement[m]=F),K.setValue(rt.id,{[L]:F})}render(){var L,K;const T=this.annotationStorage,m=this.data.id;this.container.classList.add("textWidgetAnnotation");let F=null;if(this.renderForms){const rt=T.getValue(m,{value:this.data.fieldValue});let _t=rt.value||"";const Rt=T.getValue(m,{charLimit:this.data.maxLen}).charLimit;Rt&&_t.length>Rt&&(_t=_t.slice(0,Rt));let Nt=rt.formattedValue||((L=this.data.textContent)==null?void 0:L.join(`
`))||null;Nt&&this.data.comb&&(Nt=Nt.replaceAll(/\s+/g,""));const St={userValue:_t,formattedValue:Nt,lastCommittedValue:null,commitKey:1};this.data.multiLine?(F=document.createElement("textarea"),F.textContent=Nt??_t,this.data.doNotScroll&&(F.style.overflowY="hidden")):(F=document.createElement("input"),F.type="text",F.setAttribute("value",Nt??_t),this.data.doNotScroll&&(F.style.overflowX="hidden")),this.data.hasOwnCanvas&&(F.hidden=!0),D.add(F),F.setAttribute("data-element-id",m),F.disabled=this.data.readOnly,F.name=this.data.baseFieldName||this.data.fieldName,F.tabIndex=_,this._setRequired(F,this.data.required),Rt&&(F.maxLength=Rt),F.addEventListener("input",wt=>{T.setValue(m,{value:wt.target.value}),this.setPropertyOnSiblings(F,"value",wt.target.value,"value"),St.formattedValue=null}),F.addEventListener("resetform",wt=>{const Ot=this.data.defaultFieldValue??"";F.value=St.userValue=Ot,St.formattedValue=null});let Ft=wt=>{const{formattedValue:Ot}=St;Ot!=null&&(wt.target.value=Ot),wt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){F.addEventListener("focus",Ot=>{const{target:Mt}=Ot;St.userValue&&(Mt.value=St.userValue),St.lastCommittedValue=Mt.value,St.commitKey=1}),F.addEventListener("updatefromsandbox",Ot=>{this.showElementAndHideCanvas(Ot.target);const Mt={value($t){St.userValue=$t.detail.value??"",T.setValue(m,{value:St.userValue.toString()}),$t.target.value=St.userValue},formattedValue($t){const{formattedValue:jt}=$t.detail;St.formattedValue=jt,jt!=null&&$t.target!==document.activeElement&&($t.target.value=jt),T.setValue(m,{formattedValue:jt})},selRange($t){$t.target.setSelectionRange(...$t.detail.selRange)},charLimit:$t=>{var zt;const{charLimit:jt}=$t.detail,{target:Yt}=$t;if(jt===0){Yt.removeAttribute("maxLength");return}Yt.setAttribute("maxLength",jt);let Jt=St.userValue;!Jt||Jt.length<=jt||(Jt=Jt.slice(0,jt),Yt.value=St.userValue=Jt,T.setValue(m,{value:Jt}),(zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:Jt,willCommit:!0,commitKey:1,selStart:Yt.selectionStart,selEnd:Yt.selectionEnd}}))}};this._dispatchEventFromSandbox(Mt,Ot)}),F.addEventListener("keydown",Ot=>{var jt;St.commitKey=1;let Mt=-1;if(Ot.key==="Escape"?Mt=0:Ot.key==="Enter"&&!this.data.multiLine?Mt=2:Ot.key==="Tab"&&(St.commitKey=3),Mt===-1)return;const{value:$t}=Ot.target;St.lastCommittedValue!==$t&&(St.lastCommittedValue=$t,St.userValue=$t,(jt=this.linkService.eventBus)==null||jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:$t,willCommit:!0,commitKey:Mt,selStart:Ot.target.selectionStart,selEnd:Ot.target.selectionEnd}}))});const wt=Ft;Ft=null,F.addEventListener("blur",Ot=>{var $t;if(!Ot.relatedTarget)return;const{value:Mt}=Ot.target;St.userValue=Mt,St.lastCommittedValue!==Mt&&(($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:Mt,willCommit:!0,commitKey:St.commitKey,selStart:Ot.target.selectionStart,selEnd:Ot.target.selectionEnd}})),wt(Ot)}),(K=this.data.actions)!=null&&K.Keystroke&&F.addEventListener("beforeinput",Ot=>{var te;St.lastCommittedValue=null;const{data:Mt,target:$t}=Ot,{value:jt,selectionStart:Yt,selectionEnd:Jt}=$t;let zt=Yt,Qt=Jt;switch(Ot.inputType){case"deleteWordBackward":{const Zt=jt.substring(0,Yt).match(/\w*[^\w]*$/);Zt&&(zt-=Zt[0].length);break}case"deleteWordForward":{const Zt=jt.substring(Yt).match(/^[^\w]*\w*/);Zt&&(Qt+=Zt[0].length);break}case"deleteContentBackward":Yt===Jt&&(zt-=1);break;case"deleteContentForward":Yt===Jt&&(Qt+=1);break}Ot.preventDefault(),(te=this.linkService.eventBus)==null||te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:jt,change:Mt||"",willCommit:!1,selStart:zt,selEnd:Qt}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ot=>Ot.target.value)}if(Ft&&F.addEventListener("blur",Ft),this.data.comb){const Ot=(this.data.rect[2]-this.data.rect[0])/Rt;F.classList.add("comb"),F.style.letterSpacing=`calc(${Ot}px * var(--scale-factor) - 1ch)`}}else F=document.createElement("div"),F.textContent=this.data.fieldValue,F.style.verticalAlign="middle",F.style.display="table-cell";return this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class M extends O{constructor(T){super(T,{isRenderable:!!T.data.hasOwnCanvas})}}class S extends O{constructor(T){super(T,{isRenderable:T.renderForms})}render(){const T=this.annotationStorage,m=this.data,F=m.id;let L=T.getValue(F,{value:m.exportValue===m.fieldValue}).value;typeof L=="string"&&(L=L!=="Off",T.setValue(F,{value:L})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const K=document.createElement("input");return D.add(K),K.setAttribute("data-element-id",F),K.disabled=m.readOnly,this._setRequired(K,this.data.required),K.type="checkbox",K.name=m.baseFieldName||m.fieldName,L&&K.setAttribute("checked",!0),K.setAttribute("exportValue",m.exportValue),K.tabIndex=_,K.addEventListener("change",rt=>{const{name:_t,checked:Rt}=rt.target;for(const Nt of this._getElementsByName(_t,F)){const St=Rt&&Nt.exportValue===m.exportValue;Nt.domElement&&(Nt.domElement.checked=St),T.setValue(Nt.id,{value:St})}T.setValue(F,{value:Rt})}),K.addEventListener("resetform",rt=>{const _t=m.defaultFieldValue||"Off";rt.target.checked=_t===m.exportValue}),this.enableScripting&&this.hasJSActions&&(K.addEventListener("updatefromsandbox",rt=>{const _t={value(Rt){Rt.target.checked=Rt.detail.value!=="Off",T.setValue(F,{value:Rt.target.checked})}};this._dispatchEventFromSandbox(_t,rt)}),this._setEventListeners(K,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],rt=>rt.target.checked)),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class u extends O{constructor(T){super(T,{isRenderable:T.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const T=this.annotationStorage,m=this.data,F=m.id;let L=T.getValue(F,{value:m.fieldValue===m.buttonValue}).value;typeof L=="string"&&(L=L!==m.buttonValue,T.setValue(F,{value:L}));const K=document.createElement("input");if(D.add(K),K.setAttribute("data-element-id",F),K.disabled=m.readOnly,this._setRequired(K,this.data.required),K.type="radio",K.name=m.baseFieldName||m.fieldName,L&&K.setAttribute("checked",!0),K.tabIndex=_,K.addEventListener("change",rt=>{const{name:_t,checked:Rt}=rt.target;for(const Nt of this._getElementsByName(_t,F))T.setValue(Nt.id,{value:!1});T.setValue(F,{value:Rt})}),K.addEventListener("resetform",rt=>{const _t=m.defaultFieldValue;rt.target.checked=_t!=null&&_t===m.buttonValue}),this.enableScripting&&this.hasJSActions){const rt=m.buttonValue;K.addEventListener("updatefromsandbox",_t=>{const Rt={value:Nt=>{const St=rt===Nt.detail.value;for(const Ft of this._getElementsByName(Nt.target.name)){const wt=St&&Ft.id===F;Ft.domElement&&(Ft.domElement.checked=wt),T.setValue(Ft.id,{value:wt})}}};this._dispatchEventFromSandbox(Rt,_t)}),this._setEventListeners(K,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class p extends b{constructor(T){super(T,{ignoreBorder:T.data.hasAppearance})}render(){const T=super.render();T.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(T.title=this.data.alternativeText);const m=T.lastChild;return this.enableScripting&&this.hasJSActions&&m&&(this._setDefaultPropertiesFromJS(m),m.addEventListener("updatefromsandbox",F=>{this._dispatchEventFromSandbox({},F)})),T}}class k extends O{constructor(T){super(T,{isRenderable:T.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const T=this.annotationStorage,m=this.data.id,F=T.getValue(m,{value:this.data.fieldValue}),L=document.createElement("select");D.add(L),L.setAttribute("data-element-id",m),L.disabled=this.data.readOnly,this._setRequired(L,this.data.required),L.name=this.data.baseFieldName||this.data.fieldName,L.tabIndex=_;let K=this.data.combo&&this.data.options.length>0;this.data.combo||(L.size=this.data.options.length,this.data.multiSelect&&(L.multiple=!0)),L.addEventListener("resetform",St=>{const Ft=this.data.defaultFieldValue;for(const wt of L.options)wt.selected=wt.value===Ft});for(const St of this.data.options){const Ft=document.createElement("option");Ft.textContent=St.displayValue,Ft.value=St.exportValue,F.value.includes(St.exportValue)&&(Ft.setAttribute("selected",!0),K=!1),L.append(Ft)}let rt=null;if(K){const St=document.createElement("option");St.value=" ",St.setAttribute("hidden",!0),St.setAttribute("selected",!0),L.prepend(St),rt=()=>{St.remove(),L.removeEventListener("input",rt),rt=null},L.addEventListener("input",rt)}const _t=St=>{const Ft=St?"value":"textContent",{options:wt,multiple:Ot}=L;return Ot?Array.prototype.filter.call(wt,Mt=>Mt.selected).map(Mt=>Mt[Ft]):wt.selectedIndex===-1?null:wt[wt.selectedIndex][Ft]};let Rt=_t(!1);const Nt=St=>{const Ft=St.target.options;return Array.prototype.map.call(Ft,wt=>({displayValue:wt.textContent,exportValue:wt.value}))};return this.enableScripting&&this.hasJSActions?(L.addEventListener("updatefromsandbox",St=>{const Ft={value(wt){rt==null||rt();const Ot=wt.detail.value,Mt=new Set(Array.isArray(Ot)?Ot:[Ot]);for(const $t of L.options)$t.selected=Mt.has($t.value);T.setValue(m,{value:_t(!0)}),Rt=_t(!1)},multipleSelection(wt){L.multiple=!0},remove(wt){const Ot=L.options,Mt=wt.detail.remove;Ot[Mt].selected=!1,L.remove(Mt),Ot.length>0&&Array.prototype.findIndex.call(Ot,jt=>jt.selected)===-1&&(Ot[0].selected=!0),T.setValue(m,{value:_t(!0),items:Nt(wt)}),Rt=_t(!1)},clear(wt){for(;L.length!==0;)L.remove(0);T.setValue(m,{value:null,items:[]}),Rt=_t(!1)},insert(wt){const{index:Ot,displayValue:Mt,exportValue:$t}=wt.detail.insert,jt=L.children[Ot],Yt=document.createElement("option");Yt.textContent=Mt,Yt.value=$t,jt?jt.before(Yt):L.append(Yt),T.setValue(m,{value:_t(!0),items:Nt(wt)}),Rt=_t(!1)},items(wt){const{items:Ot}=wt.detail;for(;L.length!==0;)L.remove(0);for(const Mt of Ot){const{displayValue:$t,exportValue:jt}=Mt,Yt=document.createElement("option");Yt.textContent=$t,Yt.value=jt,L.append(Yt)}L.options.length>0&&(L.options[0].selected=!0),T.setValue(m,{value:_t(!0),items:Nt(wt)}),Rt=_t(!1)},indices(wt){const Ot=new Set(wt.detail.indices);for(const Mt of wt.target.options)Mt.selected=Ot.has(Mt.index);T.setValue(m,{value:_t(!0)}),Rt=_t(!1)},editable(wt){wt.target.disabled=!wt.detail.editable}};this._dispatchEventFromSandbox(Ft,St)}),L.addEventListener("input",St=>{var wt;const Ft=_t(!0);T.setValue(m,{value:Ft}),St.preventDefault(),(wt=this.linkService.eventBus)==null||wt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:Rt,changeEx:Ft,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],St=>St.target.value)):L.addEventListener("input",function(St){T.setValue(m,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class w extends A{constructor(T){var K,rt,_t;const{data:m,elements:F}=T,L=!!((K=m.titleObj)!=null&&K.str||(rt=m.contentsObj)!=null&&rt.str||(_t=m.richText)!=null&&_t.str);super(T,{isRenderable:L}),this.elements=F}render(){this.container.classList.add("popupAnnotation");const T=new h({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),m=[];for(const F of this.elements)F.popup=T,m.push(F.data.id),F.addHighlightArea();return this.container.setAttribute("aria-controls",m.join(",")),this.container}}class h{constructor({container:T,color:m,elements:F,titleObj:L,modificationDate:K,contentsObj:rt,richText:_t,parent:Rt,rect:Nt,parentRect:St,open:Ft}){q(this,bt);q(this,Dt);q(this,kt);q(this,z,null);q(this,Z,nt(this,kt,Ge).bind(this));q(this,ut,nt(this,Dt,je).bind(this));q(this,ot,nt(this,bt,We).bind(this));q(this,ht,null);q(this,pt,null);q(this,Tt,null);q(this,At,null);q(this,xt,null);q(this,Ht,null);q(this,vt,!1);q(this,It,null);q(this,yt,null);q(this,at,null);q(this,it,null);q(this,mt,!1);lt(this,pt,T),lt(this,it,L),lt(this,Tt,rt),lt(this,at,_t),lt(this,xt,Rt),lt(this,ht,m),lt(this,yt,Nt),lt(this,Ht,St),lt(this,At,F);const wt=s.PDFDateString.toDateObject(K);wt&&lt(this,z,Rt.l10n.get("annotation_date_string",{date:wt.toLocaleDateString(),time:wt.toLocaleTimeString()})),this.trigger=F.flatMap(Ot=>Ot.getElementsToTriggerPopup());for(const Ot of this.trigger)Ot.addEventListener("click",r(this,ot)),Ot.addEventListener("mouseenter",r(this,ut)),Ot.addEventListener("mouseleave",r(this,Z));r(this,pt).hidden=!0,Ft&&nt(this,bt,We).call(this)}render(){if(r(this,It))return;const{page:{view:T},viewport:{rawDims:{pageWidth:m,pageHeight:F,pageX:L,pageY:K}}}=r(this,xt),rt=lt(this,It,document.createElement("div"));if(rt.className="popup",r(this,ht)){const zt=rt.style.outlineColor=i.Util.makeHexColor(...r(this,ht));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?rt.style.backgroundColor=`color-mix(in srgb, ${zt} 30%, white)`:rt.style.backgroundColor=i.Util.makeHexColor(...r(this,ht).map(te=>Math.floor(.7*(255-te)+te)))}const _t=document.createElement("span");_t.className="header";const Rt=document.createElement("h1");if(_t.append(Rt),{dir:Rt.dir,str:Rt.textContent}=r(this,it),rt.append(_t),r(this,z)){const zt=document.createElement("span");zt.classList.add("popupDate"),r(this,z).then(Qt=>{zt.textContent=Qt}),_t.append(zt)}const Nt=r(this,Tt),St=r(this,at);if(St!=null&&St.str&&(!(Nt!=null&&Nt.str)||Nt.str===St.str))y.XfaLayer.render({xfaHtml:St.html,intent:"richText",div:rt}),rt.lastChild.classList.add("richText","popupContent");else{const zt=this._formatContents(Nt);rt.append(zt)}let Ft=!!r(this,Ht),wt=Ft?r(this,Ht):r(this,yt);for(const zt of r(this,At))if(!wt||i.Util.intersect(zt.data.rect,wt)!==null){wt=zt.data.rect,Ft=!0;break}const Ot=i.Util.normalizeRect([wt[0],T[3]-wt[1]+T[1],wt[2],T[3]-wt[3]+T[1]]),Mt=5,$t=Ft?wt[2]-wt[0]+Mt:0,jt=Ot[0]+$t,Yt=Ot[1],{style:Jt}=r(this,pt);Jt.left=`${100*(jt-L)/m}%`,Jt.top=`${100*(Yt-K)/F}%`,r(this,pt).append(rt)}_formatContents({str:T,dir:m}){const F=document.createElement("p");F.classList.add("popupContent"),F.dir=m;const L=T.split(/(?:\r\n?|\n)/);for(let K=0,rt=L.length;K<rt;++K){const _t=L[K];F.append(document.createTextNode(_t)),K<rt-1&&F.append(document.createElement("br"))}return F}forceHide(){lt(this,mt,this.isVisible),r(this,mt)&&(r(this,pt).hidden=!0)}maybeShow(){r(this,mt)&&(lt(this,mt,!1),r(this,pt).hidden=!1)}get isVisible(){return r(this,pt).hidden===!1}}z=new WeakMap,Z=new WeakMap,ut=new WeakMap,ot=new WeakMap,ht=new WeakMap,pt=new WeakMap,Tt=new WeakMap,At=new WeakMap,xt=new WeakMap,Ht=new WeakMap,vt=new WeakMap,It=new WeakMap,yt=new WeakMap,at=new WeakMap,it=new WeakMap,mt=new WeakMap,bt=new WeakSet,We=function(){lt(this,vt,!r(this,vt)),r(this,vt)?(nt(this,Dt,je).call(this),r(this,pt).addEventListener("click",r(this,ot))):(nt(this,kt,Ge).call(this),r(this,pt).removeEventListener("click",r(this,ot)))},Dt=new WeakSet,je=function(){r(this,It)||this.render(),this.isVisible?r(this,vt)&&r(this,pt).classList.add("focused"):(r(this,pt).hidden=!1,r(this,pt).style.zIndex=parseInt(r(this,pt).style.zIndex)+1e3)},kt=new WeakSet,Ge=function(){r(this,pt).classList.remove("focused"),!(r(this,vt)||!this.isVisible)&&(r(this,pt).hidden=!0,r(this,pt).style.zIndex=parseInt(r(this,pt).style.zIndex)-1e3)};class g extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0}),this.textContent=T.data.textContent,this.textPosition=T.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const T=document.createElement("div");T.classList.add("annotationTextContent"),T.setAttribute("role","comment");for(const m of this.textContent){const F=document.createElement("span");F.textContent=m,T.append(F)}this.container.append(T)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=g;class f extends A{constructor(m){var L,K,rt;const F=!!(m.data.popupRef||(L=m.data.titleObj)!=null&&L.str||(K=m.data.contentsObj)!=null&&K.str||(rt=m.data.richText)!=null&&rt.str);super(m,{isRenderable:F,ignoreBorder:!0});q(this,Ut,null)}render(){this.container.classList.add("lineAnnotation");const m=this.data,{width:F,height:L}=I(m.rect),K=this.svgFactory.create(F,L,!0),rt=lt(this,Ut,this.svgFactory.createElement("svg:line"));return rt.setAttribute("x1",m.rect[2]-m.lineCoordinates[0]),rt.setAttribute("y1",m.rect[3]-m.lineCoordinates[1]),rt.setAttribute("x2",m.rect[2]-m.lineCoordinates[2]),rt.setAttribute("y2",m.rect[3]-m.lineCoordinates[3]),rt.setAttribute("stroke-width",m.borderStyle.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),K.append(rt),this.container.append(K),m.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ut=new WeakMap;class B extends A{constructor(m){var L,K,rt;const F=!!(m.data.popupRef||(L=m.data.titleObj)!=null&&L.str||(K=m.data.contentsObj)!=null&&K.str||(rt=m.data.richText)!=null&&rt.str);super(m,{isRenderable:F,ignoreBorder:!0});q(this,Vt,null)}render(){this.container.classList.add("squareAnnotation");const m=this.data,{width:F,height:L}=I(m.rect),K=this.svgFactory.create(F,L,!0),rt=m.borderStyle.width,_t=lt(this,Vt,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",rt/2),_t.setAttribute("y",rt/2),_t.setAttribute("width",F-rt),_t.setAttribute("height",L-rt),_t.setAttribute("stroke-width",rt||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),K.append(_t),this.container.append(K),m.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vt=new WeakMap;class U extends A{constructor(m){var L,K,rt;const F=!!(m.data.popupRef||(L=m.data.titleObj)!=null&&L.str||(K=m.data.contentsObj)!=null&&K.str||(rt=m.data.richText)!=null&&rt.str);super(m,{isRenderable:F,ignoreBorder:!0});q(this,dt,null)}render(){this.container.classList.add("circleAnnotation");const m=this.data,{width:F,height:L}=I(m.rect),K=this.svgFactory.create(F,L,!0),rt=m.borderStyle.width,_t=lt(this,dt,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",F/2),_t.setAttribute("cy",L/2),_t.setAttribute("rx",F/2-rt/2),_t.setAttribute("ry",L/2-rt/2),_t.setAttribute("stroke-width",rt||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),K.append(_t),this.container.append(K),m.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}dt=new WeakMap;class X extends A{constructor(m){var L,K,rt;const F=!!(m.data.popupRef||(L=m.data.titleObj)!=null&&L.str||(K=m.data.contentsObj)!=null&&K.str||(rt=m.data.richText)!=null&&rt.str);super(m,{isRenderable:F,ignoreBorder:!0});q(this,tt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const m=this.data,{width:F,height:L}=I(m.rect),K=this.svgFactory.create(F,L,!0);let rt=[];for(const Rt of m.vertices){const Nt=Rt.x-m.rect[0],St=m.rect[3]-Rt.y;rt.push(Nt+","+St)}rt=rt.join(" ");const _t=lt(this,tt,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",rt),_t.setAttribute("stroke-width",m.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),K.append(_t),this.container.append(K),m.popupRef||this._createPopup(_t,m),this.container}getElementsToTriggerPopup(){return r(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap;class P extends X{constructor(T){super(T),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class H extends A{constructor(m){var L,K,rt;const F=!!(m.data.popupRef||(L=m.data.titleObj)!=null&&L.str||(K=m.data.contentsObj)!=null&&K.str||(rt=m.data.richText)!=null&&rt.str);super(m,{isRenderable:F,ignoreBorder:!0});q(this,et,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const m=this.data,{width:F,height:L}=I(m.rect),K=this.svgFactory.create(F,L,!0);for(const rt of m.inkLists){let _t=[];for(const Nt of rt){const St=Nt.x-m.rect[0],Ft=m.rect[3]-Nt.y;_t.push(`${St},${Ft}`)}_t=_t.join(" ");const Rt=this.svgFactory.createElement(this.svgElementName);r(this,et).push(Rt),Rt.setAttribute("points",_t),Rt.setAttribute("stroke-width",m.borderStyle.width||1),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),m.popupRef||this._createPopup(Rt,m),K.append(Rt)}return this.container.append(K),this.container}getElementsToTriggerPopup(){return r(this,et)}addHighlightArea(){this.container.classList.add("highlightArea")}}et=new WeakMap,t.InkAnnotationElement=H;class V extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Q extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class st extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ft extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Et extends A{constructor(T){var F,L,K;const m=!!(T.data.popupRef||(F=T.data.titleObj)!=null&&F.str||(L=T.data.contentsObj)!=null&&L.str||(K=T.data.richText)!=null&&K.str);super(T,{isRenderable:m,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}t.StampAnnotationElement=Et;class W extends A{constructor(m){var K;super(m,{isRenderable:!0});q(this,Ct,null);const{filename:F,content:L}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(F,!0),this.content=L,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:F,content:L})}render(){var F,L;this.container.classList.add("fileAttachmentAnnotation");let m;return this.data.hasAppearance?m=document.createElement("div"):(m=document.createElement("img"),m.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),m.classList.add("popupTriggerArea"),m.addEventListener("dblclick",this._download.bind(this)),lt(this,Ct,m),!this.data.popupRef&&((F=this.data.titleObj)!=null&&F.str||(L=this.data.contentsObj)!=null&&L.str||this.data.richText)&&this._createPopup(),this.container.append(m),this.container}getElementsToTriggerPopup(){return r(this,Ct)}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){var m;(m=this.downloadManager)==null||m.openOrDownloadData(this.container,this.content,this.filename)}}Ct=new WeakMap;class d{constructor({div:T,accessibilityManager:m,annotationCanvasMap:F,l10n:L,page:K,viewport:rt}){q(this,Xt);q(this,J);q(this,Bt,null);q(this,Lt,null);q(this,Kt,new Map);this.div=T,lt(this,Bt,m),lt(this,Lt,F),this.l10n=L,this.page=K,this.viewport=rt,this.zIndex=0,this.l10n||(this.l10n=N.NullL10n)}async render(T){const{annotations:m}=T,F=this.div;(0,s.setLayerDimensions)(F,this.viewport);const L=new Map,K={data:null,layer:F,linkService:T.linkService,downloadManager:T.downloadManager,imageResourcesPath:T.imageResourcesPath||"",renderForms:T.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:T.annotationStorage||new a.AnnotationStorage,enableScripting:T.enableScripting===!0,hasJSActions:T.hasJSActions,fieldObjects:T.fieldObjects,parent:this,elements:null};for(const rt of m){if(rt.noHTML)continue;const _t=rt.annotationType===i.AnnotationType.POPUP;if(_t){const St=L.get(rt.id);if(!St)continue;K.elements=St}else{const{width:St,height:Ft}=I(rt.rect);if(St<=0||Ft<=0)continue}K.data=rt;const Rt=C.create(K);if(!Rt.isRenderable)continue;if(!_t&&rt.popupRef){const St=L.get(rt.popupRef);St?St.push(Rt):L.set(rt.popupRef,[Rt])}Rt.annotationEditorType>0&&r(this,Kt).set(Rt.data.id,Rt);const Nt=Rt.render();rt.hidden&&(Nt.style.visibility="hidden"),nt(this,Xt,yn).call(this,Nt,rt.id)}nt(this,J,Ke).call(this),await this.l10n.translate(F)}update({viewport:T}){const m=this.div;this.viewport=T,(0,s.setLayerDimensions)(m,{rotation:T.rotation}),nt(this,J,Ke).call(this),m.hidden=!1}getEditableAnnotations(){return Array.from(r(this,Kt).values())}getEditableAnnotation(T){return r(this,Kt).get(T)}}Bt=new WeakMap,Lt=new WeakMap,Kt=new WeakMap,Xt=new WeakSet,yn=function(T,m){var L;const F=T.firstChild||T;F.id=`${s.AnnotationPrefix}${m}`,this.div.append(T),(L=r(this,Bt))==null||L.moveElementInDOM(this.div,T,F,!1)},J=new WeakSet,Ke=function(){if(!r(this,Lt))return;const T=this.div;for(const[m,F]of r(this,Lt)){const L=T.querySelector(`[data-annotation-id="${m}"]`);if(!L)continue;const{firstChild:K}=L;K?K.nodeName==="CANVAS"?K.replaceWith(F):K.before(F):L.append(F)}r(this,Lt).clear()},t.AnnotationLayer=d},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function e(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([a,o,N,y]){return["G",1-Math.min(1,.3*a+.59*N+.11*o+y)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_HTML([a]){const o=e(a);return`#${o}${o}${o}`}static RGB_G([a,o,N]){return["G",.3*a+.59*o+.11*N]}static RGB_HTML([a,o,N]){const y=e(a),_=e(o),l=e(N);return`#${y}${_}${l}`}static T_HTML(){return"#00000000"}static CMYK_RGB([a,o,N,y]){return["RGB",1-Math.min(1,a+y),1-Math.min(1,N+y),1-Math.min(1,o+y)]}static CMYK_HTML(a){const o=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(o)}static RGB_CMYK([a,o,N]){const y=1-a,_=1-o,l=1-N,D=Math.min(y,_,l);return["CMYK",y,_,l,D]}}t.ColorConverters=i},(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=i;const e={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};e.print_progress_percent="{{progress}}%";function i(o,N){switch(o){case"find_match_count":o=`find_match_count[${N.total===1?"one":"other"}]`;break;case"find_match_count_limit":o=`find_match_count_limit[${N.limit===1?"one":"other"}]`;break}return e[o]||""}function s(o,N){return N?o.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(y,_)=>_ in N?N[_]:"{{"+_+"}}"):o}const a={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(o,N=null,y=i(o,N)){return s(y,N)},async translate(o){}};t.NullL10n=a},(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=e(25);class s{static setupStorage(o,N,y,_,l){const D=_.getValue(N,{value:null});switch(y.name){case"textarea":if(D.value!==null&&(o.textContent=D.value),l==="print")break;o.addEventListener("input",I=>{_.setValue(N,{value:I.target.value})});break;case"input":if(y.attributes.type==="radio"||y.attributes.type==="checkbox"){if(D.value===y.attributes.xfaOn?o.setAttribute("checked",!0):D.value===y.attributes.xfaOff&&o.removeAttribute("checked"),l==="print")break;o.addEventListener("change",I=>{_.setValue(N,{value:I.target.checked?I.target.getAttribute("xfaOn"):I.target.getAttribute("xfaOff")})})}else{if(D.value!==null&&o.setAttribute("value",D.value),l==="print")break;o.addEventListener("input",I=>{_.setValue(N,{value:I.target.value})})}break;case"select":if(D.value!==null){o.setAttribute("value",D.value);for(const I of y.children)I.attributes.value===D.value?I.attributes.selected=!0:I.attributes.hasOwnProperty("selected")&&delete I.attributes.selected}o.addEventListener("input",I=>{const C=I.target.options,A=C.selectedIndex===-1?"":C[C.selectedIndex].value;_.setValue(N,{value:A})});break}}static setAttributes({html:o,element:N,storage:y=null,intent:_,linkService:l}){const{attributes:D}=N,I=o instanceof HTMLAnchorElement;D.type==="radio"&&(D.name=`${D.name}-${_}`);for(const[C,A]of Object.entries(D))if(A!=null)switch(C){case"class":A.length&&o.setAttribute(C,A.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",A);break;case"style":Object.assign(o.style,A);break;case"textContent":o.textContent=A;break;default:(!I||C!=="href"&&C!=="newWindow")&&o.setAttribute(C,A)}I&&l.addLinkAttributes(o,D.href,D.newWindow),y&&D.dataId&&this.setupStorage(o,D.dataId,N,y)}static render(o){var b;const N=o.annotationStorage,y=o.linkService,_=o.xfaHtml,l=o.intent||"display",D=document.createElement(_.name);_.attributes&&this.setAttributes({html:D,element:_,intent:l,linkService:y});const I=[[_,-1,D]],C=o.div;if(C.append(D),o.viewport){const E=`matrix(${o.viewport.transform.join(",")})`;C.style.transform=E}l!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const A=[];for(;I.length>0;){const[E,O,x]=I.at(-1);if(O+1===E.children.length){I.pop();continue}const M=E.children[++I.at(-1)[1]];if(M===null)continue;const{name:S}=M;if(S==="#text"){const p=document.createTextNode(M.value);A.push(p),x.append(p);continue}const u=(b=M==null?void 0:M.attributes)!=null&&b.xmlns?document.createElementNS(M.attributes.xmlns,S):document.createElement(S);if(x.append(u),M.attributes&&this.setAttributes({html:u,element:M,storage:N,intent:l,linkService:y}),M.children&&M.children.length>0)I.push([M,-1,u]);else if(M.value){const p=document.createTextNode(M.value);i.XfaText.shouldBuildText(S)&&A.push(p),u.append(p)}}for(const E of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:A}}static update(o){const N=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=N,o.div.hidden=!1}}t.XfaLayer=s},(n,t,e)=>{var y,_,l,D,I,C,A,b,E,O,x,M,S,u,p,k,Sn,h,Tn,f,Cn,U,wn,P,Ye,H,On,Q,ze,ft,Rn,W,Pn,c,Nn,j,xn,G,Dn,Z,ie,ot,qe,pt,ve,At,ye,Ht,ce,It,Xe,at,Se,mt,Ln,Pt,Je,Wt,Mn,Gt,In,Vt,Qe,tt,Te,Ct,he;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var i=e(1),s=e(4),a=e(29),o=e(5);const Lt=class Lt extends s.AnnotationEditor{constructor(v){super({...v,name:"inkEditor"});q(this,k);q(this,h);q(this,f);q(this,U);q(this,P);q(this,H);q(this,Q);q(this,ft);q(this,W);q(this,c);q(this,j);q(this,G);q(this,Z);q(this,ot);q(this,pt);q(this,At);q(this,Ht);q(this,It);q(this,at);q(this,Gt);q(this,Vt);q(this,tt);q(this,Ct);q(this,y,0);q(this,_,0);q(this,l,this.canvasContextMenu.bind(this));q(this,D,this.canvasPointermove.bind(this));q(this,I,this.canvasPointerleave.bind(this));q(this,C,this.canvasPointerup.bind(this));q(this,A,this.canvasPointerdown.bind(this));q(this,b,new Path2D);q(this,E,!1);q(this,O,!1);q(this,x,!1);q(this,M,null);q(this,S,0);q(this,u,0);q(this,p,null);this.color=v.color||null,this.thickness=v.thickness||null,this.opacity=v.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(v){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(J=>[J,v.get(J)]))}static updateDefaultParams(v,J){switch(v){case i.AnnotationEditorParamsType.INK_THICKNESS:Lt._defaultThickness=J;break;case i.AnnotationEditorParamsType.INK_COLOR:Lt._defaultColor=J;break;case i.AnnotationEditorParamsType.INK_OPACITY:Lt._defaultOpacity=J/100;break}}updateParams(v,J){switch(v){case i.AnnotationEditorParamsType.INK_THICKNESS:nt(this,k,Sn).call(this,J);break;case i.AnnotationEditorParamsType.INK_COLOR:nt(this,h,Tn).call(this,J);break;case i.AnnotationEditorParamsType.INK_OPACITY:nt(this,f,Cn).call(this,J);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Lt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Lt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Lt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Lt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Lt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Lt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(nt(this,pt,ve).call(this),nt(this,At,ye).call(this)),this.isAttachedToDOM||(this.parent.add(this),nt(this,Ht,ce).call(this)),nt(this,Ct,he).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,r(this,M).disconnect(),lt(this,M,null),super.remove())}setParent(v){!this.parent&&v?this._uiManager.removeShouldRescale(this):this.parent&&v===null&&this._uiManager.addShouldRescale(this),super.setParent(v)}onScaleChanging(){const[v,J]=this.parentDimensions,gt=this.width*v,ct=this.height*J;this.setDimensions(gt,ct)}enableEditMode(){r(this,E)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",r(this,A)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",r(this,A)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){r(this,E)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),lt(this,E,!0),this.div.classList.add("disabled"),nt(this,Ct,he).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(v){super.focusin(v),this.enableEditMode()}canvasPointerdown(v){v.button!==0||!this.isInEditMode()||r(this,E)||(this.setInForeground(),v.preventDefault(),v.type!=="mouse"&&this.div.focus(),nt(this,H,On).call(this,v.offsetX,v.offsetY))}canvasContextMenu(v){v.preventDefault()}canvasPointermove(v){v.preventDefault(),nt(this,Q,ze).call(this,v.offsetX,v.offsetY)}canvasPointerup(v){v.preventDefault(),nt(this,ot,qe).call(this,v)}canvasPointerleave(v){nt(this,ot,qe).call(this,v)}get isResizable(){return!this.isEmpty()&&r(this,E)}render(){if(this.div)return this.div;let v,J;this.width&&(v=this.x,J=this.y),super.render(),Lt._l10nPromise.get("editor_ink2_aria_label").then(F=>{var L;return(L=this.div)==null?void 0:L.setAttribute("aria-label",F)});const[gt,ct,T,m]=nt(this,U,wn).call(this);if(this.setAt(gt,ct,0,0),this.setDims(T,m),nt(this,pt,ve).call(this),this.width){const[F,L]=this.parentDimensions;this.setAspectRatio(this.width*F,this.height*L),this.setAt(v*F,J*L,this.width*F,this.height*L),lt(this,x,!0),nt(this,Ht,ce).call(this),this.setDims(this.width*F,this.height*L),nt(this,Z,ie).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return nt(this,At,ye).call(this),this.div}setDimensions(v,J){const gt=Math.round(v),ct=Math.round(J);if(r(this,S)===gt&&r(this,u)===ct)return;lt(this,S,gt),lt(this,u,ct),this.canvas.style.visibility="hidden";const[T,m]=this.parentDimensions;this.width=v/T,this.height=J/m,this.fixAndSetPosition(),r(this,E)&&nt(this,It,Xe).call(this,v,J),nt(this,Ht,ce).call(this),nt(this,Z,ie).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(v,J,gt){var Ft,wt,Ot;if(v instanceof a.InkAnnotationElement)return null;const ct=super.deserialize(v,J,gt);ct.thickness=v.thickness,ct.color=i.Util.makeHexColor(...v.color),ct.opacity=v.opacity;const[T,m]=ct.pageDimensions,F=ct.width*T,L=ct.height*m,K=ct.parentScale,rt=v.thickness/2;lt(ct,E,!0),lt(ct,S,Math.round(F)),lt(ct,u,Math.round(L));const{paths:_t,rect:Rt,rotation:Nt}=v;for(let{bezier:Mt}of _t){Mt=nt(Ft=Lt,Wt,Mn).call(Ft,Mt,Rt,Nt);const $t=[];ct.paths.push($t);let jt=K*(Mt[0]-rt),Yt=K*(Mt[1]-rt);for(let zt=2,Qt=Mt.length;zt<Qt;zt+=6){const te=K*(Mt[zt]-rt),Zt=K*(Mt[zt+1]-rt),se=K*(Mt[zt+2]-rt),Hn=K*(Mt[zt+3]-rt),en=K*(Mt[zt+4]-rt),nn=K*(Mt[zt+5]-rt);$t.push([[jt,Yt],[te,Zt],[se,Hn],[en,nn]]),jt=en,Yt=nn}const Jt=nt(this,mt,Ln).call(this,$t);ct.bezierPath2D.push(Jt)}const St=nt(wt=ct,Vt,Qe).call(wt);return lt(ct,_,Math.max(s.AnnotationEditor.MIN_SIZE,St[2]-St[0])),lt(ct,y,Math.max(s.AnnotationEditor.MIN_SIZE,St[3]-St[1])),nt(Ot=ct,It,Xe).call(Ot,F,L),ct}serialize(){if(this.isEmpty())return null;const v=this.getRect(0,0),J=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:J,thickness:this.thickness,opacity:this.opacity,paths:nt(this,Gt,In).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,v),pageIndex:this.pageIndex,rect:v,rotation:this.rotation}}};y=new WeakMap,_=new WeakMap,l=new WeakMap,D=new WeakMap,I=new WeakMap,C=new WeakMap,A=new WeakMap,b=new WeakMap,E=new WeakMap,O=new WeakMap,x=new WeakMap,M=new WeakMap,S=new WeakMap,u=new WeakMap,p=new WeakMap,k=new WeakSet,Sn=function(v){const J=this.thickness;this.addCommands({cmd:()=>{this.thickness=v,nt(this,Ct,he).call(this)},undo:()=>{this.thickness=J,nt(this,Ct,he).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Tn=function(v){const J=this.color;this.addCommands({cmd:()=>{this.color=v,nt(this,Z,ie).call(this)},undo:()=>{this.color=J,nt(this,Z,ie).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,Cn=function(v){v/=100;const J=this.opacity;this.addCommands({cmd:()=>{this.opacity=v,nt(this,Z,ie).call(this)},undo:()=>{this.opacity=J,nt(this,Z,ie).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},U=new WeakSet,wn=function(){const{parentRotation:v,parentDimensions:[J,gt]}=this;switch(v){case 90:return[0,gt,gt,J];case 180:return[J,gt,J,gt];case 270:return[J,0,gt,J];default:return[0,0,J,gt]}},P=new WeakSet,Ye=function(){const{ctx:v,color:J,opacity:gt,thickness:ct,parentScale:T,scaleFactor:m}=this;v.lineWidth=ct*T/m,v.lineCap="round",v.lineJoin="round",v.miterLimit=10,v.strokeStyle=`${J}${(0,o.opacityToHex)(gt)}`},H=new WeakSet,On=function(v,J){this.canvas.addEventListener("contextmenu",r(this,l)),this.canvas.addEventListener("pointerleave",r(this,I)),this.canvas.addEventListener("pointermove",r(this,D)),this.canvas.addEventListener("pointerup",r(this,C)),this.canvas.removeEventListener("pointerdown",r(this,A)),this.isEditing=!0,r(this,x)||(lt(this,x,!0),nt(this,Ht,ce).call(this),this.thickness||(this.thickness=Lt._defaultThickness),this.color||(this.color=Lt._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Lt._defaultOpacity)),this.currentPath.push([v,J]),lt(this,O,!1),nt(this,P,Ye).call(this),lt(this,p,()=>{nt(this,c,Nn).call(this),r(this,p)&&window.requestAnimationFrame(r(this,p))}),window.requestAnimationFrame(r(this,p))},Q=new WeakSet,ze=function(v,J){const[gt,ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&v===gt&&J===ct)return;const T=this.currentPath;let m=r(this,b);if(T.push([v,J]),lt(this,O,!0),T.length<=2){m.moveTo(...T[0]),m.lineTo(v,J);return}T.length===3&&(lt(this,b,m=new Path2D),m.moveTo(...T[0])),nt(this,j,xn).call(this,m,...T.at(-3),...T.at(-2),v,J)},ft=new WeakSet,Rn=function(){if(this.currentPath.length===0)return;const v=this.currentPath.at(-1);r(this,b).lineTo(...v)},W=new WeakSet,Pn=function(v,J){lt(this,p,null),v=Math.min(Math.max(v,0),this.canvas.width),J=Math.min(Math.max(J,0),this.canvas.height),nt(this,Q,ze).call(this,v,J),nt(this,ft,Rn).call(this);let gt;if(this.currentPath.length!==1)gt=nt(this,G,Dn).call(this);else{const L=[v,J];gt=[[L,L.slice(),L.slice(),L]]}const ct=r(this,b),T=this.currentPath;this.currentPath=[],lt(this,b,new Path2D);const m=()=>{this.allRawPaths.push(T),this.paths.push(gt),this.bezierPath2D.push(ct),this.rebuild()},F=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(nt(this,pt,ve).call(this),nt(this,At,ye).call(this)),nt(this,Ct,he).call(this))};this.addCommands({cmd:m,undo:F,mustExec:!0})},c=new WeakSet,Nn=function(){if(!r(this,O))return;lt(this,O,!1);const v=Math.ceil(this.thickness*this.parentScale),J=this.currentPath.slice(-3),gt=J.map(m=>m[0]),ct=J.map(m=>m[1]);Math.min(...gt)-v,Math.max(...gt)+v,Math.min(...ct)-v,Math.max(...ct)+v;const{ctx:T}=this;T.save(),T.clearRect(0,0,this.canvas.width,this.canvas.height);for(const m of this.bezierPath2D)T.stroke(m);T.stroke(r(this,b)),T.restore()},j=new WeakSet,xn=function(v,J,gt,ct,T,m,F){const L=(J+ct)/2,K=(gt+T)/2,rt=(ct+m)/2,_t=(T+F)/2;v.bezierCurveTo(L+2*(ct-L)/3,K+2*(T-K)/3,rt+2*(ct-rt)/3,_t+2*(T-_t)/3,rt,_t)},G=new WeakSet,Dn=function(){const v=this.currentPath;if(v.length<=2)return[[v[0],v[0],v.at(-1),v.at(-1)]];const J=[];let gt,[ct,T]=v[0];for(gt=1;gt<v.length-2;gt++){const[Rt,Nt]=v[gt],[St,Ft]=v[gt+1],wt=(Rt+St)/2,Ot=(Nt+Ft)/2,Mt=[ct+2*(Rt-ct)/3,T+2*(Nt-T)/3],$t=[wt+2*(Rt-wt)/3,Ot+2*(Nt-Ot)/3];J.push([[ct,T],Mt,$t,[wt,Ot]]),[ct,T]=[wt,Ot]}const[m,F]=v[gt],[L,K]=v[gt+1],rt=[ct+2*(m-ct)/3,T+2*(F-T)/3],_t=[L+2*(m-L)/3,K+2*(F-K)/3];return J.push([[ct,T],rt,_t,[L,K]]),J},Z=new WeakSet,ie=function(){if(this.isEmpty()){nt(this,at,Se).call(this);return}nt(this,P,Ye).call(this);const{canvas:v,ctx:J}=this;J.setTransform(1,0,0,1,0,0),J.clearRect(0,0,v.width,v.height),nt(this,at,Se).call(this);for(const gt of this.bezierPath2D)J.stroke(gt)},ot=new WeakSet,qe=function(v){this.canvas.removeEventListener("pointerleave",r(this,I)),this.canvas.removeEventListener("pointermove",r(this,D)),this.canvas.removeEventListener("pointerup",r(this,C)),this.canvas.addEventListener("pointerdown",r(this,A)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",r(this,l))},10),nt(this,W,Pn).call(this,v.offsetX,v.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pt=new WeakSet,ve=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Lt._l10nPromise.get("editor_ink_canvas_aria_label").then(v=>{var J;return(J=this.canvas)==null?void 0:J.setAttribute("aria-label",v)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},At=new WeakSet,ye=function(){lt(this,M,new ResizeObserver(v=>{const J=v[0].contentRect;J.width&&J.height&&this.setDimensions(J.width,J.height)})),r(this,M).observe(this.div)},Ht=new WeakSet,ce=function(){if(!r(this,x))return;const[v,J]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*v),this.canvas.height=Math.ceil(this.height*J),nt(this,at,Se).call(this)},It=new WeakSet,Xe=function(v,J){const gt=nt(this,tt,Te).call(this),ct=(v-gt)/r(this,_),T=(J-gt)/r(this,y);this.scaleFactor=Math.min(ct,T)},at=new WeakSet,Se=function(){const v=nt(this,tt,Te).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+v,this.translationY*this.scaleFactor+v)},mt=new WeakSet,Ln=function(v){const J=new Path2D;for(let gt=0,ct=v.length;gt<ct;gt++){const[T,m,F,L]=v[gt];gt===0&&J.moveTo(...T),J.bezierCurveTo(m[0],m[1],F[0],F[1],L[0],L[1])}return J},Pt=new WeakSet,Je=function(v,J,gt){const[ct,T,m,F]=J;switch(gt){case 0:for(let L=0,K=v.length;L<K;L+=2)v[L]+=ct,v[L+1]=F-v[L+1];break;case 90:for(let L=0,K=v.length;L<K;L+=2){const rt=v[L];v[L]=v[L+1]+ct,v[L+1]=rt+T}break;case 180:for(let L=0,K=v.length;L<K;L+=2)v[L]=m-v[L],v[L+1]+=T;break;case 270:for(let L=0,K=v.length;L<K;L+=2){const rt=v[L];v[L]=m-v[L+1],v[L+1]=F-rt}break;default:throw new Error("Invalid rotation")}return v},Wt=new WeakSet,Mn=function(v,J,gt){const[ct,T,m,F]=J;switch(gt){case 0:for(let L=0,K=v.length;L<K;L+=2)v[L]-=ct,v[L+1]=F-v[L+1];break;case 90:for(let L=0,K=v.length;L<K;L+=2){const rt=v[L];v[L]=v[L+1]-T,v[L+1]=rt-ct}break;case 180:for(let L=0,K=v.length;L<K;L+=2)v[L]=m-v[L],v[L+1]-=T;break;case 270:for(let L=0,K=v.length;L<K;L+=2){const rt=v[L];v[L]=F-v[L+1],v[L+1]=m-rt}break;default:throw new Error("Invalid rotation")}return v},Gt=new WeakSet,In=function(v,J,gt,ct){var K,rt;const T=[],m=this.thickness/2,F=v*J+m,L=v*gt+m;for(const _t of this.paths){const Rt=[],Nt=[];for(let St=0,Ft=_t.length;St<Ft;St++){const[wt,Ot,Mt,$t]=_t[St],jt=v*wt[0]+F,Yt=v*wt[1]+L,Jt=v*Ot[0]+F,zt=v*Ot[1]+L,Qt=v*Mt[0]+F,te=v*Mt[1]+L,Zt=v*$t[0]+F,se=v*$t[1]+L;St===0&&(Rt.push(jt,Yt),Nt.push(jt,Yt)),Rt.push(Jt,zt,Qt,te,Zt,se),Nt.push(Jt,zt),St===Ft-1&&Nt.push(Zt,se)}T.push({bezier:nt(K=Lt,Pt,Je).call(K,Rt,ct,this.rotation),points:nt(rt=Lt,Pt,Je).call(rt,Nt,ct,this.rotation)})}return T},Vt=new WeakSet,Qe=function(){let v=1/0,J=-1/0,gt=1/0,ct=-1/0;for(const T of this.paths)for(const[m,F,L,K]of T){const rt=i.Util.bezierBoundingBox(...m,...F,...L,...K);v=Math.min(v,rt[0]),gt=Math.min(gt,rt[1]),J=Math.max(J,rt[2]),ct=Math.max(ct,rt[3])}return[v,gt,J,ct]},tt=new WeakSet,Te=function(){return r(this,E)?Math.ceil(this.thickness*this.parentScale):0},Ct=new WeakSet,he=function(v=!1){if(this.isEmpty())return;if(!r(this,E)){nt(this,Z,ie).call(this);return}const J=nt(this,Vt,Qe).call(this),gt=nt(this,tt,Te).call(this);lt(this,_,Math.max(s.AnnotationEditor.MIN_SIZE,J[2]-J[0])),lt(this,y,Math.max(s.AnnotationEditor.MIN_SIZE,J[3]-J[1]));const ct=Math.ceil(gt+r(this,_)*this.scaleFactor),T=Math.ceil(gt+r(this,y)*this.scaleFactor),[m,F]=this.parentDimensions;this.width=ct/m,this.height=T/F,this.setAspectRatio(ct,T);const L=this.translationX,K=this.translationY;this.translationX=-J[0],this.translationY=-J[1],nt(this,Ht,ce).call(this),nt(this,Z,ie).call(this),lt(this,S,ct),lt(this,u,T),this.setDims(ct,T);const rt=v?gt/this.scaleFactor/2:0;this.translate(L-this.translationX-rt,K-this.translationY-rt)},q(Lt,mt),q(Lt,Pt),q(Lt,Wt),qt(Lt,"_defaultColor",null),qt(Lt,"_defaultOpacity",1),qt(Lt,"_defaultThickness",1),qt(Lt,"_l10nPromise"),qt(Lt,"_type","ink");let N=Lt;t.InkEditor=N},(n,t,e)=>{var y,_,l,D,I,C,A,b,E,Ze,x,me,S,kn,p,Fn,w,tn,g,Ce,B,$n;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var i=e(4),s=e(1),a=e(6),o=e(29);class N extends i.AnnotationEditor{constructor(Y){super({...Y,name:"stampEditor"});q(this,E);q(this,x);q(this,S);q(this,p);q(this,w);q(this,g);q(this,B);q(this,y,null);q(this,_,null);q(this,l,null);q(this,D,null);q(this,I,null);q(this,C,null);q(this,A,null);q(this,b,!1);lt(this,D,Y.bitmapUrl)}remove(){var Y,H;r(this,_)&&(lt(this,y,null),this._uiManager.imageManager.deleteId(r(this,_)),(Y=r(this,I))==null||Y.remove(),lt(this,I,null),(H=r(this,C))==null||H.disconnect(),lt(this,C,null)),super.remove()}rebuild(){super.rebuild(),this.div!==null&&(r(this,_)&&nt(this,E,Ze).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this.div.draggable=!0,this.parent.addUndoableEditor(this),this.div.focus()}isEmpty(){return r(this,l)===null&&r(this,y)===null&&r(this,D)===null}get isResizable(){return!0}render(){if(this.div)return this.div;let Y,H;if(this.width&&(Y=this.x,H=this.y),super.render(),r(this,y)?nt(this,x,me).call(this):(this.div.classList.add("loading"),nt(this,E,Ze).call(this)),this.width){const[V,Q]=this.parentDimensions;this.setAt(Y*V,H*Q,this.width*V,this.height*Q)}return this.div}static deserialize(Y,H,V){if(Y instanceof o.StampAnnotationElement)return null;const Q=super.deserialize(Y,H,V),{rect:st,bitmapUrl:ft,bitmapId:Et,isSvg:W}=Y;Et&&V.imageManager.isValidId(Et)?lt(Q,_,Et):lt(Q,D,ft),lt(Q,b,W);const[d,c]=Q.pageDimensions;return Q.width=(st[2]-st[0])/d,Q.height=(st[3]-st[1])/c,Q}serialize(Y=!1,H=null){if(this.isEmpty())return null;const V={annotationType:s.AnnotationEditorType.STAMP,bitmapId:r(this,_),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:r(this,b)};if(Y)return V.bitmapUrl=nt(this,g,Ce).call(this,!0),V;if(H===null)return V;H.stamps||(H.stamps=new Map);const Q=r(this,b)?(V.rect[2]-V.rect[0])*(V.rect[3]-V.rect[1]):null;if(!H.stamps.has(r(this,_)))H.stamps.set(r(this,_),{area:Q,serialized:V}),V.bitmap=nt(this,g,Ce).call(this,!1);else if(r(this,b)){const st=H.stamps.get(r(this,_));Q>st.area&&(st.area=Q,st.serialized.bitmap.close(),st.serialized.bitmap=nt(this,g,Ce).call(this,!1))}return V}}y=new WeakMap,_=new WeakMap,l=new WeakMap,D=new WeakMap,I=new WeakMap,C=new WeakMap,A=new WeakMap,b=new WeakMap,E=new WeakSet,Ze=function(){if(r(this,_)){this._uiManager.imageManager.getFromId(r(this,_)).then(H=>{if(!H){this.remove();return}lt(this,y,H.bitmap),nt(this,x,me).call(this)});return}if(r(this,D)){const H=r(this,D);lt(this,D,null),lt(this,l,this._uiManager.imageManager.getFromUrl(H).then(V=>{if(lt(this,l,null),!V){this.remove();return}({bitmap:ne(this,y)._,id:ne(this,_)._,isSvg:ne(this,b)._}=V),nt(this,x,me).call(this)}));return}const Y=document.createElement("input");Y.type="file",Y.accept="image/*",lt(this,l,new Promise(H=>{Y.addEventListener("change",async()=>{if(lt(this,l,null),!Y.files||Y.files.length===0)this.remove();else{const V=await this._uiManager.imageManager.getFromFile(Y.files[0]);if(!V){this.remove();return}({bitmap:ne(this,y)._,id:ne(this,_)._,isSvg:ne(this,b)._}=V),nt(this,x,me).call(this)}H()}),Y.addEventListener("cancel",()=>{lt(this,l,null),this.remove(),H()})})),Y.click()},x=new WeakSet,me=function(){const{div:Y}=this;let{width:H,height:V}=r(this,y);const[Q,st]=this.pageDimensions,ft=.75;if(this.width)H=this.width*Q,V=this.height*st;else if(H>ft*Q||V>ft*st){const c=Math.min(ft*Q/H,ft*st/V);H*=c,V*=c}const[Et,W]=this.parentDimensions;this.setDims(H*Et/Q,V*W/st);const d=lt(this,I,document.createElement("canvas"));Y.append(d),nt(this,w,tn).call(this,H,V),nt(this,B,$n).call(this),Y.classList.remove("loading")},S=new WeakSet,kn=function(Y,H){const[V,Q]=this.parentDimensions;this.width=Y/V,this.height=H/Q,this.setDims(Y,H),this.fixAndSetPosition(),r(this,A)!==null&&clearTimeout(r(this,A)),lt(this,A,setTimeout(()=>{lt(this,A,null),nt(this,w,tn).call(this,Y,H)},200))},p=new WeakSet,Fn=function(Y,H){const{width:V,height:Q}=r(this,y);let st=V,ft=Q,Et=r(this,y);for(;st>2*Y||ft>2*H;){const W=st,d=ft;st>2*Y&&(st=st>=16384?Math.floor(st/2)-1:Math.ceil(st/2)),ft>2*H&&(ft=ft>=16384?Math.floor(ft/2)-1:Math.ceil(ft/2));const c=new OffscreenCanvas(st,ft);c.getContext("2d").drawImage(Et,0,0,W,d,0,0,st,ft),Et=c.transferToImageBitmap()}return Et},w=new WeakSet,tn=function(Y,H){const V=r(this,I);if(!V||V.width===Y&&V.height===H)return;V.width=Y,V.height=H;const Q=r(this,b)?r(this,y):nt(this,p,Fn).call(this,Y,H),st=V.getContext("2d");st.filter=this._uiManager.hcmFilter,st.drawImage(Q,0,0,Q.width,Q.height,0,0,Y,H)},g=new WeakSet,Ce=function(Y){if(Y){if(r(this,b)){const Q=this._uiManager.imageManager.getSvgUrl(r(this,_));if(Q)return Q}const H=document.createElement("canvas");return{width:H.width,height:H.height}=r(this,y),H.getContext("2d").drawImage(r(this,y),0,0),H.toDataURL()}if(r(this,b)){const[H,V]=this.pageDimensions,Q=Math.round(this.width*H*a.PixelsPerInch.PDF_TO_CSS_UNITS),st=Math.round(this.height*V*a.PixelsPerInch.PDF_TO_CSS_UNITS),ft=new OffscreenCanvas(Q,st);return ft.getContext("2d").drawImage(r(this,y),0,0,r(this,y).width,r(this,y).height,0,0,Q,st),ft.transferToImageBitmap()}return structuredClone(r(this,y))},B=new WeakSet,$n=function(){lt(this,C,new ResizeObserver(Y=>{const H=Y[0].contentRect;H.width&&H.height&&nt(this,S,kn).call(this,H.width,H.height)})),r(this,C).observe(this.div)},qt(N,"_type","stamp"),t.StampEditor=N}],__webpack_module_cache__={};function __w_pdfjs_require__(n){var t=__webpack_module_cache__[n];if(t!==void 0)return t.exports;var e=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](e,e.exports,__w_pdfjs_require__),e.exports}var __webpack_exports__={};return(()=>{var n=__webpack_exports__;Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(n,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(n,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(n,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(n,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(n,"AnnotationLayer",{enumerable:!0,get:function(){return N.AnnotationLayer}}),Object.defineProperty(n,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(n,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(n,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(n,"GlobalWorkerOptions",{enumerable:!0,get:function(){return y.GlobalWorkerOptions}}),Object.defineProperty(n,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(n,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(n,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(n,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(n,"PDFDataRangeTransport",{enumerable:!0,get:function(){return e.PDFDataRangeTransport}}),Object.defineProperty(n,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(n,"PDFWorker",{enumerable:!0,get:function(){return e.PDFWorker}}),Object.defineProperty(n,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(n,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(n,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(n,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(n,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(n,"SVGGraphics",{enumerable:!0,get:function(){return e.SVGGraphics}}),Object.defineProperty(n,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(n,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(n,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(n,"build",{enumerable:!0,get:function(){return e.build}}),Object.defineProperty(n,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(n,"getDocument",{enumerable:!0,get:function(){return e.getDocument}}),Object.defineProperty(n,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(n,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(n,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(n,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(n,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(n,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(n,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(n,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(n,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(n,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return e.version}});var t=__w_pdfjs_require__(1),e=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),N=__w_pdfjs_require__(29),y=__w_pdfjs_require__(14),_=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfjsLib=getDefaultExportFromCjs(pdfExports);function renderPDF(n,t){pdfjsLib.getDocument(n).promise.then(function(e){for(var i=document.getElementById(t),s=1;s<=e.numPages;s++)e.getPage(s).then(function(a){var o=document.createElement("canvas");i.appendChild(o);var N=a.getViewport({scale:1.5}),y=o.getContext("2d");o.height=N.height,o.width=N.width;var _={canvasContext:y,viewport:N};a.render(_)})})}window.renderPDF=renderPDF;
